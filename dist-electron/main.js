"use strict";const Ce=require("electron"),Ie=require("path"),Ke=require("fs"),rc=require("constants"),hr=require("stream"),Ji=require("util"),Rl=require("assert"),kr=require("child_process"),Cl=require("events"),pr=require("crypto"),bl=require("tty"),qr=require("os"),Lt=require("url"),nc=require("string_decoder"),Pl=require("zlib"),ic=require("http");var et=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},_t={},Xr={},Tr={},Aa;function Ye(){return Aa||(Aa=1,Tr.fromCallback=function(t){return Object.defineProperty(function(...d){if(typeof d[d.length-1]=="function")t.apply(this,d);else return new Promise((h,u)=>{d.push((f,l)=>f!=null?u(f):h(l)),t.apply(this,d)})},"name",{value:t.name})},Tr.fromPromise=function(t){return Object.defineProperty(function(...d){const h=d[d.length-1];if(typeof h!="function")return t.apply(this,d);d.pop(),t.apply(this,d).then(u=>h(null,u),h)},"name",{value:t.name})}),Tr}var Kr,Ta;function ac(){if(Ta)return Kr;Ta=1;var t=rc,d=process.cwd,h=null,u=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return h||(h=d.call(process)),h};try{process.cwd()}catch{}if(typeof process.chdir=="function"){var f=process.chdir;process.chdir=function(r){h=null,f.call(process,r)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,f)}Kr=l;function l(r){t.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&c(r),r.lutimes||a(r),r.chown=o(r.chown),r.fchown=o(r.fchown),r.lchown=o(r.lchown),r.chmod=s(r.chmod),r.fchmod=s(r.fchmod),r.lchmod=s(r.lchmod),r.chownSync=i(r.chownSync),r.fchownSync=i(r.fchownSync),r.lchownSync=i(r.lchownSync),r.chmodSync=n(r.chmodSync),r.fchmodSync=n(r.fchmodSync),r.lchmodSync=n(r.lchmodSync),r.stat=m(r.stat),r.fstat=m(r.fstat),r.lstat=m(r.lstat),r.statSync=g(r.statSync),r.fstatSync=g(r.fstatSync),r.lstatSync=g(r.lstatSync),r.chmod&&!r.lchmod&&(r.lchmod=function(p,S,C){C&&process.nextTick(C)},r.lchmodSync=function(){}),r.chown&&!r.lchown&&(r.lchown=function(p,S,C,P){P&&process.nextTick(P)},r.lchownSync=function(){}),u==="win32"&&(r.rename=typeof r.rename!="function"?r.rename:(function(p){function S(C,P,I){var M=Date.now(),R=0;p(C,P,function w(T){if(T&&(T.code==="EACCES"||T.code==="EPERM"||T.code==="EBUSY")&&Date.now()-M<6e4){setTimeout(function(){r.stat(P,function(E,q){E&&E.code==="ENOENT"?p(C,P,w):I(T)})},R),R<100&&(R+=10);return}I&&I(T)})}return Object.setPrototypeOf&&Object.setPrototypeOf(S,p),S})(r.rename)),r.read=typeof r.read!="function"?r.read:(function(p){function S(C,P,I,M,R,w){var T;if(w&&typeof w=="function"){var E=0;T=function(q,L,x){if(q&&q.code==="EAGAIN"&&E<10)return E++,p.call(r,C,P,I,M,R,T);w.apply(this,arguments)}}return p.call(r,C,P,I,M,R,T)}return Object.setPrototypeOf&&Object.setPrototypeOf(S,p),S})(r.read),r.readSync=typeof r.readSync!="function"?r.readSync:(function(p){return function(S,C,P,I,M){for(var R=0;;)try{return p.call(r,S,C,P,I,M)}catch(w){if(w.code==="EAGAIN"&&R<10){R++;continue}throw w}}})(r.readSync);function c(p){p.lchmod=function(S,C,P){p.open(S,t.O_WRONLY|t.O_SYMLINK,C,function(I,M){if(I){P&&P(I);return}p.fchmod(M,C,function(R){p.close(M,function(w){P&&P(R||w)})})})},p.lchmodSync=function(S,C){var P=p.openSync(S,t.O_WRONLY|t.O_SYMLINK,C),I=!0,M;try{M=p.fchmodSync(P,C),I=!1}finally{if(I)try{p.closeSync(P)}catch{}else p.closeSync(P)}return M}}function a(p){t.hasOwnProperty("O_SYMLINK")&&p.futimes?(p.lutimes=function(S,C,P,I){p.open(S,t.O_SYMLINK,function(M,R){if(M){I&&I(M);return}p.futimes(R,C,P,function(w){p.close(R,function(T){I&&I(w||T)})})})},p.lutimesSync=function(S,C,P){var I=p.openSync(S,t.O_SYMLINK),M,R=!0;try{M=p.futimesSync(I,C,P),R=!1}finally{if(R)try{p.closeSync(I)}catch{}else p.closeSync(I)}return M}):p.futimes&&(p.lutimes=function(S,C,P,I){I&&process.nextTick(I)},p.lutimesSync=function(){})}function s(p){return p&&function(S,C,P){return p.call(r,S,C,function(I){y(I)&&(I=null),P&&P.apply(this,arguments)})}}function n(p){return p&&function(S,C){try{return p.call(r,S,C)}catch(P){if(!y(P))throw P}}}function o(p){return p&&function(S,C,P,I){return p.call(r,S,C,P,function(M){y(M)&&(M=null),I&&I.apply(this,arguments)})}}function i(p){return p&&function(S,C,P){try{return p.call(r,S,C,P)}catch(I){if(!y(I))throw I}}}function m(p){return p&&function(S,C,P){typeof C=="function"&&(P=C,C=null);function I(M,R){R&&(R.uid<0&&(R.uid+=4294967296),R.gid<0&&(R.gid+=4294967296)),P&&P.apply(this,arguments)}return C?p.call(r,S,C,I):p.call(r,S,I)}}function g(p){return p&&function(S,C){var P=C?p.call(r,S,C):p.call(r,S);return P&&(P.uid<0&&(P.uid+=4294967296),P.gid<0&&(P.gid+=4294967296)),P}}function y(p){if(!p||p.code==="ENOSYS")return!0;var S=!process.getuid||process.getuid()!==0;return!!(S&&(p.code==="EINVAL"||p.code==="EPERM"))}}return Kr}var Jr,Ra;function oc(){if(Ra)return Jr;Ra=1;var t=hr.Stream;Jr=d;function d(h){return{ReadStream:u,WriteStream:f};function u(l,r){if(!(this instanceof u))return new u(l,r);t.call(this);var c=this;this.path=l,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,r=r||{};for(var a=Object.keys(r),s=0,n=a.length;s<n;s++){var o=a[s];this[o]=r[o]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){c._read()});return}h.open(this.path,this.flags,this.mode,function(i,m){if(i){c.emit("error",i),c.readable=!1;return}c.fd=m,c.emit("open",m),c._read()})}function f(l,r){if(!(this instanceof f))return new f(l,r);t.call(this),this.path=l,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,r=r||{};for(var c=Object.keys(r),a=0,s=c.length;a<s;a++){var n=c[a];this[n]=r[n]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=h.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}return Jr}var Qr,Ca;function sc(){if(Ca)return Qr;Ca=1,Qr=d;var t=Object.getPrototypeOf||function(h){return h.__proto__};function d(h){if(h===null||typeof h!="object")return h;if(h instanceof Object)var u={__proto__:t(h)};else var u=Object.create(null);return Object.getOwnPropertyNames(h).forEach(function(f){Object.defineProperty(u,f,Object.getOwnPropertyDescriptor(h,f))}),u}return Qr}var Rr,ba;function We(){if(ba)return Rr;ba=1;var t=Ke,d=ac(),h=oc(),u=sc(),f=Ji,l,r;typeof Symbol=="function"&&typeof Symbol.for=="function"?(l=Symbol.for("graceful-fs.queue"),r=Symbol.for("graceful-fs.previous")):(l="___graceful-fs.queue",r="___graceful-fs.previous");function c(){}function a(p,S){Object.defineProperty(p,l,{get:function(){return S}})}var s=c;if(f.debuglog?s=f.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(s=function(){var p=f.format.apply(f,arguments);p="GFS4: "+p.split(/\n/).join(`
GFS4: `),console.error(p)}),!t[l]){var n=et[l]||[];a(t,n),t.close=(function(p){function S(C,P){return p.call(t,C,function(I){I||g(),typeof P=="function"&&P.apply(this,arguments)})}return Object.defineProperty(S,r,{value:p}),S})(t.close),t.closeSync=(function(p){function S(C){p.apply(t,arguments),g()}return Object.defineProperty(S,r,{value:p}),S})(t.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){s(t[l]),Rl.equal(t[l].length,0)})}et[l]||a(et,t[l]),Rr=o(u(t)),process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!t.__patched&&(Rr=o(t),t.__patched=!0);function o(p){d(p),p.gracefulify=o,p.createReadStream=ce,p.createWriteStream=ue;var S=p.readFile;p.readFile=C;function C(K,Ee,A){return typeof Ee=="function"&&(A=Ee,Ee=null),v(K,Ee,A);function v(H,N,le,me){return S(H,N,function(pe){pe&&(pe.code==="EMFILE"||pe.code==="ENFILE")?i([v,[H,N,le],pe,me||Date.now(),Date.now()]):typeof le=="function"&&le.apply(this,arguments)})}}var P=p.writeFile;p.writeFile=I;function I(K,Ee,A,v){return typeof A=="function"&&(v=A,A=null),H(K,Ee,A,v);function H(N,le,me,pe,_e){return P(N,le,me,function(ye){ye&&(ye.code==="EMFILE"||ye.code==="ENFILE")?i([H,[N,le,me,pe],ye,_e||Date.now(),Date.now()]):typeof pe=="function"&&pe.apply(this,arguments)})}}var M=p.appendFile;M&&(p.appendFile=R);function R(K,Ee,A,v){return typeof A=="function"&&(v=A,A=null),H(K,Ee,A,v);function H(N,le,me,pe,_e){return M(N,le,me,function(ye){ye&&(ye.code==="EMFILE"||ye.code==="ENFILE")?i([H,[N,le,me,pe],ye,_e||Date.now(),Date.now()]):typeof pe=="function"&&pe.apply(this,arguments)})}}var w=p.copyFile;w&&(p.copyFile=T);function T(K,Ee,A,v){return typeof A=="function"&&(v=A,A=0),H(K,Ee,A,v);function H(N,le,me,pe,_e){return w(N,le,me,function(ye){ye&&(ye.code==="EMFILE"||ye.code==="ENFILE")?i([H,[N,le,me,pe],ye,_e||Date.now(),Date.now()]):typeof pe=="function"&&pe.apply(this,arguments)})}}var E=p.readdir;p.readdir=L;var q=/^v[0-5]\./;function L(K,Ee,A){typeof Ee=="function"&&(A=Ee,Ee=null);var v=q.test(process.version)?function(le,me,pe,_e){return E(le,H(le,me,pe,_e))}:function(le,me,pe,_e){return E(le,me,H(le,me,pe,_e))};return v(K,Ee,A);function H(N,le,me,pe){return function(_e,ye){_e&&(_e.code==="EMFILE"||_e.code==="ENFILE")?i([v,[N,le,me],_e,pe||Date.now(),Date.now()]):(ye&&ye.sort&&ye.sort(),typeof me=="function"&&me.call(this,_e,ye))}}}if(process.version.substr(0,4)==="v0.8"){var x=h(p);$=x.ReadStream,W=x.WriteStream}var k=p.ReadStream;k&&($.prototype=Object.create(k.prototype),$.prototype.open=J);var D=p.WriteStream;D&&(W.prototype=Object.create(D.prototype),W.prototype.open=ne),Object.defineProperty(p,"ReadStream",{get:function(){return $},set:function(K){$=K},enumerable:!0,configurable:!0}),Object.defineProperty(p,"WriteStream",{get:function(){return W},set:function(K){W=K},enumerable:!0,configurable:!0});var O=$;Object.defineProperty(p,"FileReadStream",{get:function(){return O},set:function(K){O=K},enumerable:!0,configurable:!0});var F=W;Object.defineProperty(p,"FileWriteStream",{get:function(){return F},set:function(K){F=K},enumerable:!0,configurable:!0});function $(K,Ee){return this instanceof $?(k.apply(this,arguments),this):$.apply(Object.create($.prototype),arguments)}function J(){var K=this;Ae(K.path,K.flags,K.mode,function(Ee,A){Ee?(K.autoClose&&K.destroy(),K.emit("error",Ee)):(K.fd=A,K.emit("open",A),K.read())})}function W(K,Ee){return this instanceof W?(D.apply(this,arguments),this):W.apply(Object.create(W.prototype),arguments)}function ne(){var K=this;Ae(K.path,K.flags,K.mode,function(Ee,A){Ee?(K.destroy(),K.emit("error",Ee)):(K.fd=A,K.emit("open",A))})}function ce(K,Ee){return new p.ReadStream(K,Ee)}function ue(K,Ee){return new p.WriteStream(K,Ee)}var ie=p.open;p.open=Ae;function Ae(K,Ee,A,v){return typeof A=="function"&&(v=A,A=null),H(K,Ee,A,v);function H(N,le,me,pe,_e){return ie(N,le,me,function(ye,xe){ye&&(ye.code==="EMFILE"||ye.code==="ENFILE")?i([H,[N,le,me,pe],ye,_e||Date.now(),Date.now()]):typeof pe=="function"&&pe.apply(this,arguments)})}}return p}function i(p){s("ENQUEUE",p[0].name,p[1]),t[l].push(p),y()}var m;function g(){for(var p=Date.now(),S=0;S<t[l].length;++S)t[l][S].length>2&&(t[l][S][3]=p,t[l][S][4]=p);y()}function y(){if(clearTimeout(m),m=void 0,t[l].length!==0){var p=t[l].shift(),S=p[0],C=p[1],P=p[2],I=p[3],M=p[4];if(I===void 0)s("RETRY",S.name,C),S.apply(null,C);else if(Date.now()-I>=6e4){s("TIMEOUT",S.name,C);var R=C.pop();typeof R=="function"&&R.call(null,P)}else{var w=Date.now()-M,T=Math.max(M-I,1),E=Math.min(T*1.2,100);w>=E?(s("RETRY",S.name,C),S.apply(null,C.concat([I]))):t[l].push(p)}m===void 0&&(m=setTimeout(y,0))}}return Rr}var Pa;function Ut(){return Pa||(Pa=1,(function(t){const d=Ye().fromCallback,h=We(),u=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(f=>typeof h[f]=="function");Object.assign(t,h),u.forEach(f=>{t[f]=d(h[f])}),t.exists=function(f,l){return typeof l=="function"?h.exists(f,l):new Promise(r=>h.exists(f,r))},t.read=function(f,l,r,c,a,s){return typeof s=="function"?h.read(f,l,r,c,a,s):new Promise((n,o)=>{h.read(f,l,r,c,a,(i,m,g)=>{if(i)return o(i);n({bytesRead:m,buffer:g})})})},t.write=function(f,l,...r){return typeof r[r.length-1]=="function"?h.write(f,l,...r):new Promise((c,a)=>{h.write(f,l,...r,(s,n,o)=>{if(s)return a(s);c({bytesWritten:n,buffer:o})})})},typeof h.writev=="function"&&(t.writev=function(f,l,...r){return typeof r[r.length-1]=="function"?h.writev(f,l,...r):new Promise((c,a)=>{h.writev(f,l,...r,(s,n,o)=>{if(s)return a(s);c({bytesWritten:n,buffers:o})})})}),typeof h.realpath.native=="function"?t.realpath.native=d(h.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")})(Xr)),Xr}var Cr={},Zr={},Ia;function lc(){if(Ia)return Zr;Ia=1;const t=Ie;return Zr.checkPath=function(h){if(process.platform==="win32"&&/[<>:"|?*]/.test(h.replace(t.parse(h).root,""))){const f=new Error(`Path contains invalid characters: ${h}`);throw f.code="EINVAL",f}},Zr}var Oa;function uc(){if(Oa)return Cr;Oa=1;const t=Ut(),{checkPath:d}=lc(),h=u=>{const f={mode:511};return typeof u=="number"?u:{...f,...u}.mode};return Cr.makeDir=async(u,f)=>(d(u),t.mkdir(u,{mode:h(f),recursive:!0})),Cr.makeDirSync=(u,f)=>(d(u),t.mkdirSync(u,{mode:h(f),recursive:!0})),Cr}var en,Da;function it(){if(Da)return en;Da=1;const t=Ye().fromPromise,{makeDir:d,makeDirSync:h}=uc(),u=t(d);return en={mkdirs:u,mkdirsSync:h,mkdirp:u,mkdirpSync:h,ensureDir:u,ensureDirSync:h},en}var tn,Na;function Ct(){if(Na)return tn;Na=1;const t=Ye().fromPromise,d=Ut();function h(u){return d.access(u).then(()=>!0).catch(()=>!1)}return tn={pathExists:t(h),pathExistsSync:d.existsSync},tn}var rn,Fa;function Il(){if(Fa)return rn;Fa=1;const t=We();function d(u,f,l,r){t.open(u,"r+",(c,a)=>{if(c)return r(c);t.futimes(a,f,l,s=>{t.close(a,n=>{r&&r(s||n)})})})}function h(u,f,l){const r=t.openSync(u,"r+");return t.futimesSync(r,f,l),t.closeSync(r)}return rn={utimesMillis:d,utimesMillisSync:h},rn}var nn,xa;function $t(){if(xa)return nn;xa=1;const t=Ut(),d=Ie,h=Ji;function u(i,m,g){const y=g.dereference?p=>t.stat(p,{bigint:!0}):p=>t.lstat(p,{bigint:!0});return Promise.all([y(i),y(m).catch(p=>{if(p.code==="ENOENT")return null;throw p})]).then(([p,S])=>({srcStat:p,destStat:S}))}function f(i,m,g){let y;const p=g.dereference?C=>t.statSync(C,{bigint:!0}):C=>t.lstatSync(C,{bigint:!0}),S=p(i);try{y=p(m)}catch(C){if(C.code==="ENOENT")return{srcStat:S,destStat:null};throw C}return{srcStat:S,destStat:y}}function l(i,m,g,y,p){h.callbackify(u)(i,m,y,(S,C)=>{if(S)return p(S);const{srcStat:P,destStat:I}=C;if(I){if(s(P,I)){const M=d.basename(i),R=d.basename(m);return g==="move"&&M!==R&&M.toLowerCase()===R.toLowerCase()?p(null,{srcStat:P,destStat:I,isChangingCase:!0}):p(new Error("Source and destination must not be the same."))}if(P.isDirectory()&&!I.isDirectory())return p(new Error(`Cannot overwrite non-directory '${m}' with directory '${i}'.`));if(!P.isDirectory()&&I.isDirectory())return p(new Error(`Cannot overwrite directory '${m}' with non-directory '${i}'.`))}return P.isDirectory()&&n(i,m)?p(new Error(o(i,m,g))):p(null,{srcStat:P,destStat:I})})}function r(i,m,g,y){const{srcStat:p,destStat:S}=f(i,m,y);if(S){if(s(p,S)){const C=d.basename(i),P=d.basename(m);if(g==="move"&&C!==P&&C.toLowerCase()===P.toLowerCase())return{srcStat:p,destStat:S,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(p.isDirectory()&&!S.isDirectory())throw new Error(`Cannot overwrite non-directory '${m}' with directory '${i}'.`);if(!p.isDirectory()&&S.isDirectory())throw new Error(`Cannot overwrite directory '${m}' with non-directory '${i}'.`)}if(p.isDirectory()&&n(i,m))throw new Error(o(i,m,g));return{srcStat:p,destStat:S}}function c(i,m,g,y,p){const S=d.resolve(d.dirname(i)),C=d.resolve(d.dirname(g));if(C===S||C===d.parse(C).root)return p();t.stat(C,{bigint:!0},(P,I)=>P?P.code==="ENOENT"?p():p(P):s(m,I)?p(new Error(o(i,g,y))):c(i,m,C,y,p))}function a(i,m,g,y){const p=d.resolve(d.dirname(i)),S=d.resolve(d.dirname(g));if(S===p||S===d.parse(S).root)return;let C;try{C=t.statSync(S,{bigint:!0})}catch(P){if(P.code==="ENOENT")return;throw P}if(s(m,C))throw new Error(o(i,g,y));return a(i,m,S,y)}function s(i,m){return m.ino&&m.dev&&m.ino===i.ino&&m.dev===i.dev}function n(i,m){const g=d.resolve(i).split(d.sep).filter(p=>p),y=d.resolve(m).split(d.sep).filter(p=>p);return g.reduce((p,S,C)=>p&&y[C]===S,!0)}function o(i,m,g){return`Cannot ${g} '${i}' to a subdirectory of itself, '${m}'.`}return nn={checkPaths:l,checkPathsSync:r,checkParentPaths:c,checkParentPathsSync:a,isSrcSubdir:n,areIdentical:s},nn}var an,La;function cc(){if(La)return an;La=1;const t=We(),d=Ie,h=it().mkdirs,u=Ct().pathExists,f=Il().utimesMillis,l=$t();function r(L,x,k,D){typeof k=="function"&&!D?(D=k,k={}):typeof k=="function"&&(k={filter:k}),D=D||function(){},k=k||{},k.clobber="clobber"in k?!!k.clobber:!0,k.overwrite="overwrite"in k?!!k.overwrite:k.clobber,k.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0001"),l.checkPaths(L,x,"copy",k,(O,F)=>{if(O)return D(O);const{srcStat:$,destStat:J}=F;l.checkParentPaths(L,$,x,"copy",W=>W?D(W):k.filter?a(c,J,L,x,k,D):c(J,L,x,k,D))})}function c(L,x,k,D,O){const F=d.dirname(k);u(F,($,J)=>{if($)return O($);if(J)return n(L,x,k,D,O);h(F,W=>W?O(W):n(L,x,k,D,O))})}function a(L,x,k,D,O,F){Promise.resolve(O.filter(k,D)).then($=>$?L(x,k,D,O,F):F(),$=>F($))}function s(L,x,k,D,O){return D.filter?a(n,L,x,k,D,O):n(L,x,k,D,O)}function n(L,x,k,D,O){(D.dereference?t.stat:t.lstat)(x,($,J)=>$?O($):J.isDirectory()?I(J,L,x,k,D,O):J.isFile()||J.isCharacterDevice()||J.isBlockDevice()?o(J,L,x,k,D,O):J.isSymbolicLink()?E(L,x,k,D,O):J.isSocket()?O(new Error(`Cannot copy a socket file: ${x}`)):J.isFIFO()?O(new Error(`Cannot copy a FIFO pipe: ${x}`)):O(new Error(`Unknown file: ${x}`)))}function o(L,x,k,D,O,F){return x?i(L,k,D,O,F):m(L,k,D,O,F)}function i(L,x,k,D,O){if(D.overwrite)t.unlink(k,F=>F?O(F):m(L,x,k,D,O));else return D.errorOnExist?O(new Error(`'${k}' already exists`)):O()}function m(L,x,k,D,O){t.copyFile(x,k,F=>F?O(F):D.preserveTimestamps?g(L.mode,x,k,O):C(k,L.mode,O))}function g(L,x,k,D){return y(L)?p(k,L,O=>O?D(O):S(L,x,k,D)):S(L,x,k,D)}function y(L){return(L&128)===0}function p(L,x,k){return C(L,x|128,k)}function S(L,x,k,D){P(x,k,O=>O?D(O):C(k,L,D))}function C(L,x,k){return t.chmod(L,x,k)}function P(L,x,k){t.stat(L,(D,O)=>D?k(D):f(x,O.atime,O.mtime,k))}function I(L,x,k,D,O,F){return x?R(k,D,O,F):M(L.mode,k,D,O,F)}function M(L,x,k,D,O){t.mkdir(k,F=>{if(F)return O(F);R(x,k,D,$=>$?O($):C(k,L,O))})}function R(L,x,k,D){t.readdir(L,(O,F)=>O?D(O):w(F,L,x,k,D))}function w(L,x,k,D,O){const F=L.pop();return F?T(L,F,x,k,D,O):O()}function T(L,x,k,D,O,F){const $=d.join(k,x),J=d.join(D,x);l.checkPaths($,J,"copy",O,(W,ne)=>{if(W)return F(W);const{destStat:ce}=ne;s(ce,$,J,O,ue=>ue?F(ue):w(L,k,D,O,F))})}function E(L,x,k,D,O){t.readlink(x,(F,$)=>{if(F)return O(F);if(D.dereference&&($=d.resolve(process.cwd(),$)),L)t.readlink(k,(J,W)=>J?J.code==="EINVAL"||J.code==="UNKNOWN"?t.symlink($,k,O):O(J):(D.dereference&&(W=d.resolve(process.cwd(),W)),l.isSrcSubdir($,W)?O(new Error(`Cannot copy '${$}' to a subdirectory of itself, '${W}'.`)):L.isDirectory()&&l.isSrcSubdir(W,$)?O(new Error(`Cannot overwrite '${W}' with '${$}'.`)):q($,k,O)));else return t.symlink($,k,O)})}function q(L,x,k){t.unlink(x,D=>D?k(D):t.symlink(L,x,k))}return an=r,an}var on,Ua;function fc(){if(Ua)return on;Ua=1;const t=We(),d=Ie,h=it().mkdirsSync,u=Il().utimesMillisSync,f=$t();function l(w,T,E){typeof E=="function"&&(E={filter:E}),E=E||{},E.clobber="clobber"in E?!!E.clobber:!0,E.overwrite="overwrite"in E?!!E.overwrite:E.clobber,E.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0002");const{srcStat:q,destStat:L}=f.checkPathsSync(w,T,"copy",E);return f.checkParentPathsSync(w,q,T,"copy"),r(L,w,T,E)}function r(w,T,E,q){if(q.filter&&!q.filter(T,E))return;const L=d.dirname(E);return t.existsSync(L)||h(L),a(w,T,E,q)}function c(w,T,E,q){if(!(q.filter&&!q.filter(T,E)))return a(w,T,E,q)}function a(w,T,E,q){const x=(q.dereference?t.statSync:t.lstatSync)(T);if(x.isDirectory())return S(x,w,T,E,q);if(x.isFile()||x.isCharacterDevice()||x.isBlockDevice())return s(x,w,T,E,q);if(x.isSymbolicLink())return M(w,T,E,q);throw x.isSocket()?new Error(`Cannot copy a socket file: ${T}`):x.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${T}`):new Error(`Unknown file: ${T}`)}function s(w,T,E,q,L){return T?n(w,E,q,L):o(w,E,q,L)}function n(w,T,E,q){if(q.overwrite)return t.unlinkSync(E),o(w,T,E,q);if(q.errorOnExist)throw new Error(`'${E}' already exists`)}function o(w,T,E,q){return t.copyFileSync(T,E),q.preserveTimestamps&&i(w.mode,T,E),y(E,w.mode)}function i(w,T,E){return m(w)&&g(E,w),p(T,E)}function m(w){return(w&128)===0}function g(w,T){return y(w,T|128)}function y(w,T){return t.chmodSync(w,T)}function p(w,T){const E=t.statSync(w);return u(T,E.atime,E.mtime)}function S(w,T,E,q,L){return T?P(E,q,L):C(w.mode,E,q,L)}function C(w,T,E,q){return t.mkdirSync(E),P(T,E,q),y(E,w)}function P(w,T,E){t.readdirSync(w).forEach(q=>I(q,w,T,E))}function I(w,T,E,q){const L=d.join(T,w),x=d.join(E,w),{destStat:k}=f.checkPathsSync(L,x,"copy",q);return c(k,L,x,q)}function M(w,T,E,q){let L=t.readlinkSync(T);if(q.dereference&&(L=d.resolve(process.cwd(),L)),w){let x;try{x=t.readlinkSync(E)}catch(k){if(k.code==="EINVAL"||k.code==="UNKNOWN")return t.symlinkSync(L,E);throw k}if(q.dereference&&(x=d.resolve(process.cwd(),x)),f.isSrcSubdir(L,x))throw new Error(`Cannot copy '${L}' to a subdirectory of itself, '${x}'.`);if(t.statSync(E).isDirectory()&&f.isSrcSubdir(x,L))throw new Error(`Cannot overwrite '${x}' with '${L}'.`);return R(L,E)}else return t.symlinkSync(L,E)}function R(w,T){return t.unlinkSync(T),t.symlinkSync(w,T)}return on=l,on}var sn,$a;function Qi(){if($a)return sn;$a=1;const t=Ye().fromCallback;return sn={copy:t(cc()),copySync:fc()},sn}var ln,ka;function dc(){if(ka)return ln;ka=1;const t=We(),d=Ie,h=Rl,u=process.platform==="win32";function f(g){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(p=>{g[p]=g[p]||t[p],p=p+"Sync",g[p]=g[p]||t[p]}),g.maxBusyTries=g.maxBusyTries||3}function l(g,y,p){let S=0;typeof y=="function"&&(p=y,y={}),h(g,"rimraf: missing path"),h.strictEqual(typeof g,"string","rimraf: path should be a string"),h.strictEqual(typeof p,"function","rimraf: callback function required"),h(y,"rimraf: invalid options argument provided"),h.strictEqual(typeof y,"object","rimraf: options should be object"),f(y),r(g,y,function C(P){if(P){if((P.code==="EBUSY"||P.code==="ENOTEMPTY"||P.code==="EPERM")&&S<y.maxBusyTries){S++;const I=S*100;return setTimeout(()=>r(g,y,C),I)}P.code==="ENOENT"&&(P=null)}p(P)})}function r(g,y,p){h(g),h(y),h(typeof p=="function"),y.lstat(g,(S,C)=>{if(S&&S.code==="ENOENT")return p(null);if(S&&S.code==="EPERM"&&u)return c(g,y,S,p);if(C&&C.isDirectory())return s(g,y,S,p);y.unlink(g,P=>{if(P){if(P.code==="ENOENT")return p(null);if(P.code==="EPERM")return u?c(g,y,P,p):s(g,y,P,p);if(P.code==="EISDIR")return s(g,y,P,p)}return p(P)})})}function c(g,y,p,S){h(g),h(y),h(typeof S=="function"),y.chmod(g,438,C=>{C?S(C.code==="ENOENT"?null:p):y.stat(g,(P,I)=>{P?S(P.code==="ENOENT"?null:p):I.isDirectory()?s(g,y,p,S):y.unlink(g,S)})})}function a(g,y,p){let S;h(g),h(y);try{y.chmodSync(g,438)}catch(C){if(C.code==="ENOENT")return;throw p}try{S=y.statSync(g)}catch(C){if(C.code==="ENOENT")return;throw p}S.isDirectory()?i(g,y,p):y.unlinkSync(g)}function s(g,y,p,S){h(g),h(y),h(typeof S=="function"),y.rmdir(g,C=>{C&&(C.code==="ENOTEMPTY"||C.code==="EEXIST"||C.code==="EPERM")?n(g,y,S):C&&C.code==="ENOTDIR"?S(p):S(C)})}function n(g,y,p){h(g),h(y),h(typeof p=="function"),y.readdir(g,(S,C)=>{if(S)return p(S);let P=C.length,I;if(P===0)return y.rmdir(g,p);C.forEach(M=>{l(d.join(g,M),y,R=>{if(!I){if(R)return p(I=R);--P===0&&y.rmdir(g,p)}})})})}function o(g,y){let p;y=y||{},f(y),h(g,"rimraf: missing path"),h.strictEqual(typeof g,"string","rimraf: path should be a string"),h(y,"rimraf: missing options"),h.strictEqual(typeof y,"object","rimraf: options should be object");try{p=y.lstatSync(g)}catch(S){if(S.code==="ENOENT")return;S.code==="EPERM"&&u&&a(g,y,S)}try{p&&p.isDirectory()?i(g,y,null):y.unlinkSync(g)}catch(S){if(S.code==="ENOENT")return;if(S.code==="EPERM")return u?a(g,y,S):i(g,y,S);if(S.code!=="EISDIR")throw S;i(g,y,S)}}function i(g,y,p){h(g),h(y);try{y.rmdirSync(g)}catch(S){if(S.code==="ENOTDIR")throw p;if(S.code==="ENOTEMPTY"||S.code==="EEXIST"||S.code==="EPERM")m(g,y);else if(S.code!=="ENOENT")throw S}}function m(g,y){if(h(g),h(y),y.readdirSync(g).forEach(p=>o(d.join(g,p),y)),u){const p=Date.now();do try{return y.rmdirSync(g,y)}catch{}while(Date.now()-p<500)}else return y.rmdirSync(g,y)}return ln=l,l.sync=o,ln}var un,qa;function Mr(){if(qa)return un;qa=1;const t=We(),d=Ye().fromCallback,h=dc();function u(l,r){if(t.rm)return t.rm(l,{recursive:!0,force:!0},r);h(l,r)}function f(l){if(t.rmSync)return t.rmSync(l,{recursive:!0,force:!0});h.sync(l)}return un={remove:d(u),removeSync:f},un}var cn,Ma;function hc(){if(Ma)return cn;Ma=1;const t=Ye().fromPromise,d=Ut(),h=Ie,u=it(),f=Mr(),l=t(async function(a){let s;try{s=await d.readdir(a)}catch{return u.mkdirs(a)}return Promise.all(s.map(n=>f.remove(h.join(a,n))))});function r(c){let a;try{a=d.readdirSync(c)}catch{return u.mkdirsSync(c)}a.forEach(s=>{s=h.join(c,s),f.removeSync(s)})}return cn={emptyDirSync:r,emptydirSync:r,emptyDir:l,emptydir:l},cn}var fn,Ba;function pc(){if(Ba)return fn;Ba=1;const t=Ye().fromCallback,d=Ie,h=We(),u=it();function f(r,c){function a(){h.writeFile(r,"",s=>{if(s)return c(s);c()})}h.stat(r,(s,n)=>{if(!s&&n.isFile())return c();const o=d.dirname(r);h.stat(o,(i,m)=>{if(i)return i.code==="ENOENT"?u.mkdirs(o,g=>{if(g)return c(g);a()}):c(i);m.isDirectory()?a():h.readdir(o,g=>{if(g)return c(g)})})})}function l(r){let c;try{c=h.statSync(r)}catch{}if(c&&c.isFile())return;const a=d.dirname(r);try{h.statSync(a).isDirectory()||h.readdirSync(a)}catch(s){if(s&&s.code==="ENOENT")u.mkdirsSync(a);else throw s}h.writeFileSync(r,"")}return fn={createFile:t(f),createFileSync:l},fn}var dn,Ha;function mc(){if(Ha)return dn;Ha=1;const t=Ye().fromCallback,d=Ie,h=We(),u=it(),f=Ct().pathExists,{areIdentical:l}=$t();function r(a,s,n){function o(i,m){h.link(i,m,g=>{if(g)return n(g);n(null)})}h.lstat(s,(i,m)=>{h.lstat(a,(g,y)=>{if(g)return g.message=g.message.replace("lstat","ensureLink"),n(g);if(m&&l(y,m))return n(null);const p=d.dirname(s);f(p,(S,C)=>{if(S)return n(S);if(C)return o(a,s);u.mkdirs(p,P=>{if(P)return n(P);o(a,s)})})})})}function c(a,s){let n;try{n=h.lstatSync(s)}catch{}try{const m=h.lstatSync(a);if(n&&l(m,n))return}catch(m){throw m.message=m.message.replace("lstat","ensureLink"),m}const o=d.dirname(s);return h.existsSync(o)||u.mkdirsSync(o),h.linkSync(a,s)}return dn={createLink:t(r),createLinkSync:c},dn}var hn,ja;function gc(){if(ja)return hn;ja=1;const t=Ie,d=We(),h=Ct().pathExists;function u(l,r,c){if(t.isAbsolute(l))return d.lstat(l,a=>a?(a.message=a.message.replace("lstat","ensureSymlink"),c(a)):c(null,{toCwd:l,toDst:l}));{const a=t.dirname(r),s=t.join(a,l);return h(s,(n,o)=>n?c(n):o?c(null,{toCwd:s,toDst:l}):d.lstat(l,i=>i?(i.message=i.message.replace("lstat","ensureSymlink"),c(i)):c(null,{toCwd:l,toDst:t.relative(a,l)})))}}function f(l,r){let c;if(t.isAbsolute(l)){if(c=d.existsSync(l),!c)throw new Error("absolute srcpath does not exist");return{toCwd:l,toDst:l}}else{const a=t.dirname(r),s=t.join(a,l);if(c=d.existsSync(s),c)return{toCwd:s,toDst:l};if(c=d.existsSync(l),!c)throw new Error("relative srcpath does not exist");return{toCwd:l,toDst:t.relative(a,l)}}}return hn={symlinkPaths:u,symlinkPathsSync:f},hn}var pn,Ga;function vc(){if(Ga)return pn;Ga=1;const t=We();function d(u,f,l){if(l=typeof f=="function"?f:l,f=typeof f=="function"?!1:f,f)return l(null,f);t.lstat(u,(r,c)=>{if(r)return l(null,"file");f=c&&c.isDirectory()?"dir":"file",l(null,f)})}function h(u,f){let l;if(f)return f;try{l=t.lstatSync(u)}catch{return"file"}return l&&l.isDirectory()?"dir":"file"}return pn={symlinkType:d,symlinkTypeSync:h},pn}var mn,Wa;function Ec(){if(Wa)return mn;Wa=1;const t=Ye().fromCallback,d=Ie,h=Ut(),u=it(),f=u.mkdirs,l=u.mkdirsSync,r=gc(),c=r.symlinkPaths,a=r.symlinkPathsSync,s=vc(),n=s.symlinkType,o=s.symlinkTypeSync,i=Ct().pathExists,{areIdentical:m}=$t();function g(S,C,P,I){I=typeof P=="function"?P:I,P=typeof P=="function"?!1:P,h.lstat(C,(M,R)=>{!M&&R.isSymbolicLink()?Promise.all([h.stat(S),h.stat(C)]).then(([w,T])=>{if(m(w,T))return I(null);y(S,C,P,I)}):y(S,C,P,I)})}function y(S,C,P,I){c(S,C,(M,R)=>{if(M)return I(M);S=R.toDst,n(R.toCwd,P,(w,T)=>{if(w)return I(w);const E=d.dirname(C);i(E,(q,L)=>{if(q)return I(q);if(L)return h.symlink(S,C,T,I);f(E,x=>{if(x)return I(x);h.symlink(S,C,T,I)})})})})}function p(S,C,P){let I;try{I=h.lstatSync(C)}catch{}if(I&&I.isSymbolicLink()){const T=h.statSync(S),E=h.statSync(C);if(m(T,E))return}const M=a(S,C);S=M.toDst,P=o(M.toCwd,P);const R=d.dirname(C);return h.existsSync(R)||l(R),h.symlinkSync(S,C,P)}return mn={createSymlink:t(g),createSymlinkSync:p},mn}var gn,Va;function yc(){if(Va)return gn;Va=1;const{createFile:t,createFileSync:d}=pc(),{createLink:h,createLinkSync:u}=mc(),{createSymlink:f,createSymlinkSync:l}=Ec();return gn={createFile:t,createFileSync:d,ensureFile:t,ensureFileSync:d,createLink:h,createLinkSync:u,ensureLink:h,ensureLinkSync:u,createSymlink:f,createSymlinkSync:l,ensureSymlink:f,ensureSymlinkSync:l},gn}var vn,Ya;function Zi(){if(Ya)return vn;Ya=1;function t(h,{EOL:u=`
`,finalEOL:f=!0,replacer:l=null,spaces:r}={}){const c=f?u:"";return JSON.stringify(h,l,r).replace(/\n/g,u)+c}function d(h){return Buffer.isBuffer(h)&&(h=h.toString("utf8")),h.replace(/^\uFEFF/,"")}return vn={stringify:t,stripBom:d},vn}var En,za;function wc(){if(za)return En;za=1;let t;try{t=We()}catch{t=Ke}const d=Ye(),{stringify:h,stripBom:u}=Zi();async function f(n,o={}){typeof o=="string"&&(o={encoding:o});const i=o.fs||t,m="throws"in o?o.throws:!0;let g=await d.fromCallback(i.readFile)(n,o);g=u(g);let y;try{y=JSON.parse(g,o?o.reviver:null)}catch(p){if(m)throw p.message=`${n}: ${p.message}`,p;return null}return y}const l=d.fromPromise(f);function r(n,o={}){typeof o=="string"&&(o={encoding:o});const i=o.fs||t,m="throws"in o?o.throws:!0;try{let g=i.readFileSync(n,o);return g=u(g),JSON.parse(g,o.reviver)}catch(g){if(m)throw g.message=`${n}: ${g.message}`,g;return null}}async function c(n,o,i={}){const m=i.fs||t,g=h(o,i);await d.fromCallback(m.writeFile)(n,g,i)}const a=d.fromPromise(c);function s(n,o,i={}){const m=i.fs||t,g=h(o,i);return m.writeFileSync(n,g,i)}return En={readFile:l,readFileSync:r,writeFile:a,writeFileSync:s},En}var yn,Xa;function _c(){if(Xa)return yn;Xa=1;const t=wc();return yn={readJson:t.readFile,readJsonSync:t.readFileSync,writeJson:t.writeFile,writeJsonSync:t.writeFileSync},yn}var wn,Ka;function ea(){if(Ka)return wn;Ka=1;const t=Ye().fromCallback,d=We(),h=Ie,u=it(),f=Ct().pathExists;function l(c,a,s,n){typeof s=="function"&&(n=s,s="utf8");const o=h.dirname(c);f(o,(i,m)=>{if(i)return n(i);if(m)return d.writeFile(c,a,s,n);u.mkdirs(o,g=>{if(g)return n(g);d.writeFile(c,a,s,n)})})}function r(c,...a){const s=h.dirname(c);if(d.existsSync(s))return d.writeFileSync(c,...a);u.mkdirsSync(s),d.writeFileSync(c,...a)}return wn={outputFile:t(l),outputFileSync:r},wn}var _n,Ja;function Sc(){if(Ja)return _n;Ja=1;const{stringify:t}=Zi(),{outputFile:d}=ea();async function h(u,f,l={}){const r=t(f,l);await d(u,r,l)}return _n=h,_n}var Sn,Qa;function Ac(){if(Qa)return Sn;Qa=1;const{stringify:t}=Zi(),{outputFileSync:d}=ea();function h(u,f,l){const r=t(f,l);d(u,r,l)}return Sn=h,Sn}var An,Za;function Tc(){if(Za)return An;Za=1;const t=Ye().fromPromise,d=_c();return d.outputJson=t(Sc()),d.outputJsonSync=Ac(),d.outputJSON=d.outputJson,d.outputJSONSync=d.outputJsonSync,d.writeJSON=d.writeJson,d.writeJSONSync=d.writeJsonSync,d.readJSON=d.readJson,d.readJSONSync=d.readJsonSync,An=d,An}var Tn,eo;function Rc(){if(eo)return Tn;eo=1;const t=We(),d=Ie,h=Qi().copy,u=Mr().remove,f=it().mkdirp,l=Ct().pathExists,r=$t();function c(i,m,g,y){typeof g=="function"&&(y=g,g={}),g=g||{};const p=g.overwrite||g.clobber||!1;r.checkPaths(i,m,"move",g,(S,C)=>{if(S)return y(S);const{srcStat:P,isChangingCase:I=!1}=C;r.checkParentPaths(i,P,m,"move",M=>{if(M)return y(M);if(a(m))return s(i,m,p,I,y);f(d.dirname(m),R=>R?y(R):s(i,m,p,I,y))})})}function a(i){const m=d.dirname(i);return d.parse(m).root===m}function s(i,m,g,y,p){if(y)return n(i,m,g,p);if(g)return u(m,S=>S?p(S):n(i,m,g,p));l(m,(S,C)=>S?p(S):C?p(new Error("dest already exists.")):n(i,m,g,p))}function n(i,m,g,y){t.rename(i,m,p=>p?p.code!=="EXDEV"?y(p):o(i,m,g,y):y())}function o(i,m,g,y){h(i,m,{overwrite:g,errorOnExist:!0},S=>S?y(S):u(i,y))}return Tn=c,Tn}var Rn,to;function Cc(){if(to)return Rn;to=1;const t=We(),d=Ie,h=Qi().copySync,u=Mr().removeSync,f=it().mkdirpSync,l=$t();function r(o,i,m){m=m||{};const g=m.overwrite||m.clobber||!1,{srcStat:y,isChangingCase:p=!1}=l.checkPathsSync(o,i,"move",m);return l.checkParentPathsSync(o,y,i,"move"),c(i)||f(d.dirname(i)),a(o,i,g,p)}function c(o){const i=d.dirname(o);return d.parse(i).root===i}function a(o,i,m,g){if(g)return s(o,i,m);if(m)return u(i),s(o,i,m);if(t.existsSync(i))throw new Error("dest already exists.");return s(o,i,m)}function s(o,i,m){try{t.renameSync(o,i)}catch(g){if(g.code!=="EXDEV")throw g;return n(o,i,m)}}function n(o,i,m){return h(o,i,{overwrite:m,errorOnExist:!0}),u(o)}return Rn=r,Rn}var Cn,ro;function bc(){if(ro)return Cn;ro=1;const t=Ye().fromCallback;return Cn={move:t(Rc()),moveSync:Cc()},Cn}var bn,no;function pt(){return no||(no=1,bn={...Ut(),...Qi(),...hc(),...yc(),...Tc(),...it(),...bc(),...ea(),...Ct(),...Mr()}),bn}var Ht={},St={},Pn={},At={},io;function ta(){if(io)return At;io=1,Object.defineProperty(At,"__esModule",{value:!0}),At.CancellationError=At.CancellationToken=void 0;const t=Cl;let d=class extends t.EventEmitter{get cancelled(){return this._cancelled||this._parent!=null&&this._parent.cancelled}set parent(f){this.removeParentCancelHandler(),this._parent=f,this.parentCancelHandler=()=>this.cancel(),this._parent.onCancel(this.parentCancelHandler)}constructor(f){super(),this.parentCancelHandler=null,this._parent=null,this._cancelled=!1,f!=null&&(this.parent=f)}cancel(){this._cancelled=!0,this.emit("cancel")}onCancel(f){this.cancelled?f():this.once("cancel",f)}createPromise(f){if(this.cancelled)return Promise.reject(new h);const l=()=>{if(r!=null)try{this.removeListener("cancel",r),r=null}catch{}};let r=null;return new Promise((c,a)=>{let s=null;if(r=()=>{try{s!=null&&(s(),s=null)}finally{a(new h)}},this.cancelled){r();return}this.onCancel(r),f(c,a,n=>{s=n})}).then(c=>(l(),c)).catch(c=>{throw l(),c})}removeParentCancelHandler(){const f=this._parent;f!=null&&this.parentCancelHandler!=null&&(f.removeListener("cancel",this.parentCancelHandler),this.parentCancelHandler=null)}dispose(){try{this.removeParentCancelHandler()}finally{this.removeAllListeners(),this._parent=null}}};At.CancellationToken=d;class h extends Error{constructor(){super("cancelled")}}return At.CancellationError=h,At}var br={},ao;function Br(){if(ao)return br;ao=1,Object.defineProperty(br,"__esModule",{value:!0}),br.newError=t;function t(d,h){const u=new Error(d);return u.code=h,u}return br}var Be={},Pr={exports:{}},Ir={exports:{}},In,oo;function Pc(){if(oo)return In;oo=1;var t=1e3,d=t*60,h=d*60,u=h*24,f=u*7,l=u*365.25;In=function(n,o){o=o||{};var i=typeof n;if(i==="string"&&n.length>0)return r(n);if(i==="number"&&isFinite(n))return o.long?a(n):c(n);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(n))};function r(n){if(n=String(n),!(n.length>100)){var o=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(n);if(o){var i=parseFloat(o[1]),m=(o[2]||"ms").toLowerCase();switch(m){case"years":case"year":case"yrs":case"yr":case"y":return i*l;case"weeks":case"week":case"w":return i*f;case"days":case"day":case"d":return i*u;case"hours":case"hour":case"hrs":case"hr":case"h":return i*h;case"minutes":case"minute":case"mins":case"min":case"m":return i*d;case"seconds":case"second":case"secs":case"sec":case"s":return i*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:return}}}}function c(n){var o=Math.abs(n);return o>=u?Math.round(n/u)+"d":o>=h?Math.round(n/h)+"h":o>=d?Math.round(n/d)+"m":o>=t?Math.round(n/t)+"s":n+"ms"}function a(n){var o=Math.abs(n);return o>=u?s(n,o,u,"day"):o>=h?s(n,o,h,"hour"):o>=d?s(n,o,d,"minute"):o>=t?s(n,o,t,"second"):n+" ms"}function s(n,o,i,m){var g=o>=i*1.5;return Math.round(n/i)+" "+m+(g?"s":"")}return In}var On,so;function Ol(){if(so)return On;so=1;function t(d){u.debug=u,u.default=u,u.coerce=s,u.disable=c,u.enable=l,u.enabled=a,u.humanize=Pc(),u.destroy=n,Object.keys(d).forEach(o=>{u[o]=d[o]}),u.names=[],u.skips=[],u.formatters={};function h(o){let i=0;for(let m=0;m<o.length;m++)i=(i<<5)-i+o.charCodeAt(m),i|=0;return u.colors[Math.abs(i)%u.colors.length]}u.selectColor=h;function u(o){let i,m=null,g,y;function p(...S){if(!p.enabled)return;const C=p,P=Number(new Date),I=P-(i||P);C.diff=I,C.prev=i,C.curr=P,i=P,S[0]=u.coerce(S[0]),typeof S[0]!="string"&&S.unshift("%O");let M=0;S[0]=S[0].replace(/%([a-zA-Z%])/g,(w,T)=>{if(w==="%%")return"%";M++;const E=u.formatters[T];if(typeof E=="function"){const q=S[M];w=E.call(C,q),S.splice(M,1),M--}return w}),u.formatArgs.call(C,S),(C.log||u.log).apply(C,S)}return p.namespace=o,p.useColors=u.useColors(),p.color=u.selectColor(o),p.extend=f,p.destroy=u.destroy,Object.defineProperty(p,"enabled",{enumerable:!0,configurable:!1,get:()=>m!==null?m:(g!==u.namespaces&&(g=u.namespaces,y=u.enabled(o)),y),set:S=>{m=S}}),typeof u.init=="function"&&u.init(p),p}function f(o,i){const m=u(this.namespace+(typeof i>"u"?":":i)+o);return m.log=this.log,m}function l(o){u.save(o),u.namespaces=o,u.names=[],u.skips=[];const i=(typeof o=="string"?o:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const m of i)m[0]==="-"?u.skips.push(m.slice(1)):u.names.push(m)}function r(o,i){let m=0,g=0,y=-1,p=0;for(;m<o.length;)if(g<i.length&&(i[g]===o[m]||i[g]==="*"))i[g]==="*"?(y=g,p=m,g++):(m++,g++);else if(y!==-1)g=y+1,p++,m=p;else return!1;for(;g<i.length&&i[g]==="*";)g++;return g===i.length}function c(){const o=[...u.names,...u.skips.map(i=>"-"+i)].join(",");return u.enable(""),o}function a(o){for(const i of u.skips)if(r(o,i))return!1;for(const i of u.names)if(r(o,i))return!0;return!1}function s(o){return o instanceof Error?o.stack||o.message:o}function n(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return u.enable(u.load()),u}return On=t,On}var lo;function Ic(){return lo||(lo=1,(function(t,d){d.formatArgs=u,d.save=f,d.load=l,d.useColors=h,d.storage=r(),d.destroy=(()=>{let a=!1;return()=>{a||(a=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),d.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function h(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let a;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(a=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(a[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function u(a){if(a[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+a[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const s="color: "+this.color;a.splice(1,0,s,"color: inherit");let n=0,o=0;a[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(n++,i==="%c"&&(o=n))}),a.splice(o,0,s)}d.log=console.debug||console.log||(()=>{});function f(a){try{a?d.storage.setItem("debug",a):d.storage.removeItem("debug")}catch{}}function l(){let a;try{a=d.storage.getItem("debug")||d.storage.getItem("DEBUG")}catch{}return!a&&typeof process<"u"&&"env"in process&&(a=process.env.DEBUG),a}function r(){try{return localStorage}catch{}}t.exports=Ol()(d);const{formatters:c}=t.exports;c.j=function(a){try{return JSON.stringify(a)}catch(s){return"[UnexpectedJSONParseError]: "+s.message}}})(Ir,Ir.exports)),Ir.exports}var Or={exports:{}},Dn,uo;function Oc(){return uo||(uo=1,Dn=(t,d=process.argv)=>{const h=t.startsWith("-")?"":t.length===1?"-":"--",u=d.indexOf(h+t),f=d.indexOf("--");return u!==-1&&(f===-1||u<f)}),Dn}var Nn,co;function Dc(){if(co)return Nn;co=1;const t=qr,d=bl,h=Oc(),{env:u}=process;let f;h("no-color")||h("no-colors")||h("color=false")||h("color=never")?f=0:(h("color")||h("colors")||h("color=true")||h("color=always"))&&(f=1),"FORCE_COLOR"in u&&(u.FORCE_COLOR==="true"?f=1:u.FORCE_COLOR==="false"?f=0:f=u.FORCE_COLOR.length===0?1:Math.min(parseInt(u.FORCE_COLOR,10),3));function l(a){return a===0?!1:{level:a,hasBasic:!0,has256:a>=2,has16m:a>=3}}function r(a,s){if(f===0)return 0;if(h("color=16m")||h("color=full")||h("color=truecolor"))return 3;if(h("color=256"))return 2;if(a&&!s&&f===void 0)return 0;const n=f||0;if(u.TERM==="dumb")return n;if(process.platform==="win32"){const o=t.release().split(".");return Number(o[0])>=10&&Number(o[2])>=10586?Number(o[2])>=14931?3:2:1}if("CI"in u)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(o=>o in u)||u.CI_NAME==="codeship"?1:n;if("TEAMCITY_VERSION"in u)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(u.TEAMCITY_VERSION)?1:0;if(u.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in u){const o=parseInt((u.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(u.TERM_PROGRAM){case"iTerm.app":return o>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(u.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(u.TERM)||"COLORTERM"in u?1:n}function c(a){const s=r(a,a&&a.isTTY);return l(s)}return Nn={supportsColor:c,stdout:l(r(!0,d.isatty(1))),stderr:l(r(!0,d.isatty(2)))},Nn}var fo;function Nc(){return fo||(fo=1,(function(t,d){const h=bl,u=Ji;d.init=n,d.log=c,d.formatArgs=l,d.save=a,d.load=s,d.useColors=f,d.destroy=u.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),d.colors=[6,2,3,4,5,1];try{const i=Dc();i&&(i.stderr||i).level>=2&&(d.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}d.inspectOpts=Object.keys(process.env).filter(i=>/^debug_/i.test(i)).reduce((i,m)=>{const g=m.substring(6).toLowerCase().replace(/_([a-z])/g,(p,S)=>S.toUpperCase());let y=process.env[m];return/^(yes|on|true|enabled)$/i.test(y)?y=!0:/^(no|off|false|disabled)$/i.test(y)?y=!1:y==="null"?y=null:y=Number(y),i[g]=y,i},{});function f(){return"colors"in d.inspectOpts?!!d.inspectOpts.colors:h.isatty(process.stderr.fd)}function l(i){const{namespace:m,useColors:g}=this;if(g){const y=this.color,p="\x1B[3"+(y<8?y:"8;5;"+y),S=`  ${p};1m${m} \x1B[0m`;i[0]=S+i[0].split(`
`).join(`
`+S),i.push(p+"m+"+t.exports.humanize(this.diff)+"\x1B[0m")}else i[0]=r()+m+" "+i[0]}function r(){return d.inspectOpts.hideDate?"":new Date().toISOString()+" "}function c(...i){return process.stderr.write(u.formatWithOptions(d.inspectOpts,...i)+`
`)}function a(i){i?process.env.DEBUG=i:delete process.env.DEBUG}function s(){return process.env.DEBUG}function n(i){i.inspectOpts={};const m=Object.keys(d.inspectOpts);for(let g=0;g<m.length;g++)i.inspectOpts[m[g]]=d.inspectOpts[m[g]]}t.exports=Ol()(d);const{formatters:o}=t.exports;o.o=function(i){return this.inspectOpts.colors=this.useColors,u.inspect(i,this.inspectOpts).split(`
`).map(m=>m.trim()).join(" ")},o.O=function(i){return this.inspectOpts.colors=this.useColors,u.inspect(i,this.inspectOpts)}})(Or,Or.exports)),Or.exports}var ho;function Fc(){return ho||(ho=1,typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?Pr.exports=Ic():Pr.exports=Nc()),Pr.exports}var jt={},po;function Dl(){if(po)return jt;po=1,Object.defineProperty(jt,"__esModule",{value:!0}),jt.ProgressCallbackTransform=void 0;const t=hr;let d=class extends t.Transform{constructor(u,f,l){super(),this.total=u,this.cancellationToken=f,this.onProgress=l,this.start=Date.now(),this.transferred=0,this.delta=0,this.nextUpdate=this.start+1e3}_transform(u,f,l){if(this.cancellationToken.cancelled){l(new Error("cancelled"),null);return}this.transferred+=u.length,this.delta+=u.length;const r=Date.now();r>=this.nextUpdate&&this.transferred!==this.total&&(this.nextUpdate=r+1e3,this.onProgress({total:this.total,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.total*100,bytesPerSecond:Math.round(this.transferred/((r-this.start)/1e3))}),this.delta=0),l(null,u)}_flush(u){if(this.cancellationToken.cancelled){u(new Error("cancelled"));return}this.onProgress({total:this.total,delta:this.delta,transferred:this.total,percent:100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))}),this.delta=0,u(null)}};return jt.ProgressCallbackTransform=d,jt}var mo;function xc(){if(mo)return Be;mo=1,Object.defineProperty(Be,"__esModule",{value:!0}),Be.DigestTransform=Be.HttpExecutor=Be.HttpError=void 0,Be.createHttpError=s,Be.parseJson=i,Be.configureRequestOptionsFromUrl=g,Be.configureRequestUrl=y,Be.safeGetHeader=C,Be.configureRequestOptions=I,Be.safeStringifyJson=M;const t=pr,d=Fc(),h=Ke,u=hr,f=Lt,l=ta(),r=Br(),c=Dl(),a=(0,d.default)("electron-builder");function s(R,w=null){return new o(R.statusCode||-1,`${R.statusCode} ${R.statusMessage}`+(w==null?"":`
`+JSON.stringify(w,null,"  "))+`
Headers: `+M(R.headers),w)}const n=new Map([[429,"Too many requests"],[400,"Bad request"],[403,"Forbidden"],[404,"Not found"],[405,"Method not allowed"],[406,"Not acceptable"],[408,"Request timeout"],[413,"Request entity too large"],[500,"Internal server error"],[502,"Bad gateway"],[503,"Service unavailable"],[504,"Gateway timeout"],[505,"HTTP version not supported"]]);class o extends Error{constructor(w,T=`HTTP error: ${n.get(w)||w}`,E=null){super(T),this.statusCode=w,this.description=E,this.name="HttpError",this.code=`HTTP_ERROR_${w}`}isServerError(){return this.statusCode>=500&&this.statusCode<=599}}Be.HttpError=o;function i(R){return R.then(w=>w==null||w.length===0?null:JSON.parse(w))}class m{constructor(){this.maxRedirects=10}request(w,T=new l.CancellationToken,E){I(w);const q=E==null?void 0:JSON.stringify(E),L=q?Buffer.from(q):void 0;if(L!=null){a(q);const{headers:x,...k}=w;w={method:"post",headers:{"Content-Type":"application/json","Content-Length":L.length,...x},...k}}return this.doApiRequest(w,T,x=>x.end(L))}doApiRequest(w,T,E,q=0){return a.enabled&&a(`Request: ${M(w)}`),T.createPromise((L,x,k)=>{const D=this.createRequest(w,O=>{try{this.handleResponse(O,w,T,L,x,q,E)}catch(F){x(F)}});this.addErrorAndTimeoutHandlers(D,x,w.timeout),this.addRedirectHandlers(D,w,x,q,O=>{this.doApiRequest(O,T,E,q).then(L).catch(x)}),E(D,x),k(()=>D.abort())})}addRedirectHandlers(w,T,E,q,L){}addErrorAndTimeoutHandlers(w,T,E=60*1e3){this.addTimeOutHandler(w,T,E),w.on("error",T),w.on("aborted",()=>{T(new Error("Request has been aborted by the server"))})}handleResponse(w,T,E,q,L,x,k){var D;if(a.enabled&&a(`Response: ${w.statusCode} ${w.statusMessage}, request options: ${M(T)}`),w.statusCode===404){L(s(w,`method: ${T.method||"GET"} url: ${T.protocol||"https:"}//${T.hostname}${T.port?`:${T.port}`:""}${T.path}

Please double check that your authentication token is correct. Due to security reasons, actual status maybe not reported, but 404.
`));return}else if(w.statusCode===204){q();return}const O=(D=w.statusCode)!==null&&D!==void 0?D:0,F=O>=300&&O<400,$=C(w,"location");if(F&&$!=null){if(x>this.maxRedirects){L(this.createMaxRedirectError());return}this.doApiRequest(m.prepareRedirectUrlOptions($,T),E,k,x).then(q).catch(L);return}w.setEncoding("utf8");let J="";w.on("error",L),w.on("data",W=>J+=W),w.on("end",()=>{try{if(w.statusCode!=null&&w.statusCode>=400){const W=C(w,"content-type"),ne=W!=null&&(Array.isArray(W)?W.find(ce=>ce.includes("json"))!=null:W.includes("json"));L(s(w,`method: ${T.method||"GET"} url: ${T.protocol||"https:"}//${T.hostname}${T.port?`:${T.port}`:""}${T.path}

          Data:
          ${ne?JSON.stringify(JSON.parse(J)):J}
          `))}else q(J.length===0?null:J)}catch(W){L(W)}})}async downloadToBuffer(w,T){return await T.cancellationToken.createPromise((E,q,L)=>{const x=[],k={headers:T.headers||void 0,redirect:"manual"};y(w,k),I(k),this.doDownload(k,{destination:null,options:T,onCancel:L,callback:D=>{D==null?E(Buffer.concat(x)):q(D)},responseHandler:(D,O)=>{let F=0;D.on("data",$=>{if(F+=$.length,F>524288e3){O(new Error("Maximum allowed size is 500 MB"));return}x.push($)}),D.on("end",()=>{O(null)})}},0)})}doDownload(w,T,E){const q=this.createRequest(w,L=>{if(L.statusCode>=400){T.callback(new Error(`Cannot download "${w.protocol||"https:"}//${w.hostname}${w.path}", status ${L.statusCode}: ${L.statusMessage}`));return}L.on("error",T.callback);const x=C(L,"location");if(x!=null){E<this.maxRedirects?this.doDownload(m.prepareRedirectUrlOptions(x,w),T,E++):T.callback(this.createMaxRedirectError());return}T.responseHandler==null?P(T,L):T.responseHandler(L,T.callback)});this.addErrorAndTimeoutHandlers(q,T.callback,w.timeout),this.addRedirectHandlers(q,w,T.callback,E,L=>{this.doDownload(L,T,E++)}),q.end()}createMaxRedirectError(){return new Error(`Too many redirects (> ${this.maxRedirects})`)}addTimeOutHandler(w,T,E){w.on("socket",q=>{q.setTimeout(E,()=>{w.abort(),T(new Error("Request timed out"))})})}static prepareRedirectUrlOptions(w,T){const E=g(w,{...T}),q=E.headers;if(q?.authorization){const L=new f.URL(w);(L.hostname.endsWith(".amazonaws.com")||L.searchParams.has("X-Amz-Credential"))&&delete q.authorization}return E}static retryOnServerError(w,T=3){for(let E=0;;E++)try{return w()}catch(q){if(E<T&&(q instanceof o&&q.isServerError()||q.code==="EPIPE"))continue;throw q}}}Be.HttpExecutor=m;function g(R,w){const T=I(w);return y(new f.URL(R),T),T}function y(R,w){w.protocol=R.protocol,w.hostname=R.hostname,R.port?w.port=R.port:w.port&&delete w.port,w.path=R.pathname+R.search}class p extends u.Transform{get actual(){return this._actual}constructor(w,T="sha512",E="base64"){super(),this.expected=w,this.algorithm=T,this.encoding=E,this._actual=null,this.isValidateOnEnd=!0,this.digester=(0,t.createHash)(T)}_transform(w,T,E){this.digester.update(w),E(null,w)}_flush(w){if(this._actual=this.digester.digest(this.encoding),this.isValidateOnEnd)try{this.validate()}catch(T){w(T);return}w(null)}validate(){if(this._actual==null)throw(0,r.newError)("Not finished yet","ERR_STREAM_NOT_FINISHED");if(this._actual!==this.expected)throw(0,r.newError)(`${this.algorithm} checksum mismatch, expected ${this.expected}, got ${this._actual}`,"ERR_CHECKSUM_MISMATCH");return null}}Be.DigestTransform=p;function S(R,w,T){return R!=null&&w!=null&&R!==w?(T(new Error(`checksum mismatch: expected ${w} but got ${R} (X-Checksum-Sha2 header)`)),!1):!0}function C(R,w){const T=R.headers[w];return T==null?null:Array.isArray(T)?T.length===0?null:T[T.length-1]:T}function P(R,w){if(!S(C(w,"X-Checksum-Sha2"),R.options.sha2,R.callback))return;const T=[];if(R.options.onProgress!=null){const x=C(w,"content-length");x!=null&&T.push(new c.ProgressCallbackTransform(parseInt(x,10),R.options.cancellationToken,R.options.onProgress))}const E=R.options.sha512;E!=null?T.push(new p(E,"sha512",E.length===128&&!E.includes("+")&&!E.includes("Z")&&!E.includes("=")?"hex":"base64")):R.options.sha2!=null&&T.push(new p(R.options.sha2,"sha256","hex"));const q=(0,h.createWriteStream)(R.destination);T.push(q);let L=w;for(const x of T)x.on("error",k=>{q.close(),R.options.cancellationToken.cancelled||R.callback(k)}),L=L.pipe(x);q.on("finish",()=>{q.close(R.callback)})}function I(R,w,T){T!=null&&(R.method=T),R.headers={...R.headers};const E=R.headers;return w!=null&&(E.authorization=w.startsWith("Basic")||w.startsWith("Bearer")?w:`token ${w}`),E["User-Agent"]==null&&(E["User-Agent"]="electron-builder"),(T==null||T==="GET"||E["Cache-Control"]==null)&&(E["Cache-Control"]="no-cache"),R.protocol==null&&process.versions.electron!=null&&(R.protocol="https:"),R}function M(R,w){return JSON.stringify(R,(T,E)=>T.endsWith("Authorization")||T.endsWith("authorization")||T.endsWith("Password")||T.endsWith("PASSWORD")||T.endsWith("Token")||T.includes("password")||T.includes("token")||w!=null&&w.has(T)?"<stripped sensitive data>":E,2)}return Be}var Gt={},go;function Lc(){if(go)return Gt;go=1,Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.MemoLazy=void 0;let t=class{constructor(u,f){this.selector=u,this.creator=f,this.selected=void 0,this._value=void 0}get hasValue(){return this._value!==void 0}get value(){const u=this.selector();if(this._value!==void 0&&d(this.selected,u))return this._value;this.selected=u;const f=this.creator(u);return this.value=f,f}set value(u){this._value=u}};Gt.MemoLazy=t;function d(h,u){if(typeof h=="object"&&h!==null&&(typeof u=="object"&&u!==null)){const r=Object.keys(h),c=Object.keys(u);return r.length===c.length&&r.every(a=>d(h[a],u[a]))}return h===u}return Gt}var Wt={},vo;function Uc(){if(vo)return Wt;vo=1,Object.defineProperty(Wt,"__esModule",{value:!0}),Wt.githubUrl=t,Wt.getS3LikeProviderBaseUrl=d;function t(l,r="github.com"){return`${l.protocol||"https"}://${l.host||r}`}function d(l){const r=l.provider;if(r==="s3")return h(l);if(r==="spaces")return f(l);throw new Error(`Not supported provider: ${r}`)}function h(l){let r;if(l.accelerate==!0)r=`https://${l.bucket}.s3-accelerate.amazonaws.com`;else if(l.endpoint!=null)r=`${l.endpoint}/${l.bucket}`;else if(l.bucket.includes(".")){if(l.region==null)throw new Error(`Bucket name "${l.bucket}" includes a dot, but S3 region is missing`);l.region==="us-east-1"?r=`https://s3.amazonaws.com/${l.bucket}`:r=`https://s3-${l.region}.amazonaws.com/${l.bucket}`}else l.region==="cn-north-1"?r=`https://${l.bucket}.s3.${l.region}.amazonaws.com.cn`:r=`https://${l.bucket}.s3.amazonaws.com`;return u(r,l.path)}function u(l,r){return r!=null&&r.length>0&&(r.startsWith("/")||(l+="/"),l+=r),l}function f(l){if(l.name==null)throw new Error("name is missing");if(l.region==null)throw new Error("region is missing");return u(`https://${l.name}.${l.region}.digitaloceanspaces.com`,l.path)}return Wt}var Dr={},Eo;function $c(){if(Eo)return Dr;Eo=1,Object.defineProperty(Dr,"__esModule",{value:!0}),Dr.retry=d;const t=ta();async function d(h,u,f,l=0,r=0,c){var a;const s=new t.CancellationToken;try{return await h()}catch(n){if((!((a=c?.(n))!==null&&a!==void 0)||a)&&u>0&&!s.cancelled)return await new Promise(o=>setTimeout(o,f+l*r)),await d(h,u-1,f,l,r+1,c);throw n}}return Dr}var Nr={},yo;function kc(){if(yo)return Nr;yo=1,Object.defineProperty(Nr,"__esModule",{value:!0}),Nr.parseDn=t;function t(d){let h=!1,u=null,f="",l=0;d=d.trim();const r=new Map;for(let c=0;c<=d.length;c++){if(c===d.length){u!==null&&r.set(u,f);break}const a=d[c];if(h){if(a==='"'){h=!1;continue}}else{if(a==='"'){h=!0;continue}if(a==="\\"){c++;const s=parseInt(d.slice(c,c+2),16);Number.isNaN(s)?f+=d[c]:(c++,f+=String.fromCharCode(s));continue}if(u===null&&a==="="){u=f,f="";continue}if(a===","||a===";"||a==="+"){u!==null&&r.set(u,f),u=null,f="";continue}}if(a===" "&&!h){if(f.length===0)continue;if(c>l){let s=c;for(;d[s]===" ";)s++;l=s}if(l>=d.length||d[l]===","||d[l]===";"||u===null&&d[l]==="="||u!==null&&d[l]==="+"){c=l-1;continue}}f+=a}return r}return Nr}var Tt={},wo;function qc(){if(wo)return Tt;wo=1,Object.defineProperty(Tt,"__esModule",{value:!0}),Tt.nil=Tt.UUID=void 0;const t=pr,d=Br(),h="options.name must be either a string or a Buffer",u=(0,t.randomBytes)(16);u[0]=u[0]|1;const f={},l=[];for(let o=0;o<256;o++){const i=(o+256).toString(16).substr(1);f[i]=o,l[o]=i}class r{constructor(i){this.ascii=null,this.binary=null;const m=r.check(i);if(!m)throw new Error("not a UUID");this.version=m.version,m.format==="ascii"?this.ascii=i:this.binary=i}static v5(i,m){return s(i,"sha1",80,m)}toString(){return this.ascii==null&&(this.ascii=n(this.binary)),this.ascii}inspect(){return`UUID v${this.version} ${this.toString()}`}static check(i,m=0){if(typeof i=="string")return i=i.toLowerCase(),/^[a-f0-9]{8}(-[a-f0-9]{4}){3}-([a-f0-9]{12})$/.test(i)?i==="00000000-0000-0000-0000-000000000000"?{version:void 0,variant:"nil",format:"ascii"}:{version:(f[i[14]+i[15]]&240)>>4,variant:c((f[i[19]+i[20]]&224)>>5),format:"ascii"}:!1;if(Buffer.isBuffer(i)){if(i.length<m+16)return!1;let g=0;for(;g<16&&i[m+g]===0;g++);return g===16?{version:void 0,variant:"nil",format:"binary"}:{version:(i[m+6]&240)>>4,variant:c((i[m+8]&224)>>5),format:"binary"}}throw(0,d.newError)("Unknown type of uuid","ERR_UNKNOWN_UUID_TYPE")}static parse(i){const m=Buffer.allocUnsafe(16);let g=0;for(let y=0;y<16;y++)m[y]=f[i[g++]+i[g++]],(y===3||y===5||y===7||y===9)&&(g+=1);return m}}Tt.UUID=r,r.OID=r.parse("6ba7b812-9dad-11d1-80b4-00c04fd430c8");function c(o){switch(o){case 0:case 1:case 3:return"ncs";case 4:case 5:return"rfc4122";case 6:return"microsoft";default:return"future"}}var a;(function(o){o[o.ASCII=0]="ASCII",o[o.BINARY=1]="BINARY",o[o.OBJECT=2]="OBJECT"})(a||(a={}));function s(o,i,m,g,y=a.ASCII){const p=(0,t.createHash)(i);if(typeof o!="string"&&!Buffer.isBuffer(o))throw(0,d.newError)(h,"ERR_INVALID_UUID_NAME");p.update(g),p.update(o);const C=p.digest();let P;switch(y){case a.BINARY:C[6]=C[6]&15|m,C[8]=C[8]&63|128,P=C;break;case a.OBJECT:C[6]=C[6]&15|m,C[8]=C[8]&63|128,P=new r(C);break;default:P=l[C[0]]+l[C[1]]+l[C[2]]+l[C[3]]+"-"+l[C[4]]+l[C[5]]+"-"+l[C[6]&15|m]+l[C[7]]+"-"+l[C[8]&63|128]+l[C[9]]+"-"+l[C[10]]+l[C[11]]+l[C[12]]+l[C[13]]+l[C[14]]+l[C[15]];break}return P}function n(o){return l[o[0]]+l[o[1]]+l[o[2]]+l[o[3]]+"-"+l[o[4]]+l[o[5]]+"-"+l[o[6]]+l[o[7]]+"-"+l[o[8]]+l[o[9]]+"-"+l[o[10]]+l[o[11]]+l[o[12]]+l[o[13]]+l[o[14]]+l[o[15]]}return Tt.nil=new r("00000000-0000-0000-0000-000000000000"),Tt}var Dt={},Fn={},_o;function Mc(){return _o||(_o=1,(function(t){(function(d){d.parser=function(A,v){return new u(A,v)},d.SAXParser=u,d.SAXStream=n,d.createStream=s,d.MAX_BUFFER_LENGTH=64*1024;var h=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];d.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function u(A,v){if(!(this instanceof u))return new u(A,v);var H=this;l(H),H.q=H.c="",H.bufferCheckPosition=d.MAX_BUFFER_LENGTH,H.opt=v||{},H.opt.lowercase=H.opt.lowercase||H.opt.lowercasetags,H.looseCase=H.opt.lowercase?"toLowerCase":"toUpperCase",H.tags=[],H.closed=H.closedRoot=H.sawRoot=!1,H.tag=H.error=null,H.strict=!!A,H.noscript=!!(A||H.opt.noscript),H.state=E.BEGIN,H.strictEntities=H.opt.strictEntities,H.ENTITIES=H.strictEntities?Object.create(d.XML_ENTITIES):Object.create(d.ENTITIES),H.attribList=[],H.opt.xmlns&&(H.ns=Object.create(y)),H.opt.unquotedAttributeValues===void 0&&(H.opt.unquotedAttributeValues=!A),H.trackPosition=H.opt.position!==!1,H.trackPosition&&(H.position=H.line=H.column=0),L(H,"onready")}Object.create||(Object.create=function(A){function v(){}v.prototype=A;var H=new v;return H}),Object.keys||(Object.keys=function(A){var v=[];for(var H in A)A.hasOwnProperty(H)&&v.push(H);return v});function f(A){for(var v=Math.max(d.MAX_BUFFER_LENGTH,10),H=0,N=0,le=h.length;N<le;N++){var me=A[h[N]].length;if(me>v)switch(h[N]){case"textNode":k(A);break;case"cdata":x(A,"oncdata",A.cdata),A.cdata="";break;case"script":x(A,"onscript",A.script),A.script="";break;default:O(A,"Max buffer length exceeded: "+h[N])}H=Math.max(H,me)}var pe=d.MAX_BUFFER_LENGTH-H;A.bufferCheckPosition=pe+A.position}function l(A){for(var v=0,H=h.length;v<H;v++)A[h[v]]=""}function r(A){k(A),A.cdata!==""&&(x(A,"oncdata",A.cdata),A.cdata=""),A.script!==""&&(x(A,"onscript",A.script),A.script="")}u.prototype={end:function(){F(this)},write:Ee,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){r(this)}};var c;try{c=require("stream").Stream}catch{c=function(){}}c||(c=function(){});var a=d.EVENTS.filter(function(A){return A!=="error"&&A!=="end"});function s(A,v){return new n(A,v)}function n(A,v){if(!(this instanceof n))return new n(A,v);c.apply(this),this._parser=new u(A,v),this.writable=!0,this.readable=!0;var H=this;this._parser.onend=function(){H.emit("end")},this._parser.onerror=function(N){H.emit("error",N),H._parser.error=null},this._decoder=null,a.forEach(function(N){Object.defineProperty(H,"on"+N,{get:function(){return H._parser["on"+N]},set:function(le){if(!le)return H.removeAllListeners(N),H._parser["on"+N]=le,le;H.on(N,le)},enumerable:!0,configurable:!1})})}n.prototype=Object.create(c.prototype,{constructor:{value:n}}),n.prototype.write=function(A){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(A)){if(!this._decoder){var v=nc.StringDecoder;this._decoder=new v("utf8")}A=this._decoder.write(A)}return this._parser.write(A.toString()),this.emit("data",A),!0},n.prototype.end=function(A){return A&&A.length&&this.write(A),this._parser.end(),!0},n.prototype.on=function(A,v){var H=this;return!H._parser["on"+A]&&a.indexOf(A)!==-1&&(H._parser["on"+A]=function(){var N=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);N.splice(0,0,A),H.emit.apply(H,N)}),c.prototype.on.call(H,A,v)};var o="[CDATA[",i="DOCTYPE",m="http://www.w3.org/XML/1998/namespace",g="http://www.w3.org/2000/xmlns/",y={xml:m,xmlns:g},p=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,S=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,C=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,P=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function I(A){return A===" "||A===`
`||A==="\r"||A==="	"}function M(A){return A==='"'||A==="'"}function R(A){return A===">"||I(A)}function w(A,v){return A.test(v)}function T(A,v){return!w(A,v)}var E=0;d.STATE={BEGIN:E++,BEGIN_WHITESPACE:E++,TEXT:E++,TEXT_ENTITY:E++,OPEN_WAKA:E++,SGML_DECL:E++,SGML_DECL_QUOTED:E++,DOCTYPE:E++,DOCTYPE_QUOTED:E++,DOCTYPE_DTD:E++,DOCTYPE_DTD_QUOTED:E++,COMMENT_STARTING:E++,COMMENT:E++,COMMENT_ENDING:E++,COMMENT_ENDED:E++,CDATA:E++,CDATA_ENDING:E++,CDATA_ENDING_2:E++,PROC_INST:E++,PROC_INST_BODY:E++,PROC_INST_ENDING:E++,OPEN_TAG:E++,OPEN_TAG_SLASH:E++,ATTRIB:E++,ATTRIB_NAME:E++,ATTRIB_NAME_SAW_WHITE:E++,ATTRIB_VALUE:E++,ATTRIB_VALUE_QUOTED:E++,ATTRIB_VALUE_CLOSED:E++,ATTRIB_VALUE_UNQUOTED:E++,ATTRIB_VALUE_ENTITY_Q:E++,ATTRIB_VALUE_ENTITY_U:E++,CLOSE_TAG:E++,CLOSE_TAG_SAW_WHITE:E++,SCRIPT:E++,SCRIPT_ENDING:E++},d.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},d.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(d.ENTITIES).forEach(function(A){var v=d.ENTITIES[A],H=typeof v=="number"?String.fromCharCode(v):v;d.ENTITIES[A]=H});for(var q in d.STATE)d.STATE[d.STATE[q]]=q;E=d.STATE;function L(A,v,H){A[v]&&A[v](H)}function x(A,v,H){A.textNode&&k(A),L(A,v,H)}function k(A){A.textNode=D(A.opt,A.textNode),A.textNode&&L(A,"ontext",A.textNode),A.textNode=""}function D(A,v){return A.trim&&(v=v.trim()),A.normalize&&(v=v.replace(/\s+/g," ")),v}function O(A,v){return k(A),A.trackPosition&&(v+=`
Line: `+A.line+`
Column: `+A.column+`
Char: `+A.c),v=new Error(v),A.error=v,L(A,"onerror",v),A}function F(A){return A.sawRoot&&!A.closedRoot&&$(A,"Unclosed root tag"),A.state!==E.BEGIN&&A.state!==E.BEGIN_WHITESPACE&&A.state!==E.TEXT&&O(A,"Unexpected end"),k(A),A.c="",A.closed=!0,L(A,"onend"),u.call(A,A.strict,A.opt),A}function $(A,v){if(typeof A!="object"||!(A instanceof u))throw new Error("bad call to strictFail");A.strict&&O(A,v)}function J(A){A.strict||(A.tagName=A.tagName[A.looseCase]());var v=A.tags[A.tags.length-1]||A,H=A.tag={name:A.tagName,attributes:{}};A.opt.xmlns&&(H.ns=v.ns),A.attribList.length=0,x(A,"onopentagstart",H)}function W(A,v){var H=A.indexOf(":"),N=H<0?["",A]:A.split(":"),le=N[0],me=N[1];return v&&A==="xmlns"&&(le="xmlns",me=""),{prefix:le,local:me}}function ne(A){if(A.strict||(A.attribName=A.attribName[A.looseCase]()),A.attribList.indexOf(A.attribName)!==-1||A.tag.attributes.hasOwnProperty(A.attribName)){A.attribName=A.attribValue="";return}if(A.opt.xmlns){var v=W(A.attribName,!0),H=v.prefix,N=v.local;if(H==="xmlns")if(N==="xml"&&A.attribValue!==m)$(A,"xml: prefix must be bound to "+m+`
Actual: `+A.attribValue);else if(N==="xmlns"&&A.attribValue!==g)$(A,"xmlns: prefix must be bound to "+g+`
Actual: `+A.attribValue);else{var le=A.tag,me=A.tags[A.tags.length-1]||A;le.ns===me.ns&&(le.ns=Object.create(me.ns)),le.ns[N]=A.attribValue}A.attribList.push([A.attribName,A.attribValue])}else A.tag.attributes[A.attribName]=A.attribValue,x(A,"onattribute",{name:A.attribName,value:A.attribValue});A.attribName=A.attribValue=""}function ce(A,v){if(A.opt.xmlns){var H=A.tag,N=W(A.tagName);H.prefix=N.prefix,H.local=N.local,H.uri=H.ns[N.prefix]||"",H.prefix&&!H.uri&&($(A,"Unbound namespace prefix: "+JSON.stringify(A.tagName)),H.uri=N.prefix);var le=A.tags[A.tags.length-1]||A;H.ns&&le.ns!==H.ns&&Object.keys(H.ns).forEach(function(B){x(A,"onopennamespace",{prefix:B,uri:H.ns[B]})});for(var me=0,pe=A.attribList.length;me<pe;me++){var _e=A.attribList[me],ye=_e[0],xe=_e[1],be=W(ye,!0),qe=be.prefix,mt=be.local,at=qe===""?"":H.ns[qe]||"",e={name:ye,value:xe,prefix:qe,local:mt,uri:at};qe&&qe!=="xmlns"&&!at&&($(A,"Unbound namespace prefix: "+JSON.stringify(qe)),e.uri=qe),A.tag.attributes[ye]=e,x(A,"onattribute",e)}A.attribList.length=0}A.tag.isSelfClosing=!!v,A.sawRoot=!0,A.tags.push(A.tag),x(A,"onopentag",A.tag),v||(!A.noscript&&A.tagName.toLowerCase()==="script"?A.state=E.SCRIPT:A.state=E.TEXT,A.tag=null,A.tagName=""),A.attribName=A.attribValue="",A.attribList.length=0}function ue(A){if(!A.tagName){$(A,"Weird empty close tag."),A.textNode+="</>",A.state=E.TEXT;return}if(A.script){if(A.tagName!=="script"){A.script+="</"+A.tagName+">",A.tagName="",A.state=E.SCRIPT;return}x(A,"onscript",A.script),A.script=""}var v=A.tags.length,H=A.tagName;A.strict||(H=H[A.looseCase]());for(var N=H;v--;){var le=A.tags[v];if(le.name!==N)$(A,"Unexpected close tag");else break}if(v<0){$(A,"Unmatched closing tag: "+A.tagName),A.textNode+="</"+A.tagName+">",A.state=E.TEXT;return}A.tagName=H;for(var me=A.tags.length;me-- >v;){var pe=A.tag=A.tags.pop();A.tagName=A.tag.name,x(A,"onclosetag",A.tagName);var _e={};for(var ye in pe.ns)_e[ye]=pe.ns[ye];var xe=A.tags[A.tags.length-1]||A;A.opt.xmlns&&pe.ns!==xe.ns&&Object.keys(pe.ns).forEach(function(be){var qe=pe.ns[be];x(A,"onclosenamespace",{prefix:be,uri:qe})})}v===0&&(A.closedRoot=!0),A.tagName=A.attribValue=A.attribName="",A.attribList.length=0,A.state=E.TEXT}function ie(A){var v=A.entity,H=v.toLowerCase(),N,le="";return A.ENTITIES[v]?A.ENTITIES[v]:A.ENTITIES[H]?A.ENTITIES[H]:(v=H,v.charAt(0)==="#"&&(v.charAt(1)==="x"?(v=v.slice(2),N=parseInt(v,16),le=N.toString(16)):(v=v.slice(1),N=parseInt(v,10),le=N.toString(10))),v=v.replace(/^0+/,""),isNaN(N)||le.toLowerCase()!==v?($(A,"Invalid character entity"),"&"+A.entity+";"):String.fromCodePoint(N))}function Ae(A,v){v==="<"?(A.state=E.OPEN_WAKA,A.startTagPosition=A.position):I(v)||($(A,"Non-whitespace before first tag."),A.textNode=v,A.state=E.TEXT)}function K(A,v){var H="";return v<A.length&&(H=A.charAt(v)),H}function Ee(A){var v=this;if(this.error)throw this.error;if(v.closed)return O(v,"Cannot write after close. Assign an onready handler.");if(A===null)return F(v);typeof A=="object"&&(A=A.toString());for(var H=0,N="";N=K(A,H++),v.c=N,!!N;)switch(v.trackPosition&&(v.position++,N===`
`?(v.line++,v.column=0):v.column++),v.state){case E.BEGIN:if(v.state=E.BEGIN_WHITESPACE,N==="\uFEFF")continue;Ae(v,N);continue;case E.BEGIN_WHITESPACE:Ae(v,N);continue;case E.TEXT:if(v.sawRoot&&!v.closedRoot){for(var le=H-1;N&&N!=="<"&&N!=="&";)N=K(A,H++),N&&v.trackPosition&&(v.position++,N===`
`?(v.line++,v.column=0):v.column++);v.textNode+=A.substring(le,H-1)}N==="<"&&!(v.sawRoot&&v.closedRoot&&!v.strict)?(v.state=E.OPEN_WAKA,v.startTagPosition=v.position):(!I(N)&&(!v.sawRoot||v.closedRoot)&&$(v,"Text data outside of root node."),N==="&"?v.state=E.TEXT_ENTITY:v.textNode+=N);continue;case E.SCRIPT:N==="<"?v.state=E.SCRIPT_ENDING:v.script+=N;continue;case E.SCRIPT_ENDING:N==="/"?v.state=E.CLOSE_TAG:(v.script+="<"+N,v.state=E.SCRIPT);continue;case E.OPEN_WAKA:if(N==="!")v.state=E.SGML_DECL,v.sgmlDecl="";else if(!I(N))if(w(p,N))v.state=E.OPEN_TAG,v.tagName=N;else if(N==="/")v.state=E.CLOSE_TAG,v.tagName="";else if(N==="?")v.state=E.PROC_INST,v.procInstName=v.procInstBody="";else{if($(v,"Unencoded <"),v.startTagPosition+1<v.position){var me=v.position-v.startTagPosition;N=new Array(me).join(" ")+N}v.textNode+="<"+N,v.state=E.TEXT}continue;case E.SGML_DECL:if(v.sgmlDecl+N==="--"){v.state=E.COMMENT,v.comment="",v.sgmlDecl="";continue}v.doctype&&v.doctype!==!0&&v.sgmlDecl?(v.state=E.DOCTYPE_DTD,v.doctype+="<!"+v.sgmlDecl+N,v.sgmlDecl=""):(v.sgmlDecl+N).toUpperCase()===o?(x(v,"onopencdata"),v.state=E.CDATA,v.sgmlDecl="",v.cdata=""):(v.sgmlDecl+N).toUpperCase()===i?(v.state=E.DOCTYPE,(v.doctype||v.sawRoot)&&$(v,"Inappropriately located doctype declaration"),v.doctype="",v.sgmlDecl=""):N===">"?(x(v,"onsgmldeclaration",v.sgmlDecl),v.sgmlDecl="",v.state=E.TEXT):(M(N)&&(v.state=E.SGML_DECL_QUOTED),v.sgmlDecl+=N);continue;case E.SGML_DECL_QUOTED:N===v.q&&(v.state=E.SGML_DECL,v.q=""),v.sgmlDecl+=N;continue;case E.DOCTYPE:N===">"?(v.state=E.TEXT,x(v,"ondoctype",v.doctype),v.doctype=!0):(v.doctype+=N,N==="["?v.state=E.DOCTYPE_DTD:M(N)&&(v.state=E.DOCTYPE_QUOTED,v.q=N));continue;case E.DOCTYPE_QUOTED:v.doctype+=N,N===v.q&&(v.q="",v.state=E.DOCTYPE);continue;case E.DOCTYPE_DTD:N==="]"?(v.doctype+=N,v.state=E.DOCTYPE):N==="<"?(v.state=E.OPEN_WAKA,v.startTagPosition=v.position):M(N)?(v.doctype+=N,v.state=E.DOCTYPE_DTD_QUOTED,v.q=N):v.doctype+=N;continue;case E.DOCTYPE_DTD_QUOTED:v.doctype+=N,N===v.q&&(v.state=E.DOCTYPE_DTD,v.q="");continue;case E.COMMENT:N==="-"?v.state=E.COMMENT_ENDING:v.comment+=N;continue;case E.COMMENT_ENDING:N==="-"?(v.state=E.COMMENT_ENDED,v.comment=D(v.opt,v.comment),v.comment&&x(v,"oncomment",v.comment),v.comment=""):(v.comment+="-"+N,v.state=E.COMMENT);continue;case E.COMMENT_ENDED:N!==">"?($(v,"Malformed comment"),v.comment+="--"+N,v.state=E.COMMENT):v.doctype&&v.doctype!==!0?v.state=E.DOCTYPE_DTD:v.state=E.TEXT;continue;case E.CDATA:N==="]"?v.state=E.CDATA_ENDING:v.cdata+=N;continue;case E.CDATA_ENDING:N==="]"?v.state=E.CDATA_ENDING_2:(v.cdata+="]"+N,v.state=E.CDATA);continue;case E.CDATA_ENDING_2:N===">"?(v.cdata&&x(v,"oncdata",v.cdata),x(v,"onclosecdata"),v.cdata="",v.state=E.TEXT):N==="]"?v.cdata+="]":(v.cdata+="]]"+N,v.state=E.CDATA);continue;case E.PROC_INST:N==="?"?v.state=E.PROC_INST_ENDING:I(N)?v.state=E.PROC_INST_BODY:v.procInstName+=N;continue;case E.PROC_INST_BODY:if(!v.procInstBody&&I(N))continue;N==="?"?v.state=E.PROC_INST_ENDING:v.procInstBody+=N;continue;case E.PROC_INST_ENDING:N===">"?(x(v,"onprocessinginstruction",{name:v.procInstName,body:v.procInstBody}),v.procInstName=v.procInstBody="",v.state=E.TEXT):(v.procInstBody+="?"+N,v.state=E.PROC_INST_BODY);continue;case E.OPEN_TAG:w(S,N)?v.tagName+=N:(J(v),N===">"?ce(v):N==="/"?v.state=E.OPEN_TAG_SLASH:(I(N)||$(v,"Invalid character in tag name"),v.state=E.ATTRIB));continue;case E.OPEN_TAG_SLASH:N===">"?(ce(v,!0),ue(v)):($(v,"Forward-slash in opening tag not followed by >"),v.state=E.ATTRIB);continue;case E.ATTRIB:if(I(N))continue;N===">"?ce(v):N==="/"?v.state=E.OPEN_TAG_SLASH:w(p,N)?(v.attribName=N,v.attribValue="",v.state=E.ATTRIB_NAME):$(v,"Invalid attribute name");continue;case E.ATTRIB_NAME:N==="="?v.state=E.ATTRIB_VALUE:N===">"?($(v,"Attribute without value"),v.attribValue=v.attribName,ne(v),ce(v)):I(N)?v.state=E.ATTRIB_NAME_SAW_WHITE:w(S,N)?v.attribName+=N:$(v,"Invalid attribute name");continue;case E.ATTRIB_NAME_SAW_WHITE:if(N==="=")v.state=E.ATTRIB_VALUE;else{if(I(N))continue;$(v,"Attribute without value"),v.tag.attributes[v.attribName]="",v.attribValue="",x(v,"onattribute",{name:v.attribName,value:""}),v.attribName="",N===">"?ce(v):w(p,N)?(v.attribName=N,v.state=E.ATTRIB_NAME):($(v,"Invalid attribute name"),v.state=E.ATTRIB)}continue;case E.ATTRIB_VALUE:if(I(N))continue;M(N)?(v.q=N,v.state=E.ATTRIB_VALUE_QUOTED):(v.opt.unquotedAttributeValues||O(v,"Unquoted attribute value"),v.state=E.ATTRIB_VALUE_UNQUOTED,v.attribValue=N);continue;case E.ATTRIB_VALUE_QUOTED:if(N!==v.q){N==="&"?v.state=E.ATTRIB_VALUE_ENTITY_Q:v.attribValue+=N;continue}ne(v),v.q="",v.state=E.ATTRIB_VALUE_CLOSED;continue;case E.ATTRIB_VALUE_CLOSED:I(N)?v.state=E.ATTRIB:N===">"?ce(v):N==="/"?v.state=E.OPEN_TAG_SLASH:w(p,N)?($(v,"No whitespace between attributes"),v.attribName=N,v.attribValue="",v.state=E.ATTRIB_NAME):$(v,"Invalid attribute name");continue;case E.ATTRIB_VALUE_UNQUOTED:if(!R(N)){N==="&"?v.state=E.ATTRIB_VALUE_ENTITY_U:v.attribValue+=N;continue}ne(v),N===">"?ce(v):v.state=E.ATTRIB;continue;case E.CLOSE_TAG:if(v.tagName)N===">"?ue(v):w(S,N)?v.tagName+=N:v.script?(v.script+="</"+v.tagName,v.tagName="",v.state=E.SCRIPT):(I(N)||$(v,"Invalid tagname in closing tag"),v.state=E.CLOSE_TAG_SAW_WHITE);else{if(I(N))continue;T(p,N)?v.script?(v.script+="</"+N,v.state=E.SCRIPT):$(v,"Invalid tagname in closing tag."):v.tagName=N}continue;case E.CLOSE_TAG_SAW_WHITE:if(I(N))continue;N===">"?ue(v):$(v,"Invalid characters in closing tag");continue;case E.TEXT_ENTITY:case E.ATTRIB_VALUE_ENTITY_Q:case E.ATTRIB_VALUE_ENTITY_U:var pe,_e;switch(v.state){case E.TEXT_ENTITY:pe=E.TEXT,_e="textNode";break;case E.ATTRIB_VALUE_ENTITY_Q:pe=E.ATTRIB_VALUE_QUOTED,_e="attribValue";break;case E.ATTRIB_VALUE_ENTITY_U:pe=E.ATTRIB_VALUE_UNQUOTED,_e="attribValue";break}if(N===";"){var ye=ie(v);v.opt.unparsedEntities&&!Object.values(d.XML_ENTITIES).includes(ye)?(v.entity="",v.state=pe,v.write(ye)):(v[_e]+=ye,v.entity="",v.state=pe)}else w(v.entity.length?P:C,N)?v.entity+=N:($(v,"Invalid character in entity name"),v[_e]+="&"+v.entity+N,v.entity="",v.state=pe);continue;default:throw new Error(v,"Unknown state: "+v.state)}return v.position>=v.bufferCheckPosition&&f(v),v}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */String.fromCodePoint||(function(){var A=String.fromCharCode,v=Math.floor,H=function(){var N=16384,le=[],me,pe,_e=-1,ye=arguments.length;if(!ye)return"";for(var xe="";++_e<ye;){var be=Number(arguments[_e]);if(!isFinite(be)||be<0||be>1114111||v(be)!==be)throw RangeError("Invalid code point: "+be);be<=65535?le.push(be):(be-=65536,me=(be>>10)+55296,pe=be%1024+56320,le.push(me,pe)),(_e+1===ye||le.length>N)&&(xe+=A.apply(null,le),le.length=0)}return xe};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:H,configurable:!0,writable:!0}):String.fromCodePoint=H})()})(t)})(Fn)),Fn}var So;function Bc(){if(So)return Dt;So=1,Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.XElement=void 0,Dt.parseXml=r;const t=Mc(),d=Br();class h{constructor(a){if(this.name=a,this.value="",this.attributes=null,this.isCData=!1,this.elements=null,!a)throw(0,d.newError)("Element name cannot be empty","ERR_XML_ELEMENT_NAME_EMPTY");if(!f(a))throw(0,d.newError)(`Invalid element name: ${a}`,"ERR_XML_ELEMENT_INVALID_NAME")}attribute(a){const s=this.attributes===null?null:this.attributes[a];if(s==null)throw(0,d.newError)(`No attribute "${a}"`,"ERR_XML_MISSED_ATTRIBUTE");return s}removeAttribute(a){this.attributes!==null&&delete this.attributes[a]}element(a,s=!1,n=null){const o=this.elementOrNull(a,s);if(o===null)throw(0,d.newError)(n||`No element "${a}"`,"ERR_XML_MISSED_ELEMENT");return o}elementOrNull(a,s=!1){if(this.elements===null)return null;for(const n of this.elements)if(l(n,a,s))return n;return null}getElements(a,s=!1){return this.elements===null?[]:this.elements.filter(n=>l(n,a,s))}elementValueOrEmpty(a,s=!1){const n=this.elementOrNull(a,s);return n===null?"":n.value}}Dt.XElement=h;const u=new RegExp(/^[A-Za-z_][:A-Za-z0-9_-]*$/i);function f(c){return u.test(c)}function l(c,a,s){const n=c.name;return n===a||s===!0&&n.length===a.length&&n.toLowerCase()===a.toLowerCase()}function r(c){let a=null;const s=t.parser(!0,{}),n=[];return s.onopentag=o=>{const i=new h(o.name);if(i.attributes=o.attributes,a===null)a=i;else{const m=n[n.length-1];m.elements==null&&(m.elements=[]),m.elements.push(i)}n.push(i)},s.onclosetag=()=>{n.pop()},s.ontext=o=>{n.length>0&&(n[n.length-1].value=o)},s.oncdata=o=>{const i=n[n.length-1];i.value=o,i.isCData=!0},s.onerror=o=>{throw o},s.write(c),a}return Dt}var Ao;function ke(){return Ao||(Ao=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CURRENT_APP_PACKAGE_FILE_NAME=t.CURRENT_APP_INSTALLER_FILE_NAME=t.XElement=t.parseXml=t.UUID=t.parseDn=t.retry=t.githubUrl=t.getS3LikeProviderBaseUrl=t.ProgressCallbackTransform=t.MemoLazy=t.safeStringifyJson=t.safeGetHeader=t.parseJson=t.HttpExecutor=t.HttpError=t.DigestTransform=t.createHttpError=t.configureRequestUrl=t.configureRequestOptionsFromUrl=t.configureRequestOptions=t.newError=t.CancellationToken=t.CancellationError=void 0,t.asArray=o;var d=ta();Object.defineProperty(t,"CancellationError",{enumerable:!0,get:function(){return d.CancellationError}}),Object.defineProperty(t,"CancellationToken",{enumerable:!0,get:function(){return d.CancellationToken}});var h=Br();Object.defineProperty(t,"newError",{enumerable:!0,get:function(){return h.newError}});var u=xc();Object.defineProperty(t,"configureRequestOptions",{enumerable:!0,get:function(){return u.configureRequestOptions}}),Object.defineProperty(t,"configureRequestOptionsFromUrl",{enumerable:!0,get:function(){return u.configureRequestOptionsFromUrl}}),Object.defineProperty(t,"configureRequestUrl",{enumerable:!0,get:function(){return u.configureRequestUrl}}),Object.defineProperty(t,"createHttpError",{enumerable:!0,get:function(){return u.createHttpError}}),Object.defineProperty(t,"DigestTransform",{enumerable:!0,get:function(){return u.DigestTransform}}),Object.defineProperty(t,"HttpError",{enumerable:!0,get:function(){return u.HttpError}}),Object.defineProperty(t,"HttpExecutor",{enumerable:!0,get:function(){return u.HttpExecutor}}),Object.defineProperty(t,"parseJson",{enumerable:!0,get:function(){return u.parseJson}}),Object.defineProperty(t,"safeGetHeader",{enumerable:!0,get:function(){return u.safeGetHeader}}),Object.defineProperty(t,"safeStringifyJson",{enumerable:!0,get:function(){return u.safeStringifyJson}});var f=Lc();Object.defineProperty(t,"MemoLazy",{enumerable:!0,get:function(){return f.MemoLazy}});var l=Dl();Object.defineProperty(t,"ProgressCallbackTransform",{enumerable:!0,get:function(){return l.ProgressCallbackTransform}});var r=Uc();Object.defineProperty(t,"getS3LikeProviderBaseUrl",{enumerable:!0,get:function(){return r.getS3LikeProviderBaseUrl}}),Object.defineProperty(t,"githubUrl",{enumerable:!0,get:function(){return r.githubUrl}});var c=$c();Object.defineProperty(t,"retry",{enumerable:!0,get:function(){return c.retry}});var a=kc();Object.defineProperty(t,"parseDn",{enumerable:!0,get:function(){return a.parseDn}});var s=qc();Object.defineProperty(t,"UUID",{enumerable:!0,get:function(){return s.UUID}});var n=Bc();Object.defineProperty(t,"parseXml",{enumerable:!0,get:function(){return n.parseXml}}),Object.defineProperty(t,"XElement",{enumerable:!0,get:function(){return n.XElement}}),t.CURRENT_APP_INSTALLER_FILE_NAME="installer.exe",t.CURRENT_APP_PACKAGE_FILE_NAME="package.7z";function o(i){return i==null?[]:Array.isArray(i)?i:[i]}})(Pn)),Pn}var He={},Fr={},dt={},To;function mr(){if(To)return dt;To=1;function t(r){return typeof r>"u"||r===null}function d(r){return typeof r=="object"&&r!==null}function h(r){return Array.isArray(r)?r:t(r)?[]:[r]}function u(r,c){var a,s,n,o;if(c)for(o=Object.keys(c),a=0,s=o.length;a<s;a+=1)n=o[a],r[n]=c[n];return r}function f(r,c){var a="",s;for(s=0;s<c;s+=1)a+=r;return a}function l(r){return r===0&&Number.NEGATIVE_INFINITY===1/r}return dt.isNothing=t,dt.isObject=d,dt.toArray=h,dt.repeat=f,dt.isNegativeZero=l,dt.extend=u,dt}var xn,Ro;function gr(){if(Ro)return xn;Ro=1;function t(h,u){var f="",l=h.reason||"(unknown reason)";return h.mark?(h.mark.name&&(f+='in "'+h.mark.name+'" '),f+="("+(h.mark.line+1)+":"+(h.mark.column+1)+")",!u&&h.mark.snippet&&(f+=`

`+h.mark.snippet),l+" "+f):l}function d(h,u){Error.call(this),this.name="YAMLException",this.reason=h,this.mark=u,this.message=t(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}return d.prototype=Object.create(Error.prototype),d.prototype.constructor=d,d.prototype.toString=function(u){return this.name+": "+t(this,u)},xn=d,xn}var Ln,Co;function Hc(){if(Co)return Ln;Co=1;var t=mr();function d(f,l,r,c,a){var s="",n="",o=Math.floor(a/2)-1;return c-l>o&&(s=" ... ",l=c-o+s.length),r-c>o&&(n=" ...",r=c+o-n.length),{str:s+f.slice(l,r).replace(/\t/g,"")+n,pos:c-l+s.length}}function h(f,l){return t.repeat(" ",l-f.length)+f}function u(f,l){if(l=Object.create(l||null),!f.buffer)return null;l.maxLength||(l.maxLength=79),typeof l.indent!="number"&&(l.indent=1),typeof l.linesBefore!="number"&&(l.linesBefore=3),typeof l.linesAfter!="number"&&(l.linesAfter=2);for(var r=/\r?\n|\r|\0/g,c=[0],a=[],s,n=-1;s=r.exec(f.buffer);)a.push(s.index),c.push(s.index+s[0].length),f.position<=s.index&&n<0&&(n=c.length-2);n<0&&(n=c.length-1);var o="",i,m,g=Math.min(f.line+l.linesAfter,a.length).toString().length,y=l.maxLength-(l.indent+g+3);for(i=1;i<=l.linesBefore&&!(n-i<0);i++)m=d(f.buffer,c[n-i],a[n-i],f.position-(c[n]-c[n-i]),y),o=t.repeat(" ",l.indent)+h((f.line-i+1).toString(),g)+" | "+m.str+`
`+o;for(m=d(f.buffer,c[n],a[n],f.position,y),o+=t.repeat(" ",l.indent)+h((f.line+1).toString(),g)+" | "+m.str+`
`,o+=t.repeat("-",l.indent+g+3+m.pos)+`^
`,i=1;i<=l.linesAfter&&!(n+i>=a.length);i++)m=d(f.buffer,c[n+i],a[n+i],f.position-(c[n]-c[n+i]),y),o+=t.repeat(" ",l.indent)+h((f.line+i+1).toString(),g)+" | "+m.str+`
`;return o.replace(/\n$/,"")}return Ln=u,Ln}var Un,bo;function je(){if(bo)return Un;bo=1;var t=gr(),d=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],h=["scalar","sequence","mapping"];function u(l){var r={};return l!==null&&Object.keys(l).forEach(function(c){l[c].forEach(function(a){r[String(a)]=c})}),r}function f(l,r){if(r=r||{},Object.keys(r).forEach(function(c){if(d.indexOf(c)===-1)throw new t('Unknown option "'+c+'" is met in definition of "'+l+'" YAML type.')}),this.options=r,this.tag=l,this.kind=r.kind||null,this.resolve=r.resolve||function(){return!0},this.construct=r.construct||function(c){return c},this.instanceOf=r.instanceOf||null,this.predicate=r.predicate||null,this.represent=r.represent||null,this.representName=r.representName||null,this.defaultStyle=r.defaultStyle||null,this.multi=r.multi||!1,this.styleAliases=u(r.styleAliases||null),h.indexOf(this.kind)===-1)throw new t('Unknown kind "'+this.kind+'" is specified for "'+l+'" YAML type.')}return Un=f,Un}var $n,Po;function Nl(){if(Po)return $n;Po=1;var t=gr(),d=je();function h(l,r){var c=[];return l[r].forEach(function(a){var s=c.length;c.forEach(function(n,o){n.tag===a.tag&&n.kind===a.kind&&n.multi===a.multi&&(s=o)}),c[s]=a}),c}function u(){var l={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},r,c;function a(s){s.multi?(l.multi[s.kind].push(s),l.multi.fallback.push(s)):l[s.kind][s.tag]=l.fallback[s.tag]=s}for(r=0,c=arguments.length;r<c;r+=1)arguments[r].forEach(a);return l}function f(l){return this.extend(l)}return f.prototype.extend=function(r){var c=[],a=[];if(r instanceof d)a.push(r);else if(Array.isArray(r))a=a.concat(r);else if(r&&(Array.isArray(r.implicit)||Array.isArray(r.explicit)))r.implicit&&(c=c.concat(r.implicit)),r.explicit&&(a=a.concat(r.explicit));else throw new t("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");c.forEach(function(n){if(!(n instanceof d))throw new t("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(n.loadKind&&n.loadKind!=="scalar")throw new t("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(n.multi)throw new t("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),a.forEach(function(n){if(!(n instanceof d))throw new t("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var s=Object.create(f.prototype);return s.implicit=(this.implicit||[]).concat(c),s.explicit=(this.explicit||[]).concat(a),s.compiledImplicit=h(s,"implicit"),s.compiledExplicit=h(s,"explicit"),s.compiledTypeMap=u(s.compiledImplicit,s.compiledExplicit),s},$n=f,$n}var kn,Io;function Fl(){if(Io)return kn;Io=1;var t=je();return kn=new t("tag:yaml.org,2002:str",{kind:"scalar",construct:function(d){return d!==null?d:""}}),kn}var qn,Oo;function xl(){if(Oo)return qn;Oo=1;var t=je();return qn=new t("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(d){return d!==null?d:[]}}),qn}var Mn,Do;function Ll(){if(Do)return Mn;Do=1;var t=je();return Mn=new t("tag:yaml.org,2002:map",{kind:"mapping",construct:function(d){return d!==null?d:{}}}),Mn}var Bn,No;function Ul(){if(No)return Bn;No=1;var t=Nl();return Bn=new t({explicit:[Fl(),xl(),Ll()]}),Bn}var Hn,Fo;function $l(){if(Fo)return Hn;Fo=1;var t=je();function d(f){if(f===null)return!0;var l=f.length;return l===1&&f==="~"||l===4&&(f==="null"||f==="Null"||f==="NULL")}function h(){return null}function u(f){return f===null}return Hn=new t("tag:yaml.org,2002:null",{kind:"scalar",resolve:d,construct:h,predicate:u,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"}),Hn}var jn,xo;function kl(){if(xo)return jn;xo=1;var t=je();function d(f){if(f===null)return!1;var l=f.length;return l===4&&(f==="true"||f==="True"||f==="TRUE")||l===5&&(f==="false"||f==="False"||f==="FALSE")}function h(f){return f==="true"||f==="True"||f==="TRUE"}function u(f){return Object.prototype.toString.call(f)==="[object Boolean]"}return jn=new t("tag:yaml.org,2002:bool",{kind:"scalar",resolve:d,construct:h,predicate:u,represent:{lowercase:function(f){return f?"true":"false"},uppercase:function(f){return f?"TRUE":"FALSE"},camelcase:function(f){return f?"True":"False"}},defaultStyle:"lowercase"}),jn}var Gn,Lo;function ql(){if(Lo)return Gn;Lo=1;var t=mr(),d=je();function h(a){return 48<=a&&a<=57||65<=a&&a<=70||97<=a&&a<=102}function u(a){return 48<=a&&a<=55}function f(a){return 48<=a&&a<=57}function l(a){if(a===null)return!1;var s=a.length,n=0,o=!1,i;if(!s)return!1;if(i=a[n],(i==="-"||i==="+")&&(i=a[++n]),i==="0"){if(n+1===s)return!0;if(i=a[++n],i==="b"){for(n++;n<s;n++)if(i=a[n],i!=="_"){if(i!=="0"&&i!=="1")return!1;o=!0}return o&&i!=="_"}if(i==="x"){for(n++;n<s;n++)if(i=a[n],i!=="_"){if(!h(a.charCodeAt(n)))return!1;o=!0}return o&&i!=="_"}if(i==="o"){for(n++;n<s;n++)if(i=a[n],i!=="_"){if(!u(a.charCodeAt(n)))return!1;o=!0}return o&&i!=="_"}}if(i==="_")return!1;for(;n<s;n++)if(i=a[n],i!=="_"){if(!f(a.charCodeAt(n)))return!1;o=!0}return!(!o||i==="_")}function r(a){var s=a,n=1,o;if(s.indexOf("_")!==-1&&(s=s.replace(/_/g,"")),o=s[0],(o==="-"||o==="+")&&(o==="-"&&(n=-1),s=s.slice(1),o=s[0]),s==="0")return 0;if(o==="0"){if(s[1]==="b")return n*parseInt(s.slice(2),2);if(s[1]==="x")return n*parseInt(s.slice(2),16);if(s[1]==="o")return n*parseInt(s.slice(2),8)}return n*parseInt(s,10)}function c(a){return Object.prototype.toString.call(a)==="[object Number]"&&a%1===0&&!t.isNegativeZero(a)}return Gn=new d("tag:yaml.org,2002:int",{kind:"scalar",resolve:l,construct:r,predicate:c,represent:{binary:function(a){return a>=0?"0b"+a.toString(2):"-0b"+a.toString(2).slice(1)},octal:function(a){return a>=0?"0o"+a.toString(8):"-0o"+a.toString(8).slice(1)},decimal:function(a){return a.toString(10)},hexadecimal:function(a){return a>=0?"0x"+a.toString(16).toUpperCase():"-0x"+a.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Gn}var Wn,Uo;function Ml(){if(Uo)return Wn;Uo=1;var t=mr(),d=je(),h=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function u(a){return!(a===null||!h.test(a)||a[a.length-1]==="_")}function f(a){var s,n;return s=a.replace(/_/g,"").toLowerCase(),n=s[0]==="-"?-1:1,"+-".indexOf(s[0])>=0&&(s=s.slice(1)),s===".inf"?n===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:s===".nan"?NaN:n*parseFloat(s,10)}var l=/^[-+]?[0-9]+e/;function r(a,s){var n;if(isNaN(a))switch(s){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===a)switch(s){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===a)switch(s){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(t.isNegativeZero(a))return"-0.0";return n=a.toString(10),l.test(n)?n.replace("e",".e"):n}function c(a){return Object.prototype.toString.call(a)==="[object Number]"&&(a%1!==0||t.isNegativeZero(a))}return Wn=new d("tag:yaml.org,2002:float",{kind:"scalar",resolve:u,construct:f,predicate:c,represent:r,defaultStyle:"lowercase"}),Wn}var Vn,$o;function Bl(){return $o||($o=1,Vn=Ul().extend({implicit:[$l(),kl(),ql(),Ml()]})),Vn}var Yn,ko;function Hl(){return ko||(ko=1,Yn=Bl()),Yn}var zn,qo;function jl(){if(qo)return zn;qo=1;var t=je(),d=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),h=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function u(r){return r===null?!1:d.exec(r)!==null||h.exec(r)!==null}function f(r){var c,a,s,n,o,i,m,g=0,y=null,p,S,C;if(c=d.exec(r),c===null&&(c=h.exec(r)),c===null)throw new Error("Date resolve error");if(a=+c[1],s=+c[2]-1,n=+c[3],!c[4])return new Date(Date.UTC(a,s,n));if(o=+c[4],i=+c[5],m=+c[6],c[7]){for(g=c[7].slice(0,3);g.length<3;)g+="0";g=+g}return c[9]&&(p=+c[10],S=+(c[11]||0),y=(p*60+S)*6e4,c[9]==="-"&&(y=-y)),C=new Date(Date.UTC(a,s,n,o,i,m,g)),y&&C.setTime(C.getTime()-y),C}function l(r){return r.toISOString()}return zn=new t("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:u,construct:f,instanceOf:Date,represent:l}),zn}var Xn,Mo;function Gl(){if(Mo)return Xn;Mo=1;var t=je();function d(h){return h==="<<"||h===null}return Xn=new t("tag:yaml.org,2002:merge",{kind:"scalar",resolve:d}),Xn}var Kn,Bo;function Wl(){if(Bo)return Kn;Bo=1;var t=je(),d=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function h(r){if(r===null)return!1;var c,a,s=0,n=r.length,o=d;for(a=0;a<n;a++)if(c=o.indexOf(r.charAt(a)),!(c>64)){if(c<0)return!1;s+=6}return s%8===0}function u(r){var c,a,s=r.replace(/[\r\n=]/g,""),n=s.length,o=d,i=0,m=[];for(c=0;c<n;c++)c%4===0&&c&&(m.push(i>>16&255),m.push(i>>8&255),m.push(i&255)),i=i<<6|o.indexOf(s.charAt(c));return a=n%4*6,a===0?(m.push(i>>16&255),m.push(i>>8&255),m.push(i&255)):a===18?(m.push(i>>10&255),m.push(i>>2&255)):a===12&&m.push(i>>4&255),new Uint8Array(m)}function f(r){var c="",a=0,s,n,o=r.length,i=d;for(s=0;s<o;s++)s%3===0&&s&&(c+=i[a>>18&63],c+=i[a>>12&63],c+=i[a>>6&63],c+=i[a&63]),a=(a<<8)+r[s];return n=o%3,n===0?(c+=i[a>>18&63],c+=i[a>>12&63],c+=i[a>>6&63],c+=i[a&63]):n===2?(c+=i[a>>10&63],c+=i[a>>4&63],c+=i[a<<2&63],c+=i[64]):n===1&&(c+=i[a>>2&63],c+=i[a<<4&63],c+=i[64],c+=i[64]),c}function l(r){return Object.prototype.toString.call(r)==="[object Uint8Array]"}return Kn=new t("tag:yaml.org,2002:binary",{kind:"scalar",resolve:h,construct:u,predicate:l,represent:f}),Kn}var Jn,Ho;function Vl(){if(Ho)return Jn;Ho=1;var t=je(),d=Object.prototype.hasOwnProperty,h=Object.prototype.toString;function u(l){if(l===null)return!0;var r=[],c,a,s,n,o,i=l;for(c=0,a=i.length;c<a;c+=1){if(s=i[c],o=!1,h.call(s)!=="[object Object]")return!1;for(n in s)if(d.call(s,n))if(!o)o=!0;else return!1;if(!o)return!1;if(r.indexOf(n)===-1)r.push(n);else return!1}return!0}function f(l){return l!==null?l:[]}return Jn=new t("tag:yaml.org,2002:omap",{kind:"sequence",resolve:u,construct:f}),Jn}var Qn,jo;function Yl(){if(jo)return Qn;jo=1;var t=je(),d=Object.prototype.toString;function h(f){if(f===null)return!0;var l,r,c,a,s,n=f;for(s=new Array(n.length),l=0,r=n.length;l<r;l+=1){if(c=n[l],d.call(c)!=="[object Object]"||(a=Object.keys(c),a.length!==1))return!1;s[l]=[a[0],c[a[0]]]}return!0}function u(f){if(f===null)return[];var l,r,c,a,s,n=f;for(s=new Array(n.length),l=0,r=n.length;l<r;l+=1)c=n[l],a=Object.keys(c),s[l]=[a[0],c[a[0]]];return s}return Qn=new t("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:h,construct:u}),Qn}var Zn,Go;function zl(){if(Go)return Zn;Go=1;var t=je(),d=Object.prototype.hasOwnProperty;function h(f){if(f===null)return!0;var l,r=f;for(l in r)if(d.call(r,l)&&r[l]!==null)return!1;return!0}function u(f){return f!==null?f:{}}return Zn=new t("tag:yaml.org,2002:set",{kind:"mapping",resolve:h,construct:u}),Zn}var ei,Wo;function ra(){return Wo||(Wo=1,ei=Hl().extend({implicit:[jl(),Gl()],explicit:[Wl(),Vl(),Yl(),zl()]})),ei}var Vo;function jc(){if(Vo)return Fr;Vo=1;var t=mr(),d=gr(),h=Hc(),u=ra(),f=Object.prototype.hasOwnProperty,l=1,r=2,c=3,a=4,s=1,n=2,o=3,i=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,m=/[\x85\u2028\u2029]/,g=/[,\[\]\{\}]/,y=/^(?:!|!!|![a-z\-]+!)$/i,p=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function S(e){return Object.prototype.toString.call(e)}function C(e){return e===10||e===13}function P(e){return e===9||e===32}function I(e){return e===9||e===32||e===10||e===13}function M(e){return e===44||e===91||e===93||e===123||e===125}function R(e){var B;return 48<=e&&e<=57?e-48:(B=e|32,97<=B&&B<=102?B-97+10:-1)}function w(e){return e===120?2:e===117?4:e===85?8:0}function T(e){return 48<=e&&e<=57?e-48:-1}function E(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"":e===95?"":e===76?"\u2028":e===80?"\u2029":""}function q(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}for(var L=new Array(256),x=new Array(256),k=0;k<256;k++)L[k]=E(k)?1:0,x[k]=E(k);function D(e,B){this.input=e,this.filename=B.filename||null,this.schema=B.schema||u,this.onWarning=B.onWarning||null,this.legacy=B.legacy||!1,this.json=B.json||!1,this.listener=B.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function O(e,B){var G={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return G.snippet=h(G),new d(B,G)}function F(e,B){throw O(e,B)}function $(e,B){e.onWarning&&e.onWarning.call(null,O(e,B))}var J={YAML:function(B,G,re){var V,te,Z;B.version!==null&&F(B,"duplication of %YAML directive"),re.length!==1&&F(B,"YAML directive accepts exactly one argument"),V=/^([0-9]+)\.([0-9]+)$/.exec(re[0]),V===null&&F(B,"ill-formed argument of the YAML directive"),te=parseInt(V[1],10),Z=parseInt(V[2],10),te!==1&&F(B,"unacceptable YAML version of the document"),B.version=re[0],B.checkLineBreaks=Z<2,Z!==1&&Z!==2&&$(B,"unsupported YAML version of the document")},TAG:function(B,G,re){var V,te;re.length!==2&&F(B,"TAG directive accepts exactly two arguments"),V=re[0],te=re[1],y.test(V)||F(B,"ill-formed tag handle (first argument) of the TAG directive"),f.call(B.tagMap,V)&&F(B,'there is a previously declared suffix for "'+V+'" tag handle'),p.test(te)||F(B,"ill-formed tag prefix (second argument) of the TAG directive");try{te=decodeURIComponent(te)}catch{F(B,"tag prefix is malformed: "+te)}B.tagMap[V]=te}};function W(e,B,G,re){var V,te,Z,ae;if(B<G){if(ae=e.input.slice(B,G),re)for(V=0,te=ae.length;V<te;V+=1)Z=ae.charCodeAt(V),Z===9||32<=Z&&Z<=1114111||F(e,"expected valid JSON character");else i.test(ae)&&F(e,"the stream contains non-printable characters");e.result+=ae}}function ne(e,B,G,re){var V,te,Z,ae;for(t.isObject(G)||F(e,"cannot merge mappings; the provided source object is unacceptable"),V=Object.keys(G),Z=0,ae=V.length;Z<ae;Z+=1)te=V[Z],f.call(B,te)||(B[te]=G[te],re[te]=!0)}function ce(e,B,G,re,V,te,Z,ae,ge){var ve,Te;if(Array.isArray(V))for(V=Array.prototype.slice.call(V),ve=0,Te=V.length;ve<Te;ve+=1)Array.isArray(V[ve])&&F(e,"nested arrays are not supported inside keys"),typeof V=="object"&&S(V[ve])==="[object Object]"&&(V[ve]="[object Object]");if(typeof V=="object"&&S(V)==="[object Object]"&&(V="[object Object]"),V=String(V),B===null&&(B={}),re==="tag:yaml.org,2002:merge")if(Array.isArray(te))for(ve=0,Te=te.length;ve<Te;ve+=1)ne(e,B,te[ve],G);else ne(e,B,te,G);else!e.json&&!f.call(G,V)&&f.call(B,V)&&(e.line=Z||e.line,e.lineStart=ae||e.lineStart,e.position=ge||e.position,F(e,"duplicated mapping key")),V==="__proto__"?Object.defineProperty(B,V,{configurable:!0,enumerable:!0,writable:!0,value:te}):B[V]=te,delete G[V];return B}function ue(e){var B;B=e.input.charCodeAt(e.position),B===10?e.position++:B===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):F(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function ie(e,B,G){for(var re=0,V=e.input.charCodeAt(e.position);V!==0;){for(;P(V);)V===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),V=e.input.charCodeAt(++e.position);if(B&&V===35)do V=e.input.charCodeAt(++e.position);while(V!==10&&V!==13&&V!==0);if(C(V))for(ue(e),V=e.input.charCodeAt(e.position),re++,e.lineIndent=0;V===32;)e.lineIndent++,V=e.input.charCodeAt(++e.position);else break}return G!==-1&&re!==0&&e.lineIndent<G&&$(e,"deficient indentation"),re}function Ae(e){var B=e.position,G;return G=e.input.charCodeAt(B),!!((G===45||G===46)&&G===e.input.charCodeAt(B+1)&&G===e.input.charCodeAt(B+2)&&(B+=3,G=e.input.charCodeAt(B),G===0||I(G)))}function K(e,B){B===1?e.result+=" ":B>1&&(e.result+=t.repeat(`
`,B-1))}function Ee(e,B,G){var re,V,te,Z,ae,ge,ve,Te,de=e.kind,Le=e.result,_;if(_=e.input.charCodeAt(e.position),I(_)||M(_)||_===35||_===38||_===42||_===33||_===124||_===62||_===39||_===34||_===37||_===64||_===96||(_===63||_===45)&&(V=e.input.charCodeAt(e.position+1),I(V)||G&&M(V)))return!1;for(e.kind="scalar",e.result="",te=Z=e.position,ae=!1;_!==0;){if(_===58){if(V=e.input.charCodeAt(e.position+1),I(V)||G&&M(V))break}else if(_===35){if(re=e.input.charCodeAt(e.position-1),I(re))break}else{if(e.position===e.lineStart&&Ae(e)||G&&M(_))break;if(C(_))if(ge=e.line,ve=e.lineStart,Te=e.lineIndent,ie(e,!1,-1),e.lineIndent>=B){ae=!0,_=e.input.charCodeAt(e.position);continue}else{e.position=Z,e.line=ge,e.lineStart=ve,e.lineIndent=Te;break}}ae&&(W(e,te,Z,!1),K(e,e.line-ge),te=Z=e.position,ae=!1),P(_)||(Z=e.position+1),_=e.input.charCodeAt(++e.position)}return W(e,te,Z,!1),e.result?!0:(e.kind=de,e.result=Le,!1)}function A(e,B){var G,re,V;if(G=e.input.charCodeAt(e.position),G!==39)return!1;for(e.kind="scalar",e.result="",e.position++,re=V=e.position;(G=e.input.charCodeAt(e.position))!==0;)if(G===39)if(W(e,re,e.position,!0),G=e.input.charCodeAt(++e.position),G===39)re=e.position,e.position++,V=e.position;else return!0;else C(G)?(W(e,re,V,!0),K(e,ie(e,!1,B)),re=V=e.position):e.position===e.lineStart&&Ae(e)?F(e,"unexpected end of the document within a single quoted scalar"):(e.position++,V=e.position);F(e,"unexpected end of the stream within a single quoted scalar")}function v(e,B){var G,re,V,te,Z,ae;if(ae=e.input.charCodeAt(e.position),ae!==34)return!1;for(e.kind="scalar",e.result="",e.position++,G=re=e.position;(ae=e.input.charCodeAt(e.position))!==0;){if(ae===34)return W(e,G,e.position,!0),e.position++,!0;if(ae===92){if(W(e,G,e.position,!0),ae=e.input.charCodeAt(++e.position),C(ae))ie(e,!1,B);else if(ae<256&&L[ae])e.result+=x[ae],e.position++;else if((Z=w(ae))>0){for(V=Z,te=0;V>0;V--)ae=e.input.charCodeAt(++e.position),(Z=R(ae))>=0?te=(te<<4)+Z:F(e,"expected hexadecimal character");e.result+=q(te),e.position++}else F(e,"unknown escape sequence");G=re=e.position}else C(ae)?(W(e,G,re,!0),K(e,ie(e,!1,B)),G=re=e.position):e.position===e.lineStart&&Ae(e)?F(e,"unexpected end of the document within a double quoted scalar"):(e.position++,re=e.position)}F(e,"unexpected end of the stream within a double quoted scalar")}function H(e,B){var G=!0,re,V,te,Z=e.tag,ae,ge=e.anchor,ve,Te,de,Le,_,j=Object.create(null),X,Y,Q,ee;if(ee=e.input.charCodeAt(e.position),ee===91)Te=93,_=!1,ae=[];else if(ee===123)Te=125,_=!0,ae={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=ae),ee=e.input.charCodeAt(++e.position);ee!==0;){if(ie(e,!0,B),ee=e.input.charCodeAt(e.position),ee===Te)return e.position++,e.tag=Z,e.anchor=ge,e.kind=_?"mapping":"sequence",e.result=ae,!0;G?ee===44&&F(e,"expected the node content, but found ','"):F(e,"missed comma between flow collection entries"),Y=X=Q=null,de=Le=!1,ee===63&&(ve=e.input.charCodeAt(e.position+1),I(ve)&&(de=Le=!0,e.position++,ie(e,!0,B))),re=e.line,V=e.lineStart,te=e.position,xe(e,B,l,!1,!0),Y=e.tag,X=e.result,ie(e,!0,B),ee=e.input.charCodeAt(e.position),(Le||e.line===re)&&ee===58&&(de=!0,ee=e.input.charCodeAt(++e.position),ie(e,!0,B),xe(e,B,l,!1,!0),Q=e.result),_?ce(e,ae,j,Y,X,Q,re,V,te):de?ae.push(ce(e,null,j,Y,X,Q,re,V,te)):ae.push(X),ie(e,!0,B),ee=e.input.charCodeAt(e.position),ee===44?(G=!0,ee=e.input.charCodeAt(++e.position)):G=!1}F(e,"unexpected end of the stream within a flow collection")}function N(e,B){var G,re,V=s,te=!1,Z=!1,ae=B,ge=0,ve=!1,Te,de;if(de=e.input.charCodeAt(e.position),de===124)re=!1;else if(de===62)re=!0;else return!1;for(e.kind="scalar",e.result="";de!==0;)if(de=e.input.charCodeAt(++e.position),de===43||de===45)s===V?V=de===43?o:n:F(e,"repeat of a chomping mode identifier");else if((Te=T(de))>=0)Te===0?F(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):Z?F(e,"repeat of an indentation width identifier"):(ae=B+Te-1,Z=!0);else break;if(P(de)){do de=e.input.charCodeAt(++e.position);while(P(de));if(de===35)do de=e.input.charCodeAt(++e.position);while(!C(de)&&de!==0)}for(;de!==0;){for(ue(e),e.lineIndent=0,de=e.input.charCodeAt(e.position);(!Z||e.lineIndent<ae)&&de===32;)e.lineIndent++,de=e.input.charCodeAt(++e.position);if(!Z&&e.lineIndent>ae&&(ae=e.lineIndent),C(de)){ge++;continue}if(e.lineIndent<ae){V===o?e.result+=t.repeat(`
`,te?1+ge:ge):V===s&&te&&(e.result+=`
`);break}for(re?P(de)?(ve=!0,e.result+=t.repeat(`
`,te?1+ge:ge)):ve?(ve=!1,e.result+=t.repeat(`
`,ge+1)):ge===0?te&&(e.result+=" "):e.result+=t.repeat(`
`,ge):e.result+=t.repeat(`
`,te?1+ge:ge),te=!0,Z=!0,ge=0,G=e.position;!C(de)&&de!==0;)de=e.input.charCodeAt(++e.position);W(e,G,e.position,!1)}return!0}function le(e,B){var G,re=e.tag,V=e.anchor,te=[],Z,ae=!1,ge;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=te),ge=e.input.charCodeAt(e.position);ge!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,F(e,"tab characters must not be used in indentation")),!(ge!==45||(Z=e.input.charCodeAt(e.position+1),!I(Z))));){if(ae=!0,e.position++,ie(e,!0,-1)&&e.lineIndent<=B){te.push(null),ge=e.input.charCodeAt(e.position);continue}if(G=e.line,xe(e,B,c,!1,!0),te.push(e.result),ie(e,!0,-1),ge=e.input.charCodeAt(e.position),(e.line===G||e.lineIndent>B)&&ge!==0)F(e,"bad indentation of a sequence entry");else if(e.lineIndent<B)break}return ae?(e.tag=re,e.anchor=V,e.kind="sequence",e.result=te,!0):!1}function me(e,B,G){var re,V,te,Z,ae,ge,ve=e.tag,Te=e.anchor,de={},Le=Object.create(null),_=null,j=null,X=null,Y=!1,Q=!1,ee;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=de),ee=e.input.charCodeAt(e.position);ee!==0;){if(!Y&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,F(e,"tab characters must not be used in indentation")),re=e.input.charCodeAt(e.position+1),te=e.line,(ee===63||ee===58)&&I(re))ee===63?(Y&&(ce(e,de,Le,_,j,null,Z,ae,ge),_=j=X=null),Q=!0,Y=!0,V=!0):Y?(Y=!1,V=!0):F(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,ee=re;else{if(Z=e.line,ae=e.lineStart,ge=e.position,!xe(e,G,r,!1,!0))break;if(e.line===te){for(ee=e.input.charCodeAt(e.position);P(ee);)ee=e.input.charCodeAt(++e.position);if(ee===58)ee=e.input.charCodeAt(++e.position),I(ee)||F(e,"a whitespace character is expected after the key-value separator within a block mapping"),Y&&(ce(e,de,Le,_,j,null,Z,ae,ge),_=j=X=null),Q=!0,Y=!1,V=!1,_=e.tag,j=e.result;else if(Q)F(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=ve,e.anchor=Te,!0}else if(Q)F(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=ve,e.anchor=Te,!0}if((e.line===te||e.lineIndent>B)&&(Y&&(Z=e.line,ae=e.lineStart,ge=e.position),xe(e,B,a,!0,V)&&(Y?j=e.result:X=e.result),Y||(ce(e,de,Le,_,j,X,Z,ae,ge),_=j=X=null),ie(e,!0,-1),ee=e.input.charCodeAt(e.position)),(e.line===te||e.lineIndent>B)&&ee!==0)F(e,"bad indentation of a mapping entry");else if(e.lineIndent<B)break}return Y&&ce(e,de,Le,_,j,null,Z,ae,ge),Q&&(e.tag=ve,e.anchor=Te,e.kind="mapping",e.result=de),Q}function pe(e){var B,G=!1,re=!1,V,te,Z;if(Z=e.input.charCodeAt(e.position),Z!==33)return!1;if(e.tag!==null&&F(e,"duplication of a tag property"),Z=e.input.charCodeAt(++e.position),Z===60?(G=!0,Z=e.input.charCodeAt(++e.position)):Z===33?(re=!0,V="!!",Z=e.input.charCodeAt(++e.position)):V="!",B=e.position,G){do Z=e.input.charCodeAt(++e.position);while(Z!==0&&Z!==62);e.position<e.length?(te=e.input.slice(B,e.position),Z=e.input.charCodeAt(++e.position)):F(e,"unexpected end of the stream within a verbatim tag")}else{for(;Z!==0&&!I(Z);)Z===33&&(re?F(e,"tag suffix cannot contain exclamation marks"):(V=e.input.slice(B-1,e.position+1),y.test(V)||F(e,"named tag handle cannot contain such characters"),re=!0,B=e.position+1)),Z=e.input.charCodeAt(++e.position);te=e.input.slice(B,e.position),g.test(te)&&F(e,"tag suffix cannot contain flow indicator characters")}te&&!p.test(te)&&F(e,"tag name cannot contain such characters: "+te);try{te=decodeURIComponent(te)}catch{F(e,"tag name is malformed: "+te)}return G?e.tag=te:f.call(e.tagMap,V)?e.tag=e.tagMap[V]+te:V==="!"?e.tag="!"+te:V==="!!"?e.tag="tag:yaml.org,2002:"+te:F(e,'undeclared tag handle "'+V+'"'),!0}function _e(e){var B,G;if(G=e.input.charCodeAt(e.position),G!==38)return!1;for(e.anchor!==null&&F(e,"duplication of an anchor property"),G=e.input.charCodeAt(++e.position),B=e.position;G!==0&&!I(G)&&!M(G);)G=e.input.charCodeAt(++e.position);return e.position===B&&F(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(B,e.position),!0}function ye(e){var B,G,re;if(re=e.input.charCodeAt(e.position),re!==42)return!1;for(re=e.input.charCodeAt(++e.position),B=e.position;re!==0&&!I(re)&&!M(re);)re=e.input.charCodeAt(++e.position);return e.position===B&&F(e,"name of an alias node must contain at least one character"),G=e.input.slice(B,e.position),f.call(e.anchorMap,G)||F(e,'unidentified alias "'+G+'"'),e.result=e.anchorMap[G],ie(e,!0,-1),!0}function xe(e,B,G,re,V){var te,Z,ae,ge=1,ve=!1,Te=!1,de,Le,_,j,X,Y;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,te=Z=ae=a===G||c===G,re&&ie(e,!0,-1)&&(ve=!0,e.lineIndent>B?ge=1:e.lineIndent===B?ge=0:e.lineIndent<B&&(ge=-1)),ge===1)for(;pe(e)||_e(e);)ie(e,!0,-1)?(ve=!0,ae=te,e.lineIndent>B?ge=1:e.lineIndent===B?ge=0:e.lineIndent<B&&(ge=-1)):ae=!1;if(ae&&(ae=ve||V),(ge===1||a===G)&&(l===G||r===G?X=B:X=B+1,Y=e.position-e.lineStart,ge===1?ae&&(le(e,Y)||me(e,Y,X))||H(e,X)?Te=!0:(Z&&N(e,X)||A(e,X)||v(e,X)?Te=!0:ye(e)?(Te=!0,(e.tag!==null||e.anchor!==null)&&F(e,"alias node should not have any properties")):Ee(e,X,l===G)&&(Te=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):ge===0&&(Te=ae&&le(e,Y))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&F(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),de=0,Le=e.implicitTypes.length;de<Le;de+=1)if(j=e.implicitTypes[de],j.resolve(e.result)){e.result=j.construct(e.result),e.tag=j.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(f.call(e.typeMap[e.kind||"fallback"],e.tag))j=e.typeMap[e.kind||"fallback"][e.tag];else for(j=null,_=e.typeMap.multi[e.kind||"fallback"],de=0,Le=_.length;de<Le;de+=1)if(e.tag.slice(0,_[de].tag.length)===_[de].tag){j=_[de];break}j||F(e,"unknown tag !<"+e.tag+">"),e.result!==null&&j.kind!==e.kind&&F(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+j.kind+'", not "'+e.kind+'"'),j.resolve(e.result,e.tag)?(e.result=j.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):F(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||Te}function be(e){var B=e.position,G,re,V,te=!1,Z;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(Z=e.input.charCodeAt(e.position))!==0&&(ie(e,!0,-1),Z=e.input.charCodeAt(e.position),!(e.lineIndent>0||Z!==37));){for(te=!0,Z=e.input.charCodeAt(++e.position),G=e.position;Z!==0&&!I(Z);)Z=e.input.charCodeAt(++e.position);for(re=e.input.slice(G,e.position),V=[],re.length<1&&F(e,"directive name must not be less than one character in length");Z!==0;){for(;P(Z);)Z=e.input.charCodeAt(++e.position);if(Z===35){do Z=e.input.charCodeAt(++e.position);while(Z!==0&&!C(Z));break}if(C(Z))break;for(G=e.position;Z!==0&&!I(Z);)Z=e.input.charCodeAt(++e.position);V.push(e.input.slice(G,e.position))}Z!==0&&ue(e),f.call(J,re)?J[re](e,re,V):$(e,'unknown document directive "'+re+'"')}if(ie(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,ie(e,!0,-1)):te&&F(e,"directives end mark is expected"),xe(e,e.lineIndent-1,a,!1,!0),ie(e,!0,-1),e.checkLineBreaks&&m.test(e.input.slice(B,e.position))&&$(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&Ae(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,ie(e,!0,-1));return}if(e.position<e.length-1)F(e,"end of the stream or a document separator is expected");else return}function qe(e,B){e=String(e),B=B||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var G=new D(e,B),re=e.indexOf("\0");for(re!==-1&&(G.position=re,F(G,"null byte is not allowed in input")),G.input+="\0";G.input.charCodeAt(G.position)===32;)G.lineIndent+=1,G.position+=1;for(;G.position<G.length-1;)be(G);return G.documents}function mt(e,B,G){B!==null&&typeof B=="object"&&typeof G>"u"&&(G=B,B=null);var re=qe(e,G);if(typeof B!="function")return re;for(var V=0,te=re.length;V<te;V+=1)B(re[V])}function at(e,B){var G=qe(e,B);if(G.length!==0){if(G.length===1)return G[0];throw new d("expected a single document in the stream, but found more")}}return Fr.loadAll=mt,Fr.load=at,Fr}var ti={},Yo;function Gc(){if(Yo)return ti;Yo=1;var t=mr(),d=gr(),h=ra(),u=Object.prototype.toString,f=Object.prototype.hasOwnProperty,l=65279,r=9,c=10,a=13,s=32,n=33,o=34,i=35,m=37,g=38,y=39,p=42,S=44,C=45,P=58,I=61,M=62,R=63,w=64,T=91,E=93,q=96,L=123,x=124,k=125,D={};D[0]="\\0",D[7]="\\a",D[8]="\\b",D[9]="\\t",D[10]="\\n",D[11]="\\v",D[12]="\\f",D[13]="\\r",D[27]="\\e",D[34]='\\"',D[92]="\\\\",D[133]="\\N",D[160]="\\_",D[8232]="\\L",D[8233]="\\P";var O=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],F=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function $(_,j){var X,Y,Q,ee,fe,oe,he;if(j===null)return{};for(X={},Y=Object.keys(j),Q=0,ee=Y.length;Q<ee;Q+=1)fe=Y[Q],oe=String(j[fe]),fe.slice(0,2)==="!!"&&(fe="tag:yaml.org,2002:"+fe.slice(2)),he=_.compiledTypeMap.fallback[fe],he&&f.call(he.styleAliases,oe)&&(oe=he.styleAliases[oe]),X[fe]=oe;return X}function J(_){var j,X,Y;if(j=_.toString(16).toUpperCase(),_<=255)X="x",Y=2;else if(_<=65535)X="u",Y=4;else if(_<=4294967295)X="U",Y=8;else throw new d("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+X+t.repeat("0",Y-j.length)+j}var W=1,ne=2;function ce(_){this.schema=_.schema||h,this.indent=Math.max(1,_.indent||2),this.noArrayIndent=_.noArrayIndent||!1,this.skipInvalid=_.skipInvalid||!1,this.flowLevel=t.isNothing(_.flowLevel)?-1:_.flowLevel,this.styleMap=$(this.schema,_.styles||null),this.sortKeys=_.sortKeys||!1,this.lineWidth=_.lineWidth||80,this.noRefs=_.noRefs||!1,this.noCompatMode=_.noCompatMode||!1,this.condenseFlow=_.condenseFlow||!1,this.quotingType=_.quotingType==='"'?ne:W,this.forceQuotes=_.forceQuotes||!1,this.replacer=typeof _.replacer=="function"?_.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function ue(_,j){for(var X=t.repeat(" ",j),Y=0,Q=-1,ee="",fe,oe=_.length;Y<oe;)Q=_.indexOf(`
`,Y),Q===-1?(fe=_.slice(Y),Y=oe):(fe=_.slice(Y,Q+1),Y=Q+1),fe.length&&fe!==`
`&&(ee+=X),ee+=fe;return ee}function ie(_,j){return`
`+t.repeat(" ",_.indent*j)}function Ae(_,j){var X,Y,Q;for(X=0,Y=_.implicitTypes.length;X<Y;X+=1)if(Q=_.implicitTypes[X],Q.resolve(j))return!0;return!1}function K(_){return _===s||_===r}function Ee(_){return 32<=_&&_<=126||161<=_&&_<=55295&&_!==8232&&_!==8233||57344<=_&&_<=65533&&_!==l||65536<=_&&_<=1114111}function A(_){return Ee(_)&&_!==l&&_!==a&&_!==c}function v(_,j,X){var Y=A(_),Q=Y&&!K(_);return(X?Y:Y&&_!==S&&_!==T&&_!==E&&_!==L&&_!==k)&&_!==i&&!(j===P&&!Q)||A(j)&&!K(j)&&_===i||j===P&&Q}function H(_){return Ee(_)&&_!==l&&!K(_)&&_!==C&&_!==R&&_!==P&&_!==S&&_!==T&&_!==E&&_!==L&&_!==k&&_!==i&&_!==g&&_!==p&&_!==n&&_!==x&&_!==I&&_!==M&&_!==y&&_!==o&&_!==m&&_!==w&&_!==q}function N(_){return!K(_)&&_!==P}function le(_,j){var X=_.charCodeAt(j),Y;return X>=55296&&X<=56319&&j+1<_.length&&(Y=_.charCodeAt(j+1),Y>=56320&&Y<=57343)?(X-55296)*1024+Y-56320+65536:X}function me(_){var j=/^\n* /;return j.test(_)}var pe=1,_e=2,ye=3,xe=4,be=5;function qe(_,j,X,Y,Q,ee,fe,oe){var he,we=0,Pe=null,Ne=!1,Re=!1,It=Y!==-1,Qe=-1,gt=H(le(_,0))&&N(le(_,_.length-1));if(j||fe)for(he=0;he<_.length;we>=65536?he+=2:he++){if(we=le(_,he),!Ee(we))return be;gt=gt&&v(we,Pe,oe),Pe=we}else{for(he=0;he<_.length;we>=65536?he+=2:he++){if(we=le(_,he),we===c)Ne=!0,It&&(Re=Re||he-Qe-1>Y&&_[Qe+1]!==" ",Qe=he);else if(!Ee(we))return be;gt=gt&&v(we,Pe,oe),Pe=we}Re=Re||It&&he-Qe-1>Y&&_[Qe+1]!==" "}return!Ne&&!Re?gt&&!fe&&!Q(_)?pe:ee===ne?be:_e:X>9&&me(_)?be:fe?ee===ne?be:_e:Re?xe:ye}function mt(_,j,X,Y,Q){_.dump=(function(){if(j.length===0)return _.quotingType===ne?'""':"''";if(!_.noCompatMode&&(O.indexOf(j)!==-1||F.test(j)))return _.quotingType===ne?'"'+j+'"':"'"+j+"'";var ee=_.indent*Math.max(1,X),fe=_.lineWidth===-1?-1:Math.max(Math.min(_.lineWidth,40),_.lineWidth-ee),oe=Y||_.flowLevel>-1&&X>=_.flowLevel;function he(we){return Ae(_,we)}switch(qe(j,oe,_.indent,fe,he,_.quotingType,_.forceQuotes&&!Y,Q)){case pe:return j;case _e:return"'"+j.replace(/'/g,"''")+"'";case ye:return"|"+at(j,_.indent)+e(ue(j,ee));case xe:return">"+at(j,_.indent)+e(ue(B(j,fe),ee));case be:return'"'+re(j)+'"';default:throw new d("impossible error: invalid scalar style")}})()}function at(_,j){var X=me(_)?String(j):"",Y=_[_.length-1]===`
`,Q=Y&&(_[_.length-2]===`
`||_===`
`),ee=Q?"+":Y?"":"-";return X+ee+`
`}function e(_){return _[_.length-1]===`
`?_.slice(0,-1):_}function B(_,j){for(var X=/(\n+)([^\n]*)/g,Y=(function(){var we=_.indexOf(`
`);return we=we!==-1?we:_.length,X.lastIndex=we,G(_.slice(0,we),j)})(),Q=_[0]===`
`||_[0]===" ",ee,fe;fe=X.exec(_);){var oe=fe[1],he=fe[2];ee=he[0]===" ",Y+=oe+(!Q&&!ee&&he!==""?`
`:"")+G(he,j),Q=ee}return Y}function G(_,j){if(_===""||_[0]===" ")return _;for(var X=/ [^ ]/g,Y,Q=0,ee,fe=0,oe=0,he="";Y=X.exec(_);)oe=Y.index,oe-Q>j&&(ee=fe>Q?fe:oe,he+=`
`+_.slice(Q,ee),Q=ee+1),fe=oe;return he+=`
`,_.length-Q>j&&fe>Q?he+=_.slice(Q,fe)+`
`+_.slice(fe+1):he+=_.slice(Q),he.slice(1)}function re(_){for(var j="",X=0,Y,Q=0;Q<_.length;X>=65536?Q+=2:Q++)X=le(_,Q),Y=D[X],!Y&&Ee(X)?(j+=_[Q],X>=65536&&(j+=_[Q+1])):j+=Y||J(X);return j}function V(_,j,X){var Y="",Q=_.tag,ee,fe,oe;for(ee=0,fe=X.length;ee<fe;ee+=1)oe=X[ee],_.replacer&&(oe=_.replacer.call(X,String(ee),oe)),(ve(_,j,oe,!1,!1)||typeof oe>"u"&&ve(_,j,null,!1,!1))&&(Y!==""&&(Y+=","+(_.condenseFlow?"":" ")),Y+=_.dump);_.tag=Q,_.dump="["+Y+"]"}function te(_,j,X,Y){var Q="",ee=_.tag,fe,oe,he;for(fe=0,oe=X.length;fe<oe;fe+=1)he=X[fe],_.replacer&&(he=_.replacer.call(X,String(fe),he)),(ve(_,j+1,he,!0,!0,!1,!0)||typeof he>"u"&&ve(_,j+1,null,!0,!0,!1,!0))&&((!Y||Q!=="")&&(Q+=ie(_,j)),_.dump&&c===_.dump.charCodeAt(0)?Q+="-":Q+="- ",Q+=_.dump);_.tag=ee,_.dump=Q||"[]"}function Z(_,j,X){var Y="",Q=_.tag,ee=Object.keys(X),fe,oe,he,we,Pe;for(fe=0,oe=ee.length;fe<oe;fe+=1)Pe="",Y!==""&&(Pe+=", "),_.condenseFlow&&(Pe+='"'),he=ee[fe],we=X[he],_.replacer&&(we=_.replacer.call(X,he,we)),ve(_,j,he,!1,!1)&&(_.dump.length>1024&&(Pe+="? "),Pe+=_.dump+(_.condenseFlow?'"':"")+":"+(_.condenseFlow?"":" "),ve(_,j,we,!1,!1)&&(Pe+=_.dump,Y+=Pe));_.tag=Q,_.dump="{"+Y+"}"}function ae(_,j,X,Y){var Q="",ee=_.tag,fe=Object.keys(X),oe,he,we,Pe,Ne,Re;if(_.sortKeys===!0)fe.sort();else if(typeof _.sortKeys=="function")fe.sort(_.sortKeys);else if(_.sortKeys)throw new d("sortKeys must be a boolean or a function");for(oe=0,he=fe.length;oe<he;oe+=1)Re="",(!Y||Q!=="")&&(Re+=ie(_,j)),we=fe[oe],Pe=X[we],_.replacer&&(Pe=_.replacer.call(X,we,Pe)),ve(_,j+1,we,!0,!0,!0)&&(Ne=_.tag!==null&&_.tag!=="?"||_.dump&&_.dump.length>1024,Ne&&(_.dump&&c===_.dump.charCodeAt(0)?Re+="?":Re+="? "),Re+=_.dump,Ne&&(Re+=ie(_,j)),ve(_,j+1,Pe,!0,Ne)&&(_.dump&&c===_.dump.charCodeAt(0)?Re+=":":Re+=": ",Re+=_.dump,Q+=Re));_.tag=ee,_.dump=Q||"{}"}function ge(_,j,X){var Y,Q,ee,fe,oe,he;for(Q=X?_.explicitTypes:_.implicitTypes,ee=0,fe=Q.length;ee<fe;ee+=1)if(oe=Q[ee],(oe.instanceOf||oe.predicate)&&(!oe.instanceOf||typeof j=="object"&&j instanceof oe.instanceOf)&&(!oe.predicate||oe.predicate(j))){if(X?oe.multi&&oe.representName?_.tag=oe.representName(j):_.tag=oe.tag:_.tag="?",oe.represent){if(he=_.styleMap[oe.tag]||oe.defaultStyle,u.call(oe.represent)==="[object Function]")Y=oe.represent(j,he);else if(f.call(oe.represent,he))Y=oe.represent[he](j,he);else throw new d("!<"+oe.tag+'> tag resolver accepts not "'+he+'" style');_.dump=Y}return!0}return!1}function ve(_,j,X,Y,Q,ee,fe){_.tag=null,_.dump=X,ge(_,X,!1)||ge(_,X,!0);var oe=u.call(_.dump),he=Y,we;Y&&(Y=_.flowLevel<0||_.flowLevel>j);var Pe=oe==="[object Object]"||oe==="[object Array]",Ne,Re;if(Pe&&(Ne=_.duplicates.indexOf(X),Re=Ne!==-1),(_.tag!==null&&_.tag!=="?"||Re||_.indent!==2&&j>0)&&(Q=!1),Re&&_.usedDuplicates[Ne])_.dump="*ref_"+Ne;else{if(Pe&&Re&&!_.usedDuplicates[Ne]&&(_.usedDuplicates[Ne]=!0),oe==="[object Object]")Y&&Object.keys(_.dump).length!==0?(ae(_,j,_.dump,Q),Re&&(_.dump="&ref_"+Ne+_.dump)):(Z(_,j,_.dump),Re&&(_.dump="&ref_"+Ne+" "+_.dump));else if(oe==="[object Array]")Y&&_.dump.length!==0?(_.noArrayIndent&&!fe&&j>0?te(_,j-1,_.dump,Q):te(_,j,_.dump,Q),Re&&(_.dump="&ref_"+Ne+_.dump)):(V(_,j,_.dump),Re&&(_.dump="&ref_"+Ne+" "+_.dump));else if(oe==="[object String]")_.tag!=="?"&&mt(_,_.dump,j,ee,he);else{if(oe==="[object Undefined]")return!1;if(_.skipInvalid)return!1;throw new d("unacceptable kind of an object to dump "+oe)}_.tag!==null&&_.tag!=="?"&&(we=encodeURI(_.tag[0]==="!"?_.tag.slice(1):_.tag).replace(/!/g,"%21"),_.tag[0]==="!"?we="!"+we:we.slice(0,18)==="tag:yaml.org,2002:"?we="!!"+we.slice(18):we="!<"+we+">",_.dump=we+" "+_.dump)}return!0}function Te(_,j){var X=[],Y=[],Q,ee;for(de(_,X,Y),Q=0,ee=Y.length;Q<ee;Q+=1)j.duplicates.push(X[Y[Q]]);j.usedDuplicates=new Array(ee)}function de(_,j,X){var Y,Q,ee;if(_!==null&&typeof _=="object")if(Q=j.indexOf(_),Q!==-1)X.indexOf(Q)===-1&&X.push(Q);else if(j.push(_),Array.isArray(_))for(Q=0,ee=_.length;Q<ee;Q+=1)de(_[Q],j,X);else for(Y=Object.keys(_),Q=0,ee=Y.length;Q<ee;Q+=1)de(_[Y[Q]],j,X)}function Le(_,j){j=j||{};var X=new ce(j);X.noRefs||Te(_,X);var Y=_;return X.replacer&&(Y=X.replacer.call({"":Y},"",Y)),ve(X,0,Y,!0,!0)?X.dump+`
`:""}return ti.dump=Le,ti}var zo;function na(){if(zo)return He;zo=1;var t=jc(),d=Gc();function h(u,f){return function(){throw new Error("Function yaml."+u+" is removed in js-yaml 4. Use yaml."+f+" instead, which is now safe by default.")}}return He.Type=je(),He.Schema=Nl(),He.FAILSAFE_SCHEMA=Ul(),He.JSON_SCHEMA=Bl(),He.CORE_SCHEMA=Hl(),He.DEFAULT_SCHEMA=ra(),He.load=t.load,He.loadAll=t.loadAll,He.dump=d.dump,He.YAMLException=gr(),He.types={binary:Wl(),float:Ml(),map:Ll(),null:$l(),pairs:Yl(),set:zl(),timestamp:jl(),bool:kl(),int:ql(),merge:Gl(),omap:Vl(),seq:xl(),str:Fl()},He.safeLoad=h("safeLoad","load"),He.safeLoadAll=h("safeLoadAll","loadAll"),He.safeDump=h("safeDump","dump"),He}var Vt={},Xo;function Wc(){if(Xo)return Vt;Xo=1,Object.defineProperty(Vt,"__esModule",{value:!0}),Vt.Lazy=void 0;class t{constructor(h){this._value=null,this.creator=h}get hasValue(){return this.creator==null}get value(){if(this.creator==null)return this._value;const h=this.creator();return this.value=h,h}set value(h){this._value=h,this.creator=null}}return Vt.Lazy=t,Vt}var xr={exports:{}},ri,Ko;function Hr(){if(Ko)return ri;Ko=1;const t="2.0.0",d=256,h=Number.MAX_SAFE_INTEGER||9007199254740991,u=16,f=d-6;return ri={MAX_LENGTH:d,MAX_SAFE_COMPONENT_LENGTH:u,MAX_SAFE_BUILD_LENGTH:f,MAX_SAFE_INTEGER:h,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:t,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},ri}var ni,Jo;function jr(){return Jo||(Jo=1,ni=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...d)=>console.error("SEMVER",...d):()=>{}),ni}var Qo;function vr(){return Qo||(Qo=1,(function(t,d){const{MAX_SAFE_COMPONENT_LENGTH:h,MAX_SAFE_BUILD_LENGTH:u,MAX_LENGTH:f}=Hr(),l=jr();d=t.exports={};const r=d.re=[],c=d.safeRe=[],a=d.src=[],s=d.safeSrc=[],n=d.t={};let o=0;const i="[a-zA-Z0-9-]",m=[["\\s",1],["\\d",f],[i,u]],g=p=>{for(const[S,C]of m)p=p.split(`${S}*`).join(`${S}{0,${C}}`).split(`${S}+`).join(`${S}{1,${C}}`);return p},y=(p,S,C)=>{const P=g(S),I=o++;l(p,I,S),n[p]=I,a[I]=S,s[I]=P,r[I]=new RegExp(S,C?"g":void 0),c[I]=new RegExp(P,C?"g":void 0)};y("NUMERICIDENTIFIER","0|[1-9]\\d*"),y("NUMERICIDENTIFIERLOOSE","\\d+"),y("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${i}*`),y("MAINVERSION",`(${a[n.NUMERICIDENTIFIER]})\\.(${a[n.NUMERICIDENTIFIER]})\\.(${a[n.NUMERICIDENTIFIER]})`),y("MAINVERSIONLOOSE",`(${a[n.NUMERICIDENTIFIERLOOSE]})\\.(${a[n.NUMERICIDENTIFIERLOOSE]})\\.(${a[n.NUMERICIDENTIFIERLOOSE]})`),y("PRERELEASEIDENTIFIER",`(?:${a[n.NONNUMERICIDENTIFIER]}|${a[n.NUMERICIDENTIFIER]})`),y("PRERELEASEIDENTIFIERLOOSE",`(?:${a[n.NONNUMERICIDENTIFIER]}|${a[n.NUMERICIDENTIFIERLOOSE]})`),y("PRERELEASE",`(?:-(${a[n.PRERELEASEIDENTIFIER]}(?:\\.${a[n.PRERELEASEIDENTIFIER]})*))`),y("PRERELEASELOOSE",`(?:-?(${a[n.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${a[n.PRERELEASEIDENTIFIERLOOSE]})*))`),y("BUILDIDENTIFIER",`${i}+`),y("BUILD",`(?:\\+(${a[n.BUILDIDENTIFIER]}(?:\\.${a[n.BUILDIDENTIFIER]})*))`),y("FULLPLAIN",`v?${a[n.MAINVERSION]}${a[n.PRERELEASE]}?${a[n.BUILD]}?`),y("FULL",`^${a[n.FULLPLAIN]}$`),y("LOOSEPLAIN",`[v=\\s]*${a[n.MAINVERSIONLOOSE]}${a[n.PRERELEASELOOSE]}?${a[n.BUILD]}?`),y("LOOSE",`^${a[n.LOOSEPLAIN]}$`),y("GTLT","((?:<|>)?=?)"),y("XRANGEIDENTIFIERLOOSE",`${a[n.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),y("XRANGEIDENTIFIER",`${a[n.NUMERICIDENTIFIER]}|x|X|\\*`),y("XRANGEPLAIN",`[v=\\s]*(${a[n.XRANGEIDENTIFIER]})(?:\\.(${a[n.XRANGEIDENTIFIER]})(?:\\.(${a[n.XRANGEIDENTIFIER]})(?:${a[n.PRERELEASE]})?${a[n.BUILD]}?)?)?`),y("XRANGEPLAINLOOSE",`[v=\\s]*(${a[n.XRANGEIDENTIFIERLOOSE]})(?:\\.(${a[n.XRANGEIDENTIFIERLOOSE]})(?:\\.(${a[n.XRANGEIDENTIFIERLOOSE]})(?:${a[n.PRERELEASELOOSE]})?${a[n.BUILD]}?)?)?`),y("XRANGE",`^${a[n.GTLT]}\\s*${a[n.XRANGEPLAIN]}$`),y("XRANGELOOSE",`^${a[n.GTLT]}\\s*${a[n.XRANGEPLAINLOOSE]}$`),y("COERCEPLAIN",`(^|[^\\d])(\\d{1,${h}})(?:\\.(\\d{1,${h}}))?(?:\\.(\\d{1,${h}}))?`),y("COERCE",`${a[n.COERCEPLAIN]}(?:$|[^\\d])`),y("COERCEFULL",a[n.COERCEPLAIN]+`(?:${a[n.PRERELEASE]})?(?:${a[n.BUILD]})?(?:$|[^\\d])`),y("COERCERTL",a[n.COERCE],!0),y("COERCERTLFULL",a[n.COERCEFULL],!0),y("LONETILDE","(?:~>?)"),y("TILDETRIM",`(\\s*)${a[n.LONETILDE]}\\s+`,!0),d.tildeTrimReplace="$1~",y("TILDE",`^${a[n.LONETILDE]}${a[n.XRANGEPLAIN]}$`),y("TILDELOOSE",`^${a[n.LONETILDE]}${a[n.XRANGEPLAINLOOSE]}$`),y("LONECARET","(?:\\^)"),y("CARETTRIM",`(\\s*)${a[n.LONECARET]}\\s+`,!0),d.caretTrimReplace="$1^",y("CARET",`^${a[n.LONECARET]}${a[n.XRANGEPLAIN]}$`),y("CARETLOOSE",`^${a[n.LONECARET]}${a[n.XRANGEPLAINLOOSE]}$`),y("COMPARATORLOOSE",`^${a[n.GTLT]}\\s*(${a[n.LOOSEPLAIN]})$|^$`),y("COMPARATOR",`^${a[n.GTLT]}\\s*(${a[n.FULLPLAIN]})$|^$`),y("COMPARATORTRIM",`(\\s*)${a[n.GTLT]}\\s*(${a[n.LOOSEPLAIN]}|${a[n.XRANGEPLAIN]})`,!0),d.comparatorTrimReplace="$1$2$3",y("HYPHENRANGE",`^\\s*(${a[n.XRANGEPLAIN]})\\s+-\\s+(${a[n.XRANGEPLAIN]})\\s*$`),y("HYPHENRANGELOOSE",`^\\s*(${a[n.XRANGEPLAINLOOSE]})\\s+-\\s+(${a[n.XRANGEPLAINLOOSE]})\\s*$`),y("STAR","(<|>)?=?\\s*\\*"),y("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),y("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(xr,xr.exports)),xr.exports}var ii,Zo;function ia(){if(Zo)return ii;Zo=1;const t=Object.freeze({loose:!0}),d=Object.freeze({});return ii=u=>u?typeof u!="object"?t:u:d,ii}var ai,es;function Xl(){if(es)return ai;es=1;const t=/^[0-9]+$/,d=(u,f)=>{const l=t.test(u),r=t.test(f);return l&&r&&(u=+u,f=+f),u===f?0:l&&!r?-1:r&&!l?1:u<f?-1:1};return ai={compareIdentifiers:d,rcompareIdentifiers:(u,f)=>d(f,u)},ai}var oi,ts;function Ge(){if(ts)return oi;ts=1;const t=jr(),{MAX_LENGTH:d,MAX_SAFE_INTEGER:h}=Hr(),{safeRe:u,t:f}=vr(),l=ia(),{compareIdentifiers:r}=Xl();class c{constructor(s,n){if(n=l(n),s instanceof c){if(s.loose===!!n.loose&&s.includePrerelease===!!n.includePrerelease)return s;s=s.version}else if(typeof s!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof s}".`);if(s.length>d)throw new TypeError(`version is longer than ${d} characters`);t("SemVer",s,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const o=s.trim().match(n.loose?u[f.LOOSE]:u[f.FULL]);if(!o)throw new TypeError(`Invalid Version: ${s}`);if(this.raw=s,this.major=+o[1],this.minor=+o[2],this.patch=+o[3],this.major>h||this.major<0)throw new TypeError("Invalid major version");if(this.minor>h||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>h||this.patch<0)throw new TypeError("Invalid patch version");o[4]?this.prerelease=o[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const m=+i;if(m>=0&&m<h)return m}return i}):this.prerelease=[],this.build=o[5]?o[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(s){if(t("SemVer.compare",this.version,this.options,s),!(s instanceof c)){if(typeof s=="string"&&s===this.version)return 0;s=new c(s,this.options)}return s.version===this.version?0:this.compareMain(s)||this.comparePre(s)}compareMain(s){return s instanceof c||(s=new c(s,this.options)),r(this.major,s.major)||r(this.minor,s.minor)||r(this.patch,s.patch)}comparePre(s){if(s instanceof c||(s=new c(s,this.options)),this.prerelease.length&&!s.prerelease.length)return-1;if(!this.prerelease.length&&s.prerelease.length)return 1;if(!this.prerelease.length&&!s.prerelease.length)return 0;let n=0;do{const o=this.prerelease[n],i=s.prerelease[n];if(t("prerelease compare",n,o,i),o===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(o===void 0)return-1;if(o===i)continue;return r(o,i)}while(++n)}compareBuild(s){s instanceof c||(s=new c(s,this.options));let n=0;do{const o=this.build[n],i=s.build[n];if(t("build compare",n,o,i),o===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(o===void 0)return-1;if(o===i)continue;return r(o,i)}while(++n)}inc(s,n,o){if(s.startsWith("pre")){if(!n&&o===!1)throw new Error("invalid increment argument: identifier is empty");if(n){const i=`-${n}`.match(this.options.loose?u[f.PRERELEASELOOSE]:u[f.PRERELEASE]);if(!i||i[1]!==n)throw new Error(`invalid identifier: ${n}`)}}switch(s){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,o);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,o);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,o),this.inc("pre",n,o);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,o),this.inc("pre",n,o);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(o)?1:0;if(this.prerelease.length===0)this.prerelease=[i];else{let m=this.prerelease.length;for(;--m>=0;)typeof this.prerelease[m]=="number"&&(this.prerelease[m]++,m=-2);if(m===-1){if(n===this.prerelease.join(".")&&o===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let m=[n,i];o===!1&&(m=[n]),r(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=m):this.prerelease=m}break}default:throw new Error(`invalid increment argument: ${s}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return oi=c,oi}var si,rs;function kt(){if(rs)return si;rs=1;const t=Ge();return si=(h,u,f=!1)=>{if(h instanceof t)return h;try{return new t(h,u)}catch(l){if(!f)return null;throw l}},si}var li,ns;function Vc(){if(ns)return li;ns=1;const t=kt();return li=(h,u)=>{const f=t(h,u);return f?f.version:null},li}var ui,is;function Yc(){if(is)return ui;is=1;const t=kt();return ui=(h,u)=>{const f=t(h.trim().replace(/^[=v]+/,""),u);return f?f.version:null},ui}var ci,as;function zc(){if(as)return ci;as=1;const t=Ge();return ci=(h,u,f,l,r)=>{typeof f=="string"&&(r=l,l=f,f=void 0);try{return new t(h instanceof t?h.version:h,f).inc(u,l,r).version}catch{return null}},ci}var fi,os;function Xc(){if(os)return fi;os=1;const t=kt();return fi=(h,u)=>{const f=t(h,null,!0),l=t(u,null,!0),r=f.compare(l);if(r===0)return null;const c=r>0,a=c?f:l,s=c?l:f,n=!!a.prerelease.length;if(!!s.prerelease.length&&!n){if(!s.patch&&!s.minor)return"major";if(s.compareMain(a)===0)return s.minor&&!s.patch?"minor":"patch"}const i=n?"pre":"";return f.major!==l.major?i+"major":f.minor!==l.minor?i+"minor":f.patch!==l.patch?i+"patch":"prerelease"},fi}var di,ss;function Kc(){if(ss)return di;ss=1;const t=Ge();return di=(h,u)=>new t(h,u).major,di}var hi,ls;function Jc(){if(ls)return hi;ls=1;const t=Ge();return hi=(h,u)=>new t(h,u).minor,hi}var pi,us;function Qc(){if(us)return pi;us=1;const t=Ge();return pi=(h,u)=>new t(h,u).patch,pi}var mi,cs;function Zc(){if(cs)return mi;cs=1;const t=kt();return mi=(h,u)=>{const f=t(h,u);return f&&f.prerelease.length?f.prerelease:null},mi}var gi,fs;function tt(){if(fs)return gi;fs=1;const t=Ge();return gi=(h,u,f)=>new t(h,f).compare(new t(u,f)),gi}var vi,ds;function ef(){if(ds)return vi;ds=1;const t=tt();return vi=(h,u,f)=>t(u,h,f),vi}var Ei,hs;function tf(){if(hs)return Ei;hs=1;const t=tt();return Ei=(h,u)=>t(h,u,!0),Ei}var yi,ps;function aa(){if(ps)return yi;ps=1;const t=Ge();return yi=(h,u,f)=>{const l=new t(h,f),r=new t(u,f);return l.compare(r)||l.compareBuild(r)},yi}var wi,ms;function rf(){if(ms)return wi;ms=1;const t=aa();return wi=(h,u)=>h.sort((f,l)=>t(f,l,u)),wi}var _i,gs;function nf(){if(gs)return _i;gs=1;const t=aa();return _i=(h,u)=>h.sort((f,l)=>t(l,f,u)),_i}var Si,vs;function Gr(){if(vs)return Si;vs=1;const t=tt();return Si=(h,u,f)=>t(h,u,f)>0,Si}var Ai,Es;function oa(){if(Es)return Ai;Es=1;const t=tt();return Ai=(h,u,f)=>t(h,u,f)<0,Ai}var Ti,ys;function Kl(){if(ys)return Ti;ys=1;const t=tt();return Ti=(h,u,f)=>t(h,u,f)===0,Ti}var Ri,ws;function Jl(){if(ws)return Ri;ws=1;const t=tt();return Ri=(h,u,f)=>t(h,u,f)!==0,Ri}var Ci,_s;function sa(){if(_s)return Ci;_s=1;const t=tt();return Ci=(h,u,f)=>t(h,u,f)>=0,Ci}var bi,Ss;function la(){if(Ss)return bi;Ss=1;const t=tt();return bi=(h,u,f)=>t(h,u,f)<=0,bi}var Pi,As;function Ql(){if(As)return Pi;As=1;const t=Kl(),d=Jl(),h=Gr(),u=sa(),f=oa(),l=la();return Pi=(c,a,s,n)=>{switch(a){case"===":return typeof c=="object"&&(c=c.version),typeof s=="object"&&(s=s.version),c===s;case"!==":return typeof c=="object"&&(c=c.version),typeof s=="object"&&(s=s.version),c!==s;case"":case"=":case"==":return t(c,s,n);case"!=":return d(c,s,n);case">":return h(c,s,n);case">=":return u(c,s,n);case"<":return f(c,s,n);case"<=":return l(c,s,n);default:throw new TypeError(`Invalid operator: ${a}`)}},Pi}var Ii,Ts;function af(){if(Ts)return Ii;Ts=1;const t=Ge(),d=kt(),{safeRe:h,t:u}=vr();return Ii=(l,r)=>{if(l instanceof t)return l;if(typeof l=="number"&&(l=String(l)),typeof l!="string")return null;r=r||{};let c=null;if(!r.rtl)c=l.match(r.includePrerelease?h[u.COERCEFULL]:h[u.COERCE]);else{const m=r.includePrerelease?h[u.COERCERTLFULL]:h[u.COERCERTL];let g;for(;(g=m.exec(l))&&(!c||c.index+c[0].length!==l.length);)(!c||g.index+g[0].length!==c.index+c[0].length)&&(c=g),m.lastIndex=g.index+g[1].length+g[2].length;m.lastIndex=-1}if(c===null)return null;const a=c[2],s=c[3]||"0",n=c[4]||"0",o=r.includePrerelease&&c[5]?`-${c[5]}`:"",i=r.includePrerelease&&c[6]?`+${c[6]}`:"";return d(`${a}.${s}.${n}${o}${i}`,r)},Ii}var Oi,Rs;function of(){if(Rs)return Oi;Rs=1;class t{constructor(){this.max=1e3,this.map=new Map}get(h){const u=this.map.get(h);if(u!==void 0)return this.map.delete(h),this.map.set(h,u),u}delete(h){return this.map.delete(h)}set(h,u){if(!this.delete(h)&&u!==void 0){if(this.map.size>=this.max){const l=this.map.keys().next().value;this.delete(l)}this.map.set(h,u)}return this}}return Oi=t,Oi}var Di,Cs;function rt(){if(Cs)return Di;Cs=1;const t=/\s+/g;class d{constructor(O,F){if(F=f(F),O instanceof d)return O.loose===!!F.loose&&O.includePrerelease===!!F.includePrerelease?O:new d(O.raw,F);if(O instanceof l)return this.raw=O.value,this.set=[[O]],this.formatted=void 0,this;if(this.options=F,this.loose=!!F.loose,this.includePrerelease=!!F.includePrerelease,this.raw=O.trim().replace(t," "),this.set=this.raw.split("||").map($=>this.parseRange($.trim())).filter($=>$.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const $=this.set[0];if(this.set=this.set.filter(J=>!y(J[0])),this.set.length===0)this.set=[$];else if(this.set.length>1){for(const J of this.set)if(J.length===1&&p(J[0])){this.set=[J];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let O=0;O<this.set.length;O++){O>0&&(this.formatted+="||");const F=this.set[O];for(let $=0;$<F.length;$++)$>0&&(this.formatted+=" "),this.formatted+=F[$].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(O){const $=((this.options.includePrerelease&&m)|(this.options.loose&&g))+":"+O,J=u.get($);if(J)return J;const W=this.options.loose,ne=W?a[s.HYPHENRANGELOOSE]:a[s.HYPHENRANGE];O=O.replace(ne,x(this.options.includePrerelease)),r("hyphen replace",O),O=O.replace(a[s.COMPARATORTRIM],n),r("comparator trim",O),O=O.replace(a[s.TILDETRIM],o),r("tilde trim",O),O=O.replace(a[s.CARETTRIM],i),r("caret trim",O);let ce=O.split(" ").map(K=>C(K,this.options)).join(" ").split(/\s+/).map(K=>L(K,this.options));W&&(ce=ce.filter(K=>(r("loose invalid filter",K,this.options),!!K.match(a[s.COMPARATORLOOSE])))),r("range list",ce);const ue=new Map,ie=ce.map(K=>new l(K,this.options));for(const K of ie){if(y(K))return[K];ue.set(K.value,K)}ue.size>1&&ue.has("")&&ue.delete("");const Ae=[...ue.values()];return u.set($,Ae),Ae}intersects(O,F){if(!(O instanceof d))throw new TypeError("a Range is required");return this.set.some($=>S($,F)&&O.set.some(J=>S(J,F)&&$.every(W=>J.every(ne=>W.intersects(ne,F)))))}test(O){if(!O)return!1;if(typeof O=="string")try{O=new c(O,this.options)}catch{return!1}for(let F=0;F<this.set.length;F++)if(k(this.set[F],O,this.options))return!0;return!1}}Di=d;const h=of(),u=new h,f=ia(),l=Wr(),r=jr(),c=Ge(),{safeRe:a,t:s,comparatorTrimReplace:n,tildeTrimReplace:o,caretTrimReplace:i}=vr(),{FLAG_INCLUDE_PRERELEASE:m,FLAG_LOOSE:g}=Hr(),y=D=>D.value==="<0.0.0-0",p=D=>D.value==="",S=(D,O)=>{let F=!0;const $=D.slice();let J=$.pop();for(;F&&$.length;)F=$.every(W=>J.intersects(W,O)),J=$.pop();return F},C=(D,O)=>(r("comp",D,O),D=R(D,O),r("caret",D),D=I(D,O),r("tildes",D),D=T(D,O),r("xrange",D),D=q(D,O),r("stars",D),D),P=D=>!D||D.toLowerCase()==="x"||D==="*",I=(D,O)=>D.trim().split(/\s+/).map(F=>M(F,O)).join(" "),M=(D,O)=>{const F=O.loose?a[s.TILDELOOSE]:a[s.TILDE];return D.replace(F,($,J,W,ne,ce)=>{r("tilde",D,$,J,W,ne,ce);let ue;return P(J)?ue="":P(W)?ue=`>=${J}.0.0 <${+J+1}.0.0-0`:P(ne)?ue=`>=${J}.${W}.0 <${J}.${+W+1}.0-0`:ce?(r("replaceTilde pr",ce),ue=`>=${J}.${W}.${ne}-${ce} <${J}.${+W+1}.0-0`):ue=`>=${J}.${W}.${ne} <${J}.${+W+1}.0-0`,r("tilde return",ue),ue})},R=(D,O)=>D.trim().split(/\s+/).map(F=>w(F,O)).join(" "),w=(D,O)=>{r("caret",D,O);const F=O.loose?a[s.CARETLOOSE]:a[s.CARET],$=O.includePrerelease?"-0":"";return D.replace(F,(J,W,ne,ce,ue)=>{r("caret",D,J,W,ne,ce,ue);let ie;return P(W)?ie="":P(ne)?ie=`>=${W}.0.0${$} <${+W+1}.0.0-0`:P(ce)?W==="0"?ie=`>=${W}.${ne}.0${$} <${W}.${+ne+1}.0-0`:ie=`>=${W}.${ne}.0${$} <${+W+1}.0.0-0`:ue?(r("replaceCaret pr",ue),W==="0"?ne==="0"?ie=`>=${W}.${ne}.${ce}-${ue} <${W}.${ne}.${+ce+1}-0`:ie=`>=${W}.${ne}.${ce}-${ue} <${W}.${+ne+1}.0-0`:ie=`>=${W}.${ne}.${ce}-${ue} <${+W+1}.0.0-0`):(r("no pr"),W==="0"?ne==="0"?ie=`>=${W}.${ne}.${ce}${$} <${W}.${ne}.${+ce+1}-0`:ie=`>=${W}.${ne}.${ce}${$} <${W}.${+ne+1}.0-0`:ie=`>=${W}.${ne}.${ce} <${+W+1}.0.0-0`),r("caret return",ie),ie})},T=(D,O)=>(r("replaceXRanges",D,O),D.split(/\s+/).map(F=>E(F,O)).join(" ")),E=(D,O)=>{D=D.trim();const F=O.loose?a[s.XRANGELOOSE]:a[s.XRANGE];return D.replace(F,($,J,W,ne,ce,ue)=>{r("xRange",D,$,J,W,ne,ce,ue);const ie=P(W),Ae=ie||P(ne),K=Ae||P(ce),Ee=K;return J==="="&&Ee&&(J=""),ue=O.includePrerelease?"-0":"",ie?J===">"||J==="<"?$="<0.0.0-0":$="*":J&&Ee?(Ae&&(ne=0),ce=0,J===">"?(J=">=",Ae?(W=+W+1,ne=0,ce=0):(ne=+ne+1,ce=0)):J==="<="&&(J="<",Ae?W=+W+1:ne=+ne+1),J==="<"&&(ue="-0"),$=`${J+W}.${ne}.${ce}${ue}`):Ae?$=`>=${W}.0.0${ue} <${+W+1}.0.0-0`:K&&($=`>=${W}.${ne}.0${ue} <${W}.${+ne+1}.0-0`),r("xRange return",$),$})},q=(D,O)=>(r("replaceStars",D,O),D.trim().replace(a[s.STAR],"")),L=(D,O)=>(r("replaceGTE0",D,O),D.trim().replace(a[O.includePrerelease?s.GTE0PRE:s.GTE0],"")),x=D=>(O,F,$,J,W,ne,ce,ue,ie,Ae,K,Ee)=>(P($)?F="":P(J)?F=`>=${$}.0.0${D?"-0":""}`:P(W)?F=`>=${$}.${J}.0${D?"-0":""}`:ne?F=`>=${F}`:F=`>=${F}${D?"-0":""}`,P(ie)?ue="":P(Ae)?ue=`<${+ie+1}.0.0-0`:P(K)?ue=`<${ie}.${+Ae+1}.0-0`:Ee?ue=`<=${ie}.${Ae}.${K}-${Ee}`:D?ue=`<${ie}.${Ae}.${+K+1}-0`:ue=`<=${ue}`,`${F} ${ue}`.trim()),k=(D,O,F)=>{for(let $=0;$<D.length;$++)if(!D[$].test(O))return!1;if(O.prerelease.length&&!F.includePrerelease){for(let $=0;$<D.length;$++)if(r(D[$].semver),D[$].semver!==l.ANY&&D[$].semver.prerelease.length>0){const J=D[$].semver;if(J.major===O.major&&J.minor===O.minor&&J.patch===O.patch)return!0}return!1}return!0};return Di}var Ni,bs;function Wr(){if(bs)return Ni;bs=1;const t=Symbol("SemVer ANY");class d{static get ANY(){return t}constructor(n,o){if(o=h(o),n instanceof d){if(n.loose===!!o.loose)return n;n=n.value}n=n.trim().split(/\s+/).join(" "),r("comparator",n,o),this.options=o,this.loose=!!o.loose,this.parse(n),this.semver===t?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}parse(n){const o=this.options.loose?u[f.COMPARATORLOOSE]:u[f.COMPARATOR],i=n.match(o);if(!i)throw new TypeError(`Invalid comparator: ${n}`);this.operator=i[1]!==void 0?i[1]:"",this.operator==="="&&(this.operator=""),i[2]?this.semver=new c(i[2],this.options.loose):this.semver=t}toString(){return this.value}test(n){if(r("Comparator.test",n,this.options.loose),this.semver===t||n===t)return!0;if(typeof n=="string")try{n=new c(n,this.options)}catch{return!1}return l(n,this.operator,this.semver,this.options)}intersects(n,o){if(!(n instanceof d))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new a(n.value,o).test(this.value):n.operator===""?n.value===""?!0:new a(this.value,o).test(n.semver):(o=h(o),o.includePrerelease&&(this.value==="<0.0.0-0"||n.value==="<0.0.0-0")||!o.includePrerelease&&(this.value.startsWith("<0.0.0")||n.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&n.operator.startsWith(">")||this.operator.startsWith("<")&&n.operator.startsWith("<")||this.semver.version===n.semver.version&&this.operator.includes("=")&&n.operator.includes("=")||l(this.semver,"<",n.semver,o)&&this.operator.startsWith(">")&&n.operator.startsWith("<")||l(this.semver,">",n.semver,o)&&this.operator.startsWith("<")&&n.operator.startsWith(">")))}}Ni=d;const h=ia(),{safeRe:u,t:f}=vr(),l=Ql(),r=jr(),c=Ge(),a=rt();return Ni}var Fi,Ps;function Vr(){if(Ps)return Fi;Ps=1;const t=rt();return Fi=(h,u,f)=>{try{u=new t(u,f)}catch{return!1}return u.test(h)},Fi}var xi,Is;function sf(){if(Is)return xi;Is=1;const t=rt();return xi=(h,u)=>new t(h,u).set.map(f=>f.map(l=>l.value).join(" ").trim().split(" ")),xi}var Li,Os;function lf(){if(Os)return Li;Os=1;const t=Ge(),d=rt();return Li=(u,f,l)=>{let r=null,c=null,a=null;try{a=new d(f,l)}catch{return null}return u.forEach(s=>{a.test(s)&&(!r||c.compare(s)===-1)&&(r=s,c=new t(r,l))}),r},Li}var Ui,Ds;function uf(){if(Ds)return Ui;Ds=1;const t=Ge(),d=rt();return Ui=(u,f,l)=>{let r=null,c=null,a=null;try{a=new d(f,l)}catch{return null}return u.forEach(s=>{a.test(s)&&(!r||c.compare(s)===1)&&(r=s,c=new t(r,l))}),r},Ui}var $i,Ns;function cf(){if(Ns)return $i;Ns=1;const t=Ge(),d=rt(),h=Gr();return $i=(f,l)=>{f=new d(f,l);let r=new t("0.0.0");if(f.test(r)||(r=new t("0.0.0-0"),f.test(r)))return r;r=null;for(let c=0;c<f.set.length;++c){const a=f.set[c];let s=null;a.forEach(n=>{const o=new t(n.semver.version);switch(n.operator){case">":o.prerelease.length===0?o.patch++:o.prerelease.push(0),o.raw=o.format();case"":case">=":(!s||h(o,s))&&(s=o);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${n.operator}`)}}),s&&(!r||h(r,s))&&(r=s)}return r&&f.test(r)?r:null},$i}var ki,Fs;function ff(){if(Fs)return ki;Fs=1;const t=rt();return ki=(h,u)=>{try{return new t(h,u).range||"*"}catch{return null}},ki}var qi,xs;function ua(){if(xs)return qi;xs=1;const t=Ge(),d=Wr(),{ANY:h}=d,u=rt(),f=Vr(),l=Gr(),r=oa(),c=la(),a=sa();return qi=(n,o,i,m)=>{n=new t(n,m),o=new u(o,m);let g,y,p,S,C;switch(i){case">":g=l,y=c,p=r,S=">",C=">=";break;case"<":g=r,y=a,p=l,S="<",C="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(f(n,o,m))return!1;for(let P=0;P<o.set.length;++P){const I=o.set[P];let M=null,R=null;if(I.forEach(w=>{w.semver===h&&(w=new d(">=0.0.0")),M=M||w,R=R||w,g(w.semver,M.semver,m)?M=w:p(w.semver,R.semver,m)&&(R=w)}),M.operator===S||M.operator===C||(!R.operator||R.operator===S)&&y(n,R.semver))return!1;if(R.operator===C&&p(n,R.semver))return!1}return!0},qi}var Mi,Ls;function df(){if(Ls)return Mi;Ls=1;const t=ua();return Mi=(h,u,f)=>t(h,u,">",f),Mi}var Bi,Us;function hf(){if(Us)return Bi;Us=1;const t=ua();return Bi=(h,u,f)=>t(h,u,"<",f),Bi}var Hi,$s;function pf(){if($s)return Hi;$s=1;const t=rt();return Hi=(h,u,f)=>(h=new t(h,f),u=new t(u,f),h.intersects(u,f)),Hi}var ji,ks;function mf(){if(ks)return ji;ks=1;const t=Vr(),d=tt();return ji=(h,u,f)=>{const l=[];let r=null,c=null;const a=h.sort((i,m)=>d(i,m,f));for(const i of a)t(i,u,f)?(c=i,r||(r=i)):(c&&l.push([r,c]),c=null,r=null);r&&l.push([r,null]);const s=[];for(const[i,m]of l)i===m?s.push(i):!m&&i===a[0]?s.push("*"):m?i===a[0]?s.push(`<=${m}`):s.push(`${i} - ${m}`):s.push(`>=${i}`);const n=s.join(" || "),o=typeof u.raw=="string"?u.raw:String(u);return n.length<o.length?n:u},ji}var Gi,qs;function gf(){if(qs)return Gi;qs=1;const t=rt(),d=Wr(),{ANY:h}=d,u=Vr(),f=tt(),l=(o,i,m={})=>{if(o===i)return!0;o=new t(o,m),i=new t(i,m);let g=!1;e:for(const y of o.set){for(const p of i.set){const S=a(y,p,m);if(g=g||S!==null,S)continue e}if(g)return!1}return!0},r=[new d(">=0.0.0-0")],c=[new d(">=0.0.0")],a=(o,i,m)=>{if(o===i)return!0;if(o.length===1&&o[0].semver===h){if(i.length===1&&i[0].semver===h)return!0;m.includePrerelease?o=r:o=c}if(i.length===1&&i[0].semver===h){if(m.includePrerelease)return!0;i=c}const g=new Set;let y,p;for(const T of o)T.operator===">"||T.operator===">="?y=s(y,T,m):T.operator==="<"||T.operator==="<="?p=n(p,T,m):g.add(T.semver);if(g.size>1)return null;let S;if(y&&p){if(S=f(y.semver,p.semver,m),S>0)return null;if(S===0&&(y.operator!==">="||p.operator!=="<="))return null}for(const T of g){if(y&&!u(T,String(y),m)||p&&!u(T,String(p),m))return null;for(const E of i)if(!u(T,String(E),m))return!1;return!0}let C,P,I,M,R=p&&!m.includePrerelease&&p.semver.prerelease.length?p.semver:!1,w=y&&!m.includePrerelease&&y.semver.prerelease.length?y.semver:!1;R&&R.prerelease.length===1&&p.operator==="<"&&R.prerelease[0]===0&&(R=!1);for(const T of i){if(M=M||T.operator===">"||T.operator===">=",I=I||T.operator==="<"||T.operator==="<=",y){if(w&&T.semver.prerelease&&T.semver.prerelease.length&&T.semver.major===w.major&&T.semver.minor===w.minor&&T.semver.patch===w.patch&&(w=!1),T.operator===">"||T.operator===">="){if(C=s(y,T,m),C===T&&C!==y)return!1}else if(y.operator===">="&&!u(y.semver,String(T),m))return!1}if(p){if(R&&T.semver.prerelease&&T.semver.prerelease.length&&T.semver.major===R.major&&T.semver.minor===R.minor&&T.semver.patch===R.patch&&(R=!1),T.operator==="<"||T.operator==="<="){if(P=n(p,T,m),P===T&&P!==p)return!1}else if(p.operator==="<="&&!u(p.semver,String(T),m))return!1}if(!T.operator&&(p||y)&&S!==0)return!1}return!(y&&I&&!p&&S!==0||p&&M&&!y&&S!==0||w||R)},s=(o,i,m)=>{if(!o)return i;const g=f(o.semver,i.semver,m);return g>0?o:g<0||i.operator===">"&&o.operator===">="?i:o},n=(o,i,m)=>{if(!o)return i;const g=f(o.semver,i.semver,m);return g<0?o:g>0||i.operator==="<"&&o.operator==="<="?i:o};return Gi=l,Gi}var Wi,Ms;function Zl(){if(Ms)return Wi;Ms=1;const t=vr(),d=Hr(),h=Ge(),u=Xl(),f=kt(),l=Vc(),r=Yc(),c=zc(),a=Xc(),s=Kc(),n=Jc(),o=Qc(),i=Zc(),m=tt(),g=ef(),y=tf(),p=aa(),S=rf(),C=nf(),P=Gr(),I=oa(),M=Kl(),R=Jl(),w=sa(),T=la(),E=Ql(),q=af(),L=Wr(),x=rt(),k=Vr(),D=sf(),O=lf(),F=uf(),$=cf(),J=ff(),W=ua(),ne=df(),ce=hf(),ue=pf(),ie=mf(),Ae=gf();return Wi={parse:f,valid:l,clean:r,inc:c,diff:a,major:s,minor:n,patch:o,prerelease:i,compare:m,rcompare:g,compareLoose:y,compareBuild:p,sort:S,rsort:C,gt:P,lt:I,eq:M,neq:R,gte:w,lte:T,cmp:E,coerce:q,Comparator:L,Range:x,satisfies:k,toComparators:D,maxSatisfying:O,minSatisfying:F,minVersion:$,validRange:J,outside:W,gtr:ne,ltr:ce,intersects:ue,simplifyRange:ie,subset:Ae,SemVer:h,re:t.re,src:t.src,tokens:t.t,SEMVER_SPEC_VERSION:d.SEMVER_SPEC_VERSION,RELEASE_TYPES:d.RELEASE_TYPES,compareIdentifiers:u.compareIdentifiers,rcompareIdentifiers:u.rcompareIdentifiers},Wi}var Nt={},fr={exports:{}};fr.exports;var Bs;function vf(){return Bs||(Bs=1,(function(t,d){var h=200,u="__lodash_hash_undefined__",f=1,l=2,r=9007199254740991,c="[object Arguments]",a="[object Array]",s="[object AsyncFunction]",n="[object Boolean]",o="[object Date]",i="[object Error]",m="[object Function]",g="[object GeneratorFunction]",y="[object Map]",p="[object Number]",S="[object Null]",C="[object Object]",P="[object Promise]",I="[object Proxy]",M="[object RegExp]",R="[object Set]",w="[object String]",T="[object Symbol]",E="[object Undefined]",q="[object WeakMap]",L="[object ArrayBuffer]",x="[object DataView]",k="[object Float32Array]",D="[object Float64Array]",O="[object Int8Array]",F="[object Int16Array]",$="[object Int32Array]",J="[object Uint8Array]",W="[object Uint8ClampedArray]",ne="[object Uint16Array]",ce="[object Uint32Array]",ue=/[\\^$.*+?()[\]{}|]/g,ie=/^\[object .+?Constructor\]$/,Ae=/^(?:0|[1-9]\d*)$/,K={};K[k]=K[D]=K[O]=K[F]=K[$]=K[J]=K[W]=K[ne]=K[ce]=!0,K[c]=K[a]=K[L]=K[n]=K[x]=K[o]=K[i]=K[m]=K[y]=K[p]=K[C]=K[M]=K[R]=K[w]=K[q]=!1;var Ee=typeof et=="object"&&et&&et.Object===Object&&et,A=typeof self=="object"&&self&&self.Object===Object&&self,v=Ee||A||Function("return this")(),H=d&&!d.nodeType&&d,N=H&&!0&&t&&!t.nodeType&&t,le=N&&N.exports===H,me=le&&Ee.process,pe=(function(){try{return me&&me.binding&&me.binding("util")}catch{}})(),_e=pe&&pe.isTypedArray;function ye(b,U){for(var z=-1,se=b==null?0:b.length,Oe=0,Se=[];++z<se;){var Fe=b[z];U(Fe,z,b)&&(Se[Oe++]=Fe)}return Se}function xe(b,U){for(var z=-1,se=U.length,Oe=b.length;++z<se;)b[Oe+z]=U[z];return b}function be(b,U){for(var z=-1,se=b==null?0:b.length;++z<se;)if(U(b[z],z,b))return!0;return!1}function qe(b,U){for(var z=-1,se=Array(b);++z<b;)se[z]=U(z);return se}function mt(b){return function(U){return b(U)}}function at(b,U){return b.has(U)}function e(b,U){return b?.[U]}function B(b){var U=-1,z=Array(b.size);return b.forEach(function(se,Oe){z[++U]=[Oe,se]}),z}function G(b,U){return function(z){return b(U(z))}}function re(b){var U=-1,z=Array(b.size);return b.forEach(function(se){z[++U]=se}),z}var V=Array.prototype,te=Function.prototype,Z=Object.prototype,ae=v["__core-js_shared__"],ge=te.toString,ve=Z.hasOwnProperty,Te=(function(){var b=/[^.]+$/.exec(ae&&ae.keys&&ae.keys.IE_PROTO||"");return b?"Symbol(src)_1."+b:""})(),de=Z.toString,Le=RegExp("^"+ge.call(ve).replace(ue,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_=le?v.Buffer:void 0,j=v.Symbol,X=v.Uint8Array,Y=Z.propertyIsEnumerable,Q=V.splice,ee=j?j.toStringTag:void 0,fe=Object.getOwnPropertySymbols,oe=_?_.isBuffer:void 0,he=G(Object.keys,Object),we=Ot(v,"DataView"),Pe=Ot(v,"Map"),Ne=Ot(v,"Promise"),Re=Ot(v,"Set"),It=Ot(v,"WeakMap"),Qe=Ot(Object,"create"),gt=yt(we),uu=yt(Pe),cu=yt(Ne),fu=yt(Re),du=yt(It),da=j?j.prototype:void 0,Yr=da?da.valueOf:void 0;function vt(b){var U=-1,z=b==null?0:b.length;for(this.clear();++U<z;){var se=b[U];this.set(se[0],se[1])}}function hu(){this.__data__=Qe?Qe(null):{},this.size=0}function pu(b){var U=this.has(b)&&delete this.__data__[b];return this.size-=U?1:0,U}function mu(b){var U=this.__data__;if(Qe){var z=U[b];return z===u?void 0:z}return ve.call(U,b)?U[b]:void 0}function gu(b){var U=this.__data__;return Qe?U[b]!==void 0:ve.call(U,b)}function vu(b,U){var z=this.__data__;return this.size+=this.has(b)?0:1,z[b]=Qe&&U===void 0?u:U,this}vt.prototype.clear=hu,vt.prototype.delete=pu,vt.prototype.get=mu,vt.prototype.has=gu,vt.prototype.set=vu;function ot(b){var U=-1,z=b==null?0:b.length;for(this.clear();++U<z;){var se=b[U];this.set(se[0],se[1])}}function Eu(){this.__data__=[],this.size=0}function yu(b){var U=this.__data__,z=yr(U,b);if(z<0)return!1;var se=U.length-1;return z==se?U.pop():Q.call(U,z,1),--this.size,!0}function wu(b){var U=this.__data__,z=yr(U,b);return z<0?void 0:U[z][1]}function _u(b){return yr(this.__data__,b)>-1}function Su(b,U){var z=this.__data__,se=yr(z,b);return se<0?(++this.size,z.push([b,U])):z[se][1]=U,this}ot.prototype.clear=Eu,ot.prototype.delete=yu,ot.prototype.get=wu,ot.prototype.has=_u,ot.prototype.set=Su;function Et(b){var U=-1,z=b==null?0:b.length;for(this.clear();++U<z;){var se=b[U];this.set(se[0],se[1])}}function Au(){this.size=0,this.__data__={hash:new vt,map:new(Pe||ot),string:new vt}}function Tu(b){var U=wr(this,b).delete(b);return this.size-=U?1:0,U}function Ru(b){return wr(this,b).get(b)}function Cu(b){return wr(this,b).has(b)}function bu(b,U){var z=wr(this,b),se=z.size;return z.set(b,U),this.size+=z.size==se?0:1,this}Et.prototype.clear=Au,Et.prototype.delete=Tu,Et.prototype.get=Ru,Et.prototype.has=Cu,Et.prototype.set=bu;function Er(b){var U=-1,z=b==null?0:b.length;for(this.__data__=new Et;++U<z;)this.add(b[U])}function Pu(b){return this.__data__.set(b,u),this}function Iu(b){return this.__data__.has(b)}Er.prototype.add=Er.prototype.push=Pu,Er.prototype.has=Iu;function ut(b){var U=this.__data__=new ot(b);this.size=U.size}function Ou(){this.__data__=new ot,this.size=0}function Du(b){var U=this.__data__,z=U.delete(b);return this.size=U.size,z}function Nu(b){return this.__data__.get(b)}function Fu(b){return this.__data__.has(b)}function xu(b,U){var z=this.__data__;if(z instanceof ot){var se=z.__data__;if(!Pe||se.length<h-1)return se.push([b,U]),this.size=++z.size,this;z=this.__data__=new Et(se)}return z.set(b,U),this.size=z.size,this}ut.prototype.clear=Ou,ut.prototype.delete=Du,ut.prototype.get=Nu,ut.prototype.has=Fu,ut.prototype.set=xu;function Lu(b,U){var z=_r(b),se=!z&&Ku(b),Oe=!z&&!se&&zr(b),Se=!z&&!se&&!Oe&&_a(b),Fe=z||se||Oe||Se,Ue=Fe?qe(b.length,String):[],$e=Ue.length;for(var De in b)ve.call(b,De)&&!(Fe&&(De=="length"||Oe&&(De=="offset"||De=="parent")||Se&&(De=="buffer"||De=="byteLength"||De=="byteOffset")||Wu(De,$e)))&&Ue.push(De);return Ue}function yr(b,U){for(var z=b.length;z--;)if(va(b[z][0],U))return z;return-1}function Uu(b,U,z){var se=U(b);return _r(b)?se:xe(se,z(b))}function Mt(b){return b==null?b===void 0?E:S:ee&&ee in Object(b)?ju(b):Xu(b)}function ha(b){return Bt(b)&&Mt(b)==c}function pa(b,U,z,se,Oe){return b===U?!0:b==null||U==null||!Bt(b)&&!Bt(U)?b!==b&&U!==U:$u(b,U,z,se,pa,Oe)}function $u(b,U,z,se,Oe,Se){var Fe=_r(b),Ue=_r(U),$e=Fe?a:ct(b),De=Ue?a:ct(U);$e=$e==c?C:$e,De=De==c?C:De;var Ve=$e==C,Ze=De==C,Me=$e==De;if(Me&&zr(b)){if(!zr(U))return!1;Fe=!0,Ve=!1}if(Me&&!Ve)return Se||(Se=new ut),Fe||_a(b)?ma(b,U,z,se,Oe,Se):Bu(b,U,$e,z,se,Oe,Se);if(!(z&f)){var ze=Ve&&ve.call(b,"__wrapped__"),Xe=Ze&&ve.call(U,"__wrapped__");if(ze||Xe){var ft=ze?b.value():b,st=Xe?U.value():U;return Se||(Se=new ut),Oe(ft,st,z,se,Se)}}return Me?(Se||(Se=new ut),Hu(b,U,z,se,Oe,Se)):!1}function ku(b){if(!wa(b)||Yu(b))return!1;var U=Ea(b)?Le:ie;return U.test(yt(b))}function qu(b){return Bt(b)&&ya(b.length)&&!!K[Mt(b)]}function Mu(b){if(!zu(b))return he(b);var U=[];for(var z in Object(b))ve.call(b,z)&&z!="constructor"&&U.push(z);return U}function ma(b,U,z,se,Oe,Se){var Fe=z&f,Ue=b.length,$e=U.length;if(Ue!=$e&&!(Fe&&$e>Ue))return!1;var De=Se.get(b);if(De&&Se.get(U))return De==U;var Ve=-1,Ze=!0,Me=z&l?new Er:void 0;for(Se.set(b,U),Se.set(U,b);++Ve<Ue;){var ze=b[Ve],Xe=U[Ve];if(se)var ft=Fe?se(Xe,ze,Ve,U,b,Se):se(ze,Xe,Ve,b,U,Se);if(ft!==void 0){if(ft)continue;Ze=!1;break}if(Me){if(!be(U,function(st,wt){if(!at(Me,wt)&&(ze===st||Oe(ze,st,z,se,Se)))return Me.push(wt)})){Ze=!1;break}}else if(!(ze===Xe||Oe(ze,Xe,z,se,Se))){Ze=!1;break}}return Se.delete(b),Se.delete(U),Ze}function Bu(b,U,z,se,Oe,Se,Fe){switch(z){case x:if(b.byteLength!=U.byteLength||b.byteOffset!=U.byteOffset)return!1;b=b.buffer,U=U.buffer;case L:return!(b.byteLength!=U.byteLength||!Se(new X(b),new X(U)));case n:case o:case p:return va(+b,+U);case i:return b.name==U.name&&b.message==U.message;case M:case w:return b==U+"";case y:var Ue=B;case R:var $e=se&f;if(Ue||(Ue=re),b.size!=U.size&&!$e)return!1;var De=Fe.get(b);if(De)return De==U;se|=l,Fe.set(b,U);var Ve=ma(Ue(b),Ue(U),se,Oe,Se,Fe);return Fe.delete(b),Ve;case T:if(Yr)return Yr.call(b)==Yr.call(U)}return!1}function Hu(b,U,z,se,Oe,Se){var Fe=z&f,Ue=ga(b),$e=Ue.length,De=ga(U),Ve=De.length;if($e!=Ve&&!Fe)return!1;for(var Ze=$e;Ze--;){var Me=Ue[Ze];if(!(Fe?Me in U:ve.call(U,Me)))return!1}var ze=Se.get(b);if(ze&&Se.get(U))return ze==U;var Xe=!0;Se.set(b,U),Se.set(U,b);for(var ft=Fe;++Ze<$e;){Me=Ue[Ze];var st=b[Me],wt=U[Me];if(se)var Sa=Fe?se(wt,st,Me,U,b,Se):se(st,wt,Me,b,U,Se);if(!(Sa===void 0?st===wt||Oe(st,wt,z,se,Se):Sa)){Xe=!1;break}ft||(ft=Me=="constructor")}if(Xe&&!ft){var Sr=b.constructor,Ar=U.constructor;Sr!=Ar&&"constructor"in b&&"constructor"in U&&!(typeof Sr=="function"&&Sr instanceof Sr&&typeof Ar=="function"&&Ar instanceof Ar)&&(Xe=!1)}return Se.delete(b),Se.delete(U),Xe}function ga(b){return Uu(b,Zu,Gu)}function wr(b,U){var z=b.__data__;return Vu(U)?z[typeof U=="string"?"string":"hash"]:z.map}function Ot(b,U){var z=e(b,U);return ku(z)?z:void 0}function ju(b){var U=ve.call(b,ee),z=b[ee];try{b[ee]=void 0;var se=!0}catch{}var Oe=de.call(b);return se&&(U?b[ee]=z:delete b[ee]),Oe}var Gu=fe?function(b){return b==null?[]:(b=Object(b),ye(fe(b),function(U){return Y.call(b,U)}))}:ec,ct=Mt;(we&&ct(new we(new ArrayBuffer(1)))!=x||Pe&&ct(new Pe)!=y||Ne&&ct(Ne.resolve())!=P||Re&&ct(new Re)!=R||It&&ct(new It)!=q)&&(ct=function(b){var U=Mt(b),z=U==C?b.constructor:void 0,se=z?yt(z):"";if(se)switch(se){case gt:return x;case uu:return y;case cu:return P;case fu:return R;case du:return q}return U});function Wu(b,U){return U=U??r,!!U&&(typeof b=="number"||Ae.test(b))&&b>-1&&b%1==0&&b<U}function Vu(b){var U=typeof b;return U=="string"||U=="number"||U=="symbol"||U=="boolean"?b!=="__proto__":b===null}function Yu(b){return!!Te&&Te in b}function zu(b){var U=b&&b.constructor,z=typeof U=="function"&&U.prototype||Z;return b===z}function Xu(b){return de.call(b)}function yt(b){if(b!=null){try{return ge.call(b)}catch{}try{return b+""}catch{}}return""}function va(b,U){return b===U||b!==b&&U!==U}var Ku=ha((function(){return arguments})())?ha:function(b){return Bt(b)&&ve.call(b,"callee")&&!Y.call(b,"callee")},_r=Array.isArray;function Ju(b){return b!=null&&ya(b.length)&&!Ea(b)}var zr=oe||tc;function Qu(b,U){return pa(b,U)}function Ea(b){if(!wa(b))return!1;var U=Mt(b);return U==m||U==g||U==s||U==I}function ya(b){return typeof b=="number"&&b>-1&&b%1==0&&b<=r}function wa(b){var U=typeof b;return b!=null&&(U=="object"||U=="function")}function Bt(b){return b!=null&&typeof b=="object"}var _a=_e?mt(_e):qu;function Zu(b){return Ju(b)?Lu(b):Mu(b)}function ec(){return[]}function tc(){return!1}t.exports=Qu})(fr,fr.exports)),fr.exports}var Hs;function Ef(){if(Hs)return Nt;Hs=1,Object.defineProperty(Nt,"__esModule",{value:!0}),Nt.DownloadedUpdateHelper=void 0,Nt.createTempUpdateFile=c;const t=pr,d=Ke,h=vf(),u=pt(),f=Ie;let l=class{constructor(s){this.cacheDir=s,this._file=null,this._packageFile=null,this.versionInfo=null,this.fileInfo=null,this._downloadedFileInfo=null}get downloadedFileInfo(){return this._downloadedFileInfo}get file(){return this._file}get packageFile(){return this._packageFile}get cacheDirForPendingUpdate(){return f.join(this.cacheDir,"pending")}async validateDownloadedPath(s,n,o,i){if(this.versionInfo!=null&&this.file===s&&this.fileInfo!=null)return h(this.versionInfo,n)&&h(this.fileInfo.info,o.info)&&await(0,u.pathExists)(s)?s:null;const m=await this.getValidCachedUpdateFile(o,i);return m===null?null:(i.info(`Update has already been downloaded to ${s}).`),this._file=m,m)}async setDownloadedFile(s,n,o,i,m,g){this._file=s,this._packageFile=n,this.versionInfo=o,this.fileInfo=i,this._downloadedFileInfo={fileName:m,sha512:i.info.sha512,isAdminRightsRequired:i.info.isAdminRightsRequired===!0},g&&await(0,u.outputJson)(this.getUpdateInfoFile(),this._downloadedFileInfo)}async clear(){this._file=null,this._packageFile=null,this.versionInfo=null,this.fileInfo=null,await this.cleanCacheDirForPendingUpdate()}async cleanCacheDirForPendingUpdate(){try{await(0,u.emptyDir)(this.cacheDirForPendingUpdate)}catch{}}async getValidCachedUpdateFile(s,n){const o=this.getUpdateInfoFile();if(!await(0,u.pathExists)(o))return null;let m;try{m=await(0,u.readJson)(o)}catch(S){let C="No cached update info available";return S.code!=="ENOENT"&&(await this.cleanCacheDirForPendingUpdate(),C+=` (error on read: ${S.message})`),n.info(C),null}if(!(m?.fileName!==null))return n.warn("Cached update info is corrupted: no fileName, directory for cached update will be cleaned"),await this.cleanCacheDirForPendingUpdate(),null;if(s.info.sha512!==m.sha512)return n.info(`Cached update sha512 checksum doesn't match the latest available update. New update must be downloaded. Cached: ${m.sha512}, expected: ${s.info.sha512}. Directory for cached update will be cleaned`),await this.cleanCacheDirForPendingUpdate(),null;const y=f.join(this.cacheDirForPendingUpdate,m.fileName);if(!await(0,u.pathExists)(y))return n.info("Cached update file doesn't exist"),null;const p=await r(y);return s.info.sha512!==p?(n.warn(`Sha512 checksum doesn't match the latest available update. New update must be downloaded. Cached: ${p}, expected: ${s.info.sha512}`),await this.cleanCacheDirForPendingUpdate(),null):(this._downloadedFileInfo=m,y)}getUpdateInfoFile(){return f.join(this.cacheDirForPendingUpdate,"update-info.json")}};Nt.DownloadedUpdateHelper=l;function r(a,s="sha512",n="base64",o){return new Promise((i,m)=>{const g=(0,t.createHash)(s);g.on("error",m).setEncoding(n),(0,d.createReadStream)(a,{...o,highWaterMark:1024*1024}).on("error",m).on("end",()=>{g.end(),i(g.read())}).pipe(g,{end:!1})})}async function c(a,s,n){let o=0,i=f.join(s,a);for(let m=0;m<3;m++)try{return await(0,u.unlink)(i),i}catch(g){if(g.code==="ENOENT")return i;n.warn(`Error on remove temp update file: ${g}`),i=f.join(s,`${o++}-${a}`)}return i}return Nt}var Yt={},Lr={},js;function yf(){if(js)return Lr;js=1,Object.defineProperty(Lr,"__esModule",{value:!0}),Lr.getAppCacheDir=h;const t=Ie,d=qr;function h(){const u=(0,d.homedir)();let f;return process.platform==="win32"?f=process.env.LOCALAPPDATA||t.join(u,"AppData","Local"):process.platform==="darwin"?f=t.join(u,"Library","Caches"):f=process.env.XDG_CACHE_HOME||t.join(u,".cache"),f}return Lr}var Gs;function wf(){if(Gs)return Yt;Gs=1,Object.defineProperty(Yt,"__esModule",{value:!0}),Yt.ElectronAppAdapter=void 0;const t=Ie,d=yf();let h=class{constructor(f=Ce.app){this.app=f}whenReady(){return this.app.whenReady()}get version(){return this.app.getVersion()}get name(){return this.app.getName()}get isPackaged(){return this.app.isPackaged===!0}get appUpdateConfigPath(){return this.isPackaged?t.join(process.resourcesPath,"app-update.yml"):t.join(this.app.getAppPath(),"dev-app-update.yml")}get userDataPath(){return this.app.getPath("userData")}get baseCachePath(){return(0,d.getAppCacheDir)()}quit(){this.app.quit()}relaunch(){this.app.relaunch()}onQuit(f){this.app.once("quit",(l,r)=>f(r))}};return Yt.ElectronAppAdapter=h,Yt}var Vi={},Ws;function _f(){return Ws||(Ws=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ElectronHttpExecutor=t.NET_SESSION_NAME=void 0,t.getNetSession=h;const d=ke();t.NET_SESSION_NAME="electron-updater";function h(){return Ce.session.fromPartition(t.NET_SESSION_NAME,{cache:!1})}class u extends d.HttpExecutor{constructor(l){super(),this.proxyLoginCallback=l,this.cachedSession=null}async download(l,r,c){return await c.cancellationToken.createPromise((a,s,n)=>{const o={headers:c.headers||void 0,redirect:"manual"};(0,d.configureRequestUrl)(l,o),(0,d.configureRequestOptions)(o),this.doDownload(o,{destination:r,options:c,onCancel:n,callback:i=>{i==null?a(r):s(i)},responseHandler:null},0)})}createRequest(l,r){l.headers&&l.headers.Host&&(l.host=l.headers.Host,delete l.headers.Host),this.cachedSession==null&&(this.cachedSession=h());const c=Ce.net.request({...l,session:this.cachedSession});return c.on("response",r),this.proxyLoginCallback!=null&&c.on("login",this.proxyLoginCallback),c}addRedirectHandlers(l,r,c,a,s){l.on("redirect",(n,o,i)=>{l.abort(),a>this.maxRedirects?c(this.createMaxRedirectError()):s(d.HttpExecutor.prepareRedirectUrlOptions(i,r))})}}t.ElectronHttpExecutor=u})(Vi)),Vi}var zt={},Rt={},Yi,Vs;function Sf(){if(Vs)return Yi;Vs=1;var t="[object Symbol]",d=/[\\^$.*+?()[\]{}|]/g,h=RegExp(d.source),u=typeof et=="object"&&et&&et.Object===Object&&et,f=typeof self=="object"&&self&&self.Object===Object&&self,l=u||f||Function("return this")(),r=Object.prototype,c=r.toString,a=l.Symbol,s=a?a.prototype:void 0,n=s?s.toString:void 0;function o(p){if(typeof p=="string")return p;if(m(p))return n?n.call(p):"";var S=p+"";return S=="0"&&1/p==-1/0?"-0":S}function i(p){return!!p&&typeof p=="object"}function m(p){return typeof p=="symbol"||i(p)&&c.call(p)==t}function g(p){return p==null?"":o(p)}function y(p){return p=g(p),p&&h.test(p)?p.replace(d,"\\$&"):p}return Yi=y,Yi}var Ys;function bt(){if(Ys)return Rt;Ys=1,Object.defineProperty(Rt,"__esModule",{value:!0}),Rt.newBaseUrl=h,Rt.newUrlFromBase=u,Rt.getChannelFilename=f,Rt.blockmapFiles=l;const t=Lt,d=Sf();function h(r){const c=new t.URL(r);return c.pathname.endsWith("/")||(c.pathname+="/"),c}function u(r,c,a=!1){const s=new t.URL(r,c),n=c.search;return n!=null&&n.length!==0?s.search=n:a&&(s.search=`noCache=${Date.now().toString(32)}`),s}function f(r){return`${r}.yml`}function l(r,c,a){const s=u(`${r.pathname}.blockmap`,r);return[u(`${r.pathname.replace(new RegExp(d(a),"g"),c)}.blockmap`,r),s]}return Rt}var lt={},zs;function Je(){if(zs)return lt;zs=1,Object.defineProperty(lt,"__esModule",{value:!0}),lt.Provider=void 0,lt.findFile=f,lt.parseUpdateInfo=l,lt.getFileList=r,lt.resolveFiles=c;const t=ke(),d=na(),h=bt();let u=class{constructor(s){this.runtimeOptions=s,this.requestHeaders=null,this.executor=s.executor}get isUseMultipleRangeRequest(){return this.runtimeOptions.isUseMultipleRangeRequest!==!1}getChannelFilePrefix(){if(this.runtimeOptions.platform==="linux"){const s=process.env.TEST_UPDATER_ARCH||process.arch;return"-linux"+(s==="x64"?"":`-${s}`)}else return this.runtimeOptions.platform==="darwin"?"-mac":""}getDefaultChannelName(){return this.getCustomChannelName("latest")}getCustomChannelName(s){return`${s}${this.getChannelFilePrefix()}`}get fileExtraDownloadHeaders(){return null}setRequestHeaders(s){this.requestHeaders=s}httpRequest(s,n,o){return this.executor.request(this.createRequestOptions(s,n),o)}createRequestOptions(s,n){const o={};return this.requestHeaders==null?n!=null&&(o.headers=n):o.headers=n==null?this.requestHeaders:{...this.requestHeaders,...n},(0,t.configureRequestUrl)(s,o),o}};lt.Provider=u;function f(a,s,n){if(a.length===0)throw(0,t.newError)("No files provided","ERR_UPDATER_NO_FILES_PROVIDED");const o=a.find(i=>i.url.pathname.toLowerCase().endsWith(`.${s}`));return o??(n==null?a[0]:a.find(i=>!n.some(m=>i.url.pathname.toLowerCase().endsWith(`.${m}`))))}function l(a,s,n){if(a==null)throw(0,t.newError)(`Cannot parse update info from ${s} in the latest release artifacts (${n}): rawData: null`,"ERR_UPDATER_INVALID_UPDATE_INFO");let o;try{o=(0,d.load)(a)}catch(i){throw(0,t.newError)(`Cannot parse update info from ${s} in the latest release artifacts (${n}): ${i.stack||i.message}, rawData: ${a}`,"ERR_UPDATER_INVALID_UPDATE_INFO")}return o}function r(a){const s=a.files;if(s!=null&&s.length>0)return s;if(a.path!=null)return[{url:a.path,sha2:a.sha2,sha512:a.sha512}];throw(0,t.newError)(`No files provided: ${(0,t.safeStringifyJson)(a)}`,"ERR_UPDATER_NO_FILES_PROVIDED")}function c(a,s,n=o=>o){const i=r(a).map(y=>{if(y.sha2==null&&y.sha512==null)throw(0,t.newError)(`Update info doesn't contain nor sha256 neither sha512 checksum: ${(0,t.safeStringifyJson)(y)}`,"ERR_UPDATER_NO_CHECKSUM");return{url:(0,h.newUrlFromBase)(n(y.url),s),info:y}}),m=a.packages,g=m==null?null:m[process.arch]||m.ia32;return g!=null&&(i[0].packageInfo={...g,path:(0,h.newUrlFromBase)(n(g.path),s).href}),i}return lt}var Xs;function eu(){if(Xs)return zt;Xs=1,Object.defineProperty(zt,"__esModule",{value:!0}),zt.GenericProvider=void 0;const t=ke(),d=bt(),h=Je();let u=class extends h.Provider{constructor(l,r,c){super(c),this.configuration=l,this.updater=r,this.baseUrl=(0,d.newBaseUrl)(this.configuration.url)}get channel(){const l=this.updater.channel||this.configuration.channel;return l==null?this.getDefaultChannelName():this.getCustomChannelName(l)}async getLatestVersion(){const l=(0,d.getChannelFilename)(this.channel),r=(0,d.newUrlFromBase)(l,this.baseUrl,this.updater.isAddNoCacheQuery);for(let c=0;;c++)try{return(0,h.parseUpdateInfo)(await this.httpRequest(r),l,r)}catch(a){if(a instanceof t.HttpError&&a.statusCode===404)throw(0,t.newError)(`Cannot find channel "${l}" update info: ${a.stack||a.message}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND");if(a.code==="ECONNREFUSED"&&c<3){await new Promise((s,n)=>{try{setTimeout(s,1e3*c)}catch(o){n(o)}});continue}throw a}}resolveFiles(l){return(0,h.resolveFiles)(l,this.baseUrl)}};return zt.GenericProvider=u,zt}var Xt={},Kt={},Ks;function Af(){if(Ks)return Kt;Ks=1,Object.defineProperty(Kt,"__esModule",{value:!0}),Kt.BitbucketProvider=void 0;const t=ke(),d=bt(),h=Je();let u=class extends h.Provider{constructor(l,r,c){super({...c,isUseMultipleRangeRequest:!1}),this.configuration=l,this.updater=r;const{owner:a,slug:s}=l;this.baseUrl=(0,d.newBaseUrl)(`https://api.bitbucket.org/2.0/repositories/${a}/${s}/downloads`)}get channel(){return this.updater.channel||this.configuration.channel||"latest"}async getLatestVersion(){const l=new t.CancellationToken,r=(0,d.getChannelFilename)(this.getCustomChannelName(this.channel)),c=(0,d.newUrlFromBase)(r,this.baseUrl,this.updater.isAddNoCacheQuery);try{const a=await this.httpRequest(c,void 0,l);return(0,h.parseUpdateInfo)(a,r,c)}catch(a){throw(0,t.newError)(`Unable to find latest version on ${this.toString()}, please ensure release exists: ${a.stack||a.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}resolveFiles(l){return(0,h.resolveFiles)(l,this.baseUrl)}toString(){const{owner:l,slug:r}=this.configuration;return`Bitbucket (owner: ${l}, slug: ${r}, channel: ${this.channel})`}};return Kt.BitbucketProvider=u,Kt}var ht={},Js;function tu(){if(Js)return ht;Js=1,Object.defineProperty(ht,"__esModule",{value:!0}),ht.GitHubProvider=ht.BaseGitHubProvider=void 0,ht.computeReleaseNotes=s;const t=ke(),d=Zl(),h=Lt,u=bt(),f=Je(),l=/\/tag\/([^/]+)$/;class r extends f.Provider{constructor(o,i,m){super({...m,isUseMultipleRangeRequest:!1}),this.options=o,this.baseUrl=(0,u.newBaseUrl)((0,t.githubUrl)(o,i));const g=i==="github.com"?"api.github.com":i;this.baseApiUrl=(0,u.newBaseUrl)((0,t.githubUrl)(o,g))}computeGithubBasePath(o){const i=this.options.host;return i&&!["github.com","api.github.com"].includes(i)?`/api/v3${o}`:o}}ht.BaseGitHubProvider=r;let c=class extends r{constructor(o,i,m){super(o,"github.com",m),this.options=o,this.updater=i}get channel(){const o=this.updater.channel||this.options.channel;return o==null?this.getDefaultChannelName():this.getCustomChannelName(o)}async getLatestVersion(){var o,i,m,g,y;const p=new t.CancellationToken,S=await this.httpRequest((0,u.newUrlFromBase)(`${this.basePath}.atom`,this.baseUrl),{accept:"application/xml, application/atom+xml, text/xml, */*"},p),C=(0,t.parseXml)(S);let P=C.element("entry",!1,"No published versions on GitHub"),I=null;try{if(this.updater.allowPrerelease){const q=((o=this.updater)===null||o===void 0?void 0:o.channel)||((i=d.prerelease(this.updater.currentVersion))===null||i===void 0?void 0:i[0])||null;if(q===null)I=l.exec(P.element("link").attribute("href"))[1];else for(const L of C.getElements("entry")){const x=l.exec(L.element("link").attribute("href"));if(x===null)continue;const k=x[1],D=((m=d.prerelease(k))===null||m===void 0?void 0:m[0])||null,O=!q||["alpha","beta"].includes(q),F=D!==null&&!["alpha","beta"].includes(String(D));if(O&&!F&&!(q==="beta"&&D==="alpha")){I=k;break}if(D&&D===q){I=k;break}}}else{I=await this.getLatestTagName(p);for(const q of C.getElements("entry"))if(l.exec(q.element("link").attribute("href"))[1]===I){P=q;break}}}catch(q){throw(0,t.newError)(`Cannot parse releases feed: ${q.stack||q.message},
XML:
${S}`,"ERR_UPDATER_INVALID_RELEASE_FEED")}if(I==null)throw(0,t.newError)("No published versions on GitHub","ERR_UPDATER_NO_PUBLISHED_VERSIONS");let M,R="",w="";const T=async q=>{R=(0,u.getChannelFilename)(q),w=(0,u.newUrlFromBase)(this.getBaseDownloadPath(String(I),R),this.baseUrl);const L=this.createRequestOptions(w);try{return await this.executor.request(L,p)}catch(x){throw x instanceof t.HttpError&&x.statusCode===404?(0,t.newError)(`Cannot find ${R} in the latest release artifacts (${w}): ${x.stack||x.message}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND"):x}};try{let q=this.channel;this.updater.allowPrerelease&&(!((g=d.prerelease(I))===null||g===void 0)&&g[0])&&(q=this.getCustomChannelName(String((y=d.prerelease(I))===null||y===void 0?void 0:y[0]))),M=await T(q)}catch(q){if(this.updater.allowPrerelease)M=await T(this.getDefaultChannelName());else throw q}const E=(0,f.parseUpdateInfo)(M,R,w);return E.releaseName==null&&(E.releaseName=P.elementValueOrEmpty("title")),E.releaseNotes==null&&(E.releaseNotes=s(this.updater.currentVersion,this.updater.fullChangelog,C,P)),{tag:I,...E}}async getLatestTagName(o){const i=this.options,m=i.host==null||i.host==="github.com"?(0,u.newUrlFromBase)(`${this.basePath}/latest`,this.baseUrl):new h.URL(`${this.computeGithubBasePath(`/repos/${i.owner}/${i.repo}/releases`)}/latest`,this.baseApiUrl);try{const g=await this.httpRequest(m,{Accept:"application/json"},o);return g==null?null:JSON.parse(g).tag_name}catch(g){throw(0,t.newError)(`Unable to find latest version on GitHub (${m}), please ensure a production release exists: ${g.stack||g.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}get basePath(){return`/${this.options.owner}/${this.options.repo}/releases`}resolveFiles(o){return(0,f.resolveFiles)(o,this.baseUrl,i=>this.getBaseDownloadPath(o.tag,i.replace(/ /g,"-")))}getBaseDownloadPath(o,i){return`${this.basePath}/download/${o}/${i}`}};ht.GitHubProvider=c;function a(n){const o=n.elementValueOrEmpty("content");return o==="No content."?"":o}function s(n,o,i,m){if(!o)return a(m);const g=[];for(const y of i.getElements("entry")){const p=/\/tag\/v?([^/]+)$/.exec(y.element("link").attribute("href"))[1];d.lt(n,p)&&g.push({version:p,note:a(y)})}return g.sort((y,p)=>d.rcompare(y.version,p.version))}return ht}var Jt={},Qs;function Tf(){if(Qs)return Jt;Qs=1,Object.defineProperty(Jt,"__esModule",{value:!0}),Jt.KeygenProvider=void 0;const t=ke(),d=bt(),h=Je();let u=class extends h.Provider{constructor(l,r,c){super({...c,isUseMultipleRangeRequest:!1}),this.configuration=l,this.updater=r,this.defaultHostname="api.keygen.sh";const a=this.configuration.host||this.defaultHostname;this.baseUrl=(0,d.newBaseUrl)(`https://${a}/v1/accounts/${this.configuration.account}/artifacts?product=${this.configuration.product}`)}get channel(){return this.updater.channel||this.configuration.channel||"stable"}async getLatestVersion(){const l=new t.CancellationToken,r=(0,d.getChannelFilename)(this.getCustomChannelName(this.channel)),c=(0,d.newUrlFromBase)(r,this.baseUrl,this.updater.isAddNoCacheQuery);try{const a=await this.httpRequest(c,{Accept:"application/vnd.api+json","Keygen-Version":"1.1"},l);return(0,h.parseUpdateInfo)(a,r,c)}catch(a){throw(0,t.newError)(`Unable to find latest version on ${this.toString()}, please ensure release exists: ${a.stack||a.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}resolveFiles(l){return(0,h.resolveFiles)(l,this.baseUrl)}toString(){const{account:l,product:r,platform:c}=this.configuration;return`Keygen (account: ${l}, product: ${r}, platform: ${c}, channel: ${this.channel})`}};return Jt.KeygenProvider=u,Jt}var Qt={},Zs;function Rf(){if(Zs)return Qt;Zs=1,Object.defineProperty(Qt,"__esModule",{value:!0}),Qt.PrivateGitHubProvider=void 0;const t=ke(),d=na(),h=Ie,u=Lt,f=bt(),l=tu(),r=Je();let c=class extends l.BaseGitHubProvider{constructor(s,n,o,i){super(s,"api.github.com",i),this.updater=n,this.token=o}createRequestOptions(s,n){const o=super.createRequestOptions(s,n);return o.redirect="manual",o}async getLatestVersion(){const s=new t.CancellationToken,n=(0,f.getChannelFilename)(this.getDefaultChannelName()),o=await this.getLatestVersionInfo(s),i=o.assets.find(y=>y.name===n);if(i==null)throw(0,t.newError)(`Cannot find ${n} in the release ${o.html_url||o.name}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND");const m=new u.URL(i.url);let g;try{g=(0,d.load)(await this.httpRequest(m,this.configureHeaders("application/octet-stream"),s))}catch(y){throw y instanceof t.HttpError&&y.statusCode===404?(0,t.newError)(`Cannot find ${n} in the latest release artifacts (${m}): ${y.stack||y.message}`,"ERR_UPDATER_CHANNEL_FILE_NOT_FOUND"):y}return g.assets=o.assets,g}get fileExtraDownloadHeaders(){return this.configureHeaders("application/octet-stream")}configureHeaders(s){return{accept:s,authorization:`token ${this.token}`}}async getLatestVersionInfo(s){const n=this.updater.allowPrerelease;let o=this.basePath;n||(o=`${o}/latest`);const i=(0,f.newUrlFromBase)(o,this.baseUrl);try{const m=JSON.parse(await this.httpRequest(i,this.configureHeaders("application/vnd.github.v3+json"),s));return n?m.find(g=>g.prerelease)||m[0]:m}catch(m){throw(0,t.newError)(`Unable to find latest version on GitHub (${i}), please ensure a production release exists: ${m.stack||m.message}`,"ERR_UPDATER_LATEST_VERSION_NOT_FOUND")}}get basePath(){return this.computeGithubBasePath(`/repos/${this.options.owner}/${this.options.repo}/releases`)}resolveFiles(s){return(0,r.getFileList)(s).map(n=>{const o=h.posix.basename(n.url).replace(/ /g,"-"),i=s.assets.find(m=>m!=null&&m.name===o);if(i==null)throw(0,t.newError)(`Cannot find asset "${o}" in: ${JSON.stringify(s.assets,null,2)}`,"ERR_UPDATER_ASSET_NOT_FOUND");return{url:new u.URL(i.url),info:n}})}};return Qt.PrivateGitHubProvider=c,Qt}var el;function Cf(){if(el)return Xt;el=1,Object.defineProperty(Xt,"__esModule",{value:!0}),Xt.isUrlProbablySupportMultiRangeRequests=r,Xt.createClient=c;const t=ke(),d=Af(),h=eu(),u=tu(),f=Tf(),l=Rf();function r(a){return!a.includes("s3.amazonaws.com")}function c(a,s,n){if(typeof a=="string")throw(0,t.newError)("Please pass PublishConfiguration object","ERR_UPDATER_INVALID_PROVIDER_CONFIGURATION");const o=a.provider;switch(o){case"github":{const i=a,m=(i.private?process.env.GH_TOKEN||process.env.GITHUB_TOKEN:null)||i.token;return m==null?new u.GitHubProvider(i,s,n):new l.PrivateGitHubProvider(i,s,m,n)}case"bitbucket":return new d.BitbucketProvider(a,s,n);case"keygen":return new f.KeygenProvider(a,s,n);case"s3":case"spaces":return new h.GenericProvider({provider:"generic",url:(0,t.getS3LikeProviderBaseUrl)(a),channel:a.channel||null},s,{...n,isUseMultipleRangeRequest:!1});case"generic":{const i=a;return new h.GenericProvider(i,s,{...n,isUseMultipleRangeRequest:i.useMultipleRangeRequest!==!1&&r(i.url)})}case"custom":{const i=a,m=i.updateProvider;if(!m)throw(0,t.newError)("Custom provider not specified","ERR_UPDATER_INVALID_PROVIDER_CONFIGURATION");return new m(i,s,n)}default:throw(0,t.newError)(`Unsupported provider: ${o}`,"ERR_UPDATER_UNSUPPORTED_PROVIDER")}}return Xt}var Zt={},er={},Ft={},xt={},tl;function ca(){if(tl)return xt;tl=1,Object.defineProperty(xt,"__esModule",{value:!0}),xt.OperationKind=void 0,xt.computeOperations=d;var t;(function(r){r[r.COPY=0]="COPY",r[r.DOWNLOAD=1]="DOWNLOAD"})(t||(xt.OperationKind=t={}));function d(r,c,a){const s=l(r.files),n=l(c.files);let o=null;const i=c.files[0],m=[],g=i.name,y=s.get(g);if(y==null)throw new Error(`no file ${g} in old blockmap`);const p=n.get(g);let S=0;const{checksumToOffset:C,checksumToOldSize:P}=f(s.get(g),y.offset,a);let I=i.offset;for(let M=0;M<p.checksums.length;I+=p.sizes[M],M++){const R=p.sizes[M],w=p.checksums[M];let T=C.get(w);T!=null&&P.get(w)!==R&&(a.warn(`Checksum ("${w}") matches, but size differs (old: ${P.get(w)}, new: ${R})`),T=void 0),T===void 0?(S++,o!=null&&o.kind===t.DOWNLOAD&&o.end===I?o.end+=R:(o={kind:t.DOWNLOAD,start:I,end:I+R},u(o,m,w,M))):o!=null&&o.kind===t.COPY&&o.end===T?o.end+=R:(o={kind:t.COPY,start:T,end:T+R},u(o,m,w,M))}return S>0&&a.info(`File${i.name==="file"?"":" "+i.name} has ${S} changed blocks`),m}const h=process.env.DIFFERENTIAL_DOWNLOAD_PLAN_BUILDER_VALIDATE_RANGES==="true";function u(r,c,a,s){if(h&&c.length!==0){const n=c[c.length-1];if(n.kind===r.kind&&r.start<n.end&&r.start>n.start){const o=[n.start,n.end,r.start,r.end].reduce((i,m)=>i<m?i:m);throw new Error(`operation (block index: ${s}, checksum: ${a}, kind: ${t[r.kind]}) overlaps previous operation (checksum: ${a}):
abs: ${n.start} until ${n.end} and ${r.start} until ${r.end}
rel: ${n.start-o} until ${n.end-o} and ${r.start-o} until ${r.end-o}`)}}c.push(r)}function f(r,c,a){const s=new Map,n=new Map;let o=c;for(let i=0;i<r.checksums.length;i++){const m=r.checksums[i],g=r.sizes[i],y=n.get(m);if(y===void 0)s.set(m,o),n.set(m,g);else if(a.debug!=null){const p=y===g?"(same size)":`(size: ${y}, this size: ${g})`;a.debug(`${m} duplicated in blockmap ${p}, it doesn't lead to broken differential downloader, just corresponding block will be skipped)`)}o+=g}return{checksumToOffset:s,checksumToOldSize:n}}function l(r){const c=new Map;for(const a of r)c.set(a.name,a);return c}return xt}var rl;function ru(){if(rl)return Ft;rl=1,Object.defineProperty(Ft,"__esModule",{value:!0}),Ft.DataSplitter=void 0,Ft.copyData=r;const t=ke(),d=Ke,h=hr,u=ca(),f=Buffer.from(`\r
\r
`);var l;(function(a){a[a.INIT=0]="INIT",a[a.HEADER=1]="HEADER",a[a.BODY=2]="BODY"})(l||(l={}));function r(a,s,n,o,i){const m=(0,d.createReadStream)("",{fd:n,autoClose:!1,start:a.start,end:a.end-1});m.on("error",o),m.once("end",i),m.pipe(s,{end:!1})}let c=class extends h.Writable{constructor(s,n,o,i,m,g){super(),this.out=s,this.options=n,this.partIndexToTaskIndex=o,this.partIndexToLength=m,this.finishHandler=g,this.partIndex=-1,this.headerListBuffer=null,this.readState=l.INIT,this.ignoreByteCount=0,this.remainingPartDataCount=0,this.actualPartLength=0,this.boundaryLength=i.length+4,this.ignoreByteCount=this.boundaryLength-2}get isFinished(){return this.partIndex===this.partIndexToLength.length}_write(s,n,o){if(this.isFinished){console.error(`Trailing ignored data: ${s.length} bytes`);return}this.handleData(s).then(o).catch(o)}async handleData(s){let n=0;if(this.ignoreByteCount!==0&&this.remainingPartDataCount!==0)throw(0,t.newError)("Internal error","ERR_DATA_SPLITTER_BYTE_COUNT_MISMATCH");if(this.ignoreByteCount>0){const o=Math.min(this.ignoreByteCount,s.length);this.ignoreByteCount-=o,n=o}else if(this.remainingPartDataCount>0){const o=Math.min(this.remainingPartDataCount,s.length);this.remainingPartDataCount-=o,await this.processPartData(s,0,o),n=o}if(n!==s.length){if(this.readState===l.HEADER){const o=this.searchHeaderListEnd(s,n);if(o===-1)return;n=o,this.readState=l.BODY,this.headerListBuffer=null}for(;;){if(this.readState===l.BODY)this.readState=l.INIT;else{this.partIndex++;let g=this.partIndexToTaskIndex.get(this.partIndex);if(g==null)if(this.isFinished)g=this.options.end;else throw(0,t.newError)("taskIndex is null","ERR_DATA_SPLITTER_TASK_INDEX_IS_NULL");const y=this.partIndex===0?this.options.start:this.partIndexToTaskIndex.get(this.partIndex-1)+1;if(y<g)await this.copyExistingData(y,g);else if(y>g)throw(0,t.newError)("prevTaskIndex must be < taskIndex","ERR_DATA_SPLITTER_TASK_INDEX_ASSERT_FAILED");if(this.isFinished){this.onPartEnd(),this.finishHandler();return}if(n=this.searchHeaderListEnd(s,n),n===-1){this.readState=l.HEADER;return}}const o=this.partIndexToLength[this.partIndex],i=n+o,m=Math.min(i,s.length);if(await this.processPartStarted(s,n,m),this.remainingPartDataCount=o-(m-n),this.remainingPartDataCount>0)return;if(n=i+this.boundaryLength,n>=s.length){this.ignoreByteCount=this.boundaryLength-(s.length-i);return}}}}copyExistingData(s,n){return new Promise((o,i)=>{const m=()=>{if(s===n){o();return}const g=this.options.tasks[s];if(g.kind!==u.OperationKind.COPY){i(new Error("Task kind must be COPY"));return}r(g,this.out,this.options.oldFileFd,i,()=>{s++,m()})};m()})}searchHeaderListEnd(s,n){const o=s.indexOf(f,n);if(o!==-1)return o+f.length;const i=n===0?s:s.slice(n);return this.headerListBuffer==null?this.headerListBuffer=i:this.headerListBuffer=Buffer.concat([this.headerListBuffer,i]),-1}onPartEnd(){const s=this.partIndexToLength[this.partIndex-1];if(this.actualPartLength!==s)throw(0,t.newError)(`Expected length: ${s} differs from actual: ${this.actualPartLength}`,"ERR_DATA_SPLITTER_LENGTH_MISMATCH");this.actualPartLength=0}processPartStarted(s,n,o){return this.partIndex!==0&&this.onPartEnd(),this.processPartData(s,n,o)}processPartData(s,n,o){this.actualPartLength+=o-n;const i=this.out;return i.write(n===0&&s.length===o?s:s.slice(n,o))?Promise.resolve():new Promise((m,g)=>{i.on("error",g),i.once("drain",()=>{i.removeListener("error",g),m()})})}};return Ft.DataSplitter=c,Ft}var tr={},nl;function bf(){if(nl)return tr;nl=1,Object.defineProperty(tr,"__esModule",{value:!0}),tr.executeTasksUsingMultipleRangeRequests=u,tr.checkIsRangesSupported=l;const t=ke(),d=ru(),h=ca();function u(r,c,a,s,n){const o=i=>{if(i>=c.length){r.fileMetadataBuffer!=null&&a.write(r.fileMetadataBuffer),a.end();return}const m=i+1e3;f(r,{tasks:c,start:i,end:Math.min(c.length,m),oldFileFd:s},a,()=>o(m),n)};return o}function f(r,c,a,s,n){let o="bytes=",i=0;const m=new Map,g=[];for(let S=c.start;S<c.end;S++){const C=c.tasks[S];C.kind===h.OperationKind.DOWNLOAD&&(o+=`${C.start}-${C.end-1}, `,m.set(i,S),i++,g.push(C.end-C.start))}if(i<=1){const S=C=>{if(C>=c.end){s();return}const P=c.tasks[C++];if(P.kind===h.OperationKind.COPY)(0,d.copyData)(P,a,c.oldFileFd,n,()=>S(C));else{const I=r.createRequestOptions();I.headers.Range=`bytes=${P.start}-${P.end-1}`;const M=r.httpExecutor.createRequest(I,R=>{l(R,n)&&(R.pipe(a,{end:!1}),R.once("end",()=>S(C)))});r.httpExecutor.addErrorAndTimeoutHandlers(M,n),M.end()}};S(c.start);return}const y=r.createRequestOptions();y.headers.Range=o.substring(0,o.length-2);const p=r.httpExecutor.createRequest(y,S=>{if(!l(S,n))return;const C=(0,t.safeGetHeader)(S,"content-type"),P=/^multipart\/.+?(?:; boundary=(?:(?:"(.+)")|(?:([^\s]+))))$/i.exec(C);if(P==null){n(new Error(`Content-Type "multipart/byteranges" is expected, but got "${C}"`));return}const I=new d.DataSplitter(a,c,m,P[1]||P[2],g,s);I.on("error",n),S.pipe(I),S.on("end",()=>{setTimeout(()=>{p.abort(),n(new Error("Response ends without calling any handlers"))},1e4)})});r.httpExecutor.addErrorAndTimeoutHandlers(p,n),p.end()}function l(r,c){if(r.statusCode>=400)return c((0,t.createHttpError)(r)),!1;if(r.statusCode!==206){const a=(0,t.safeGetHeader)(r,"accept-ranges");if(a==null||a==="none")return c(new Error(`Server doesn't support Accept-Ranges (response code ${r.statusCode})`)),!1}return!0}return tr}var rr={},il;function Pf(){if(il)return rr;il=1,Object.defineProperty(rr,"__esModule",{value:!0}),rr.ProgressDifferentialDownloadCallbackTransform=void 0;const t=hr;var d;(function(u){u[u.COPY=0]="COPY",u[u.DOWNLOAD=1]="DOWNLOAD"})(d||(d={}));let h=class extends t.Transform{constructor(f,l,r){super(),this.progressDifferentialDownloadInfo=f,this.cancellationToken=l,this.onProgress=r,this.start=Date.now(),this.transferred=0,this.delta=0,this.expectedBytes=0,this.index=0,this.operationType=d.COPY,this.nextUpdate=this.start+1e3}_transform(f,l,r){if(this.cancellationToken.cancelled){r(new Error("cancelled"),null);return}if(this.operationType==d.COPY){r(null,f);return}this.transferred+=f.length,this.delta+=f.length;const c=Date.now();c>=this.nextUpdate&&this.transferred!==this.expectedBytes&&this.transferred!==this.progressDifferentialDownloadInfo.grandTotal&&(this.nextUpdate=c+1e3,this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.progressDifferentialDownloadInfo.grandTotal*100,bytesPerSecond:Math.round(this.transferred/((c-this.start)/1e3))}),this.delta=0),r(null,f)}beginFileCopy(){this.operationType=d.COPY}beginRangeDownload(){this.operationType=d.DOWNLOAD,this.expectedBytes+=this.progressDifferentialDownloadInfo.expectedByteCounts[this.index++]}endRangeDownload(){this.transferred!==this.progressDifferentialDownloadInfo.grandTotal&&this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:this.transferred/this.progressDifferentialDownloadInfo.grandTotal*100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))})}_flush(f){if(this.cancellationToken.cancelled){f(new Error("cancelled"));return}this.onProgress({total:this.progressDifferentialDownloadInfo.grandTotal,delta:this.delta,transferred:this.transferred,percent:100,bytesPerSecond:Math.round(this.transferred/((Date.now()-this.start)/1e3))}),this.delta=0,this.transferred=0,f(null)}};return rr.ProgressDifferentialDownloadCallbackTransform=h,rr}var al;function nu(){if(al)return er;al=1,Object.defineProperty(er,"__esModule",{value:!0}),er.DifferentialDownloader=void 0;const t=ke(),d=pt(),h=Ke,u=ru(),f=Lt,l=ca(),r=bf(),c=Pf();let a=class{constructor(i,m,g){this.blockAwareFileInfo=i,this.httpExecutor=m,this.options=g,this.fileMetadataBuffer=null,this.logger=g.logger}createRequestOptions(){const i={headers:{...this.options.requestHeaders,accept:"*/*"}};return(0,t.configureRequestUrl)(this.options.newUrl,i),(0,t.configureRequestOptions)(i),i}doDownload(i,m){if(i.version!==m.version)throw new Error(`version is different (${i.version} - ${m.version}), full download is required`);const g=this.logger,y=(0,l.computeOperations)(i,m,g);g.debug!=null&&g.debug(JSON.stringify(y,null,2));let p=0,S=0;for(const P of y){const I=P.end-P.start;P.kind===l.OperationKind.DOWNLOAD?p+=I:S+=I}const C=this.blockAwareFileInfo.size;if(p+S+(this.fileMetadataBuffer==null?0:this.fileMetadataBuffer.length)!==C)throw new Error(`Internal error, size mismatch: downloadSize: ${p}, copySize: ${S}, newSize: ${C}`);return g.info(`Full: ${s(C)}, To download: ${s(p)} (${Math.round(p/(C/100))}%)`),this.downloadFile(y)}downloadFile(i){const m=[],g=()=>Promise.all(m.map(y=>(0,d.close)(y.descriptor).catch(p=>{this.logger.error(`cannot close file "${y.path}": ${p}`)})));return this.doDownloadFile(i,m).then(g).catch(y=>g().catch(p=>{try{this.logger.error(`cannot close files: ${p}`)}catch(S){try{console.error(S)}catch{}}throw y}).then(()=>{throw y}))}async doDownloadFile(i,m){const g=await(0,d.open)(this.options.oldFile,"r");m.push({descriptor:g,path:this.options.oldFile});const y=await(0,d.open)(this.options.newFile,"w");m.push({descriptor:y,path:this.options.newFile});const p=(0,h.createWriteStream)(this.options.newFile,{fd:y});await new Promise((S,C)=>{const P=[];let I;if(!this.options.isUseMultipleRangeRequest&&this.options.onProgress){const x=[];let k=0;for(const O of i)O.kind===l.OperationKind.DOWNLOAD&&(x.push(O.end-O.start),k+=O.end-O.start);const D={expectedByteCounts:x,grandTotal:k};I=new c.ProgressDifferentialDownloadCallbackTransform(D,this.options.cancellationToken,this.options.onProgress),P.push(I)}const M=new t.DigestTransform(this.blockAwareFileInfo.sha512);M.isValidateOnEnd=!1,P.push(M),p.on("finish",()=>{p.close(()=>{m.splice(1,1);try{M.validate()}catch(x){C(x);return}S(void 0)})}),P.push(p);let R=null;for(const x of P)x.on("error",C),R==null?R=x:R=R.pipe(x);const w=P[0];let T;if(this.options.isUseMultipleRangeRequest){T=(0,r.executeTasksUsingMultipleRangeRequests)(this,i,w,g,C),T(0);return}let E=0,q=null;this.logger.info(`Differential download: ${this.options.newUrl}`);const L=this.createRequestOptions();L.redirect="manual",T=x=>{var k,D;if(x>=i.length){this.fileMetadataBuffer!=null&&w.write(this.fileMetadataBuffer),w.end();return}const O=i[x++];if(O.kind===l.OperationKind.COPY){I&&I.beginFileCopy(),(0,u.copyData)(O,w,g,C,()=>T(x));return}const F=`bytes=${O.start}-${O.end-1}`;L.headers.range=F,(D=(k=this.logger)===null||k===void 0?void 0:k.debug)===null||D===void 0||D.call(k,`download range: ${F}`),I&&I.beginRangeDownload();const $=this.httpExecutor.createRequest(L,J=>{J.on("error",C),J.on("aborted",()=>{C(new Error("response has been aborted by the server"))}),J.statusCode>=400&&C((0,t.createHttpError)(J)),J.pipe(w,{end:!1}),J.once("end",()=>{I&&I.endRangeDownload(),++E===100?(E=0,setTimeout(()=>T(x),1e3)):T(x)})});$.on("redirect",(J,W,ne)=>{this.logger.info(`Redirect to ${n(ne)}`),q=ne,(0,t.configureRequestUrl)(new f.URL(q),L),$.followRedirect()}),this.httpExecutor.addErrorAndTimeoutHandlers($,C),$.end()},T(0)})}async readRemoteBytes(i,m){const g=Buffer.allocUnsafe(m+1-i),y=this.createRequestOptions();y.headers.range=`bytes=${i}-${m}`;let p=0;if(await this.request(y,S=>{S.copy(g,p),p+=S.length}),p!==g.length)throw new Error(`Received data length ${p} is not equal to expected ${g.length}`);return g}request(i,m){return new Promise((g,y)=>{const p=this.httpExecutor.createRequest(i,S=>{(0,r.checkIsRangesSupported)(S,y)&&(S.on("error",y),S.on("aborted",()=>{y(new Error("response has been aborted by the server"))}),S.on("data",m),S.on("end",()=>g()))});this.httpExecutor.addErrorAndTimeoutHandlers(p,y),p.end()})}};er.DifferentialDownloader=a;function s(o,i=" KB"){return new Intl.NumberFormat("en").format((o/1024).toFixed(2))+i}function n(o){const i=o.indexOf("?");return i<0?o:o.substring(0,i)}return er}var ol;function If(){if(ol)return Zt;ol=1,Object.defineProperty(Zt,"__esModule",{value:!0}),Zt.GenericDifferentialDownloader=void 0;const t=nu();let d=class extends t.DifferentialDownloader{download(u,f){return this.doDownload(u,f)}};return Zt.GenericDifferentialDownloader=d,Zt}var zi={},sl;function Pt(){return sl||(sl=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.UpdaterSignal=t.UPDATE_DOWNLOADED=t.DOWNLOAD_PROGRESS=t.CancellationToken=void 0,t.addHandler=u;const d=ke();Object.defineProperty(t,"CancellationToken",{enumerable:!0,get:function(){return d.CancellationToken}}),t.DOWNLOAD_PROGRESS="download-progress",t.UPDATE_DOWNLOADED="update-downloaded";class h{constructor(l){this.emitter=l}login(l){u(this.emitter,"login",l)}progress(l){u(this.emitter,t.DOWNLOAD_PROGRESS,l)}updateDownloaded(l){u(this.emitter,t.UPDATE_DOWNLOADED,l)}updateCancelled(l){u(this.emitter,"update-cancelled",l)}}t.UpdaterSignal=h;function u(f,l,r){f.on(l,r)}})(zi)),zi}var ll;function fa(){if(ll)return St;ll=1,Object.defineProperty(St,"__esModule",{value:!0}),St.NoOpLogger=St.AppUpdater=void 0;const t=ke(),d=pr,h=qr,u=Cl,f=pt(),l=na(),r=Wc(),c=Ie,a=Zl(),s=Ef(),n=wf(),o=_f(),i=eu(),m=Cf(),g=Pl,y=bt(),p=If(),S=Pt();let C=class iu extends u.EventEmitter{get channel(){return this._channel}set channel(R){if(this._channel!=null){if(typeof R!="string")throw(0,t.newError)(`Channel must be a string, but got: ${R}`,"ERR_UPDATER_INVALID_CHANNEL");if(R.length===0)throw(0,t.newError)("Channel must be not an empty string","ERR_UPDATER_INVALID_CHANNEL")}this._channel=R,this.allowDowngrade=!0}addAuthHeader(R){this.requestHeaders=Object.assign({},this.requestHeaders,{authorization:R})}get netSession(){return(0,o.getNetSession)()}get logger(){return this._logger}set logger(R){this._logger=R??new I}set updateConfigPath(R){this.clientPromise=null,this._appUpdateConfigPath=R,this.configOnDisk=new r.Lazy(()=>this.loadUpdateConfig())}get isUpdateSupported(){return this._isUpdateSupported}set isUpdateSupported(R){R&&(this._isUpdateSupported=R)}constructor(R,w){super(),this.autoDownload=!0,this.autoInstallOnAppQuit=!0,this.autoRunAppAfterInstall=!0,this.allowPrerelease=!1,this.fullChangelog=!1,this.allowDowngrade=!1,this.disableWebInstaller=!1,this.disableDifferentialDownload=!1,this.forceDevUpdateConfig=!1,this._channel=null,this.downloadedUpdateHelper=null,this.requestHeaders=null,this._logger=console,this.signals=new S.UpdaterSignal(this),this._appUpdateConfigPath=null,this._isUpdateSupported=q=>this.checkIfUpdateSupported(q),this.clientPromise=null,this.stagingUserIdPromise=new r.Lazy(()=>this.getOrCreateStagingUserId()),this.configOnDisk=new r.Lazy(()=>this.loadUpdateConfig()),this.checkForUpdatesPromise=null,this.downloadPromise=null,this.updateInfoAndProvider=null,this._testOnlyOptions=null,this.on("error",q=>{this._logger.error(`Error: ${q.stack||q.message}`)}),w==null?(this.app=new n.ElectronAppAdapter,this.httpExecutor=new o.ElectronHttpExecutor((q,L)=>this.emit("login",q,L))):(this.app=w,this.httpExecutor=null);const T=this.app.version,E=(0,a.parse)(T);if(E==null)throw(0,t.newError)(`App version is not a valid semver version: "${T}"`,"ERR_UPDATER_INVALID_VERSION");this.currentVersion=E,this.allowPrerelease=P(E),R!=null&&(this.setFeedURL(R),typeof R!="string"&&R.requestHeaders&&(this.requestHeaders=R.requestHeaders))}getFeedURL(){return"Deprecated. Do not use it."}setFeedURL(R){const w=this.createProviderRuntimeOptions();let T;typeof R=="string"?T=new i.GenericProvider({provider:"generic",url:R},this,{...w,isUseMultipleRangeRequest:(0,m.isUrlProbablySupportMultiRangeRequests)(R)}):T=(0,m.createClient)(R,this,w),this.clientPromise=Promise.resolve(T)}checkForUpdates(){if(!this.isUpdaterActive())return Promise.resolve(null);let R=this.checkForUpdatesPromise;if(R!=null)return this._logger.info("Checking for update (already in progress)"),R;const w=()=>this.checkForUpdatesPromise=null;return this._logger.info("Checking for update"),R=this.doCheckForUpdates().then(T=>(w(),T)).catch(T=>{throw w(),this.emit("error",T,`Cannot check for updates: ${(T.stack||T).toString()}`),T}),this.checkForUpdatesPromise=R,R}isUpdaterActive(){return this.app.isPackaged||this.forceDevUpdateConfig?!0:(this._logger.info("Skip checkForUpdates because application is not packed and dev update config is not forced"),!1)}checkForUpdatesAndNotify(R){return this.checkForUpdates().then(w=>w?.downloadPromise?(w.downloadPromise.then(()=>{const T=iu.formatDownloadNotification(w.updateInfo.version,this.app.name,R);new Ce.Notification(T).show()}),w):(this._logger.debug!=null&&this._logger.debug("checkForUpdatesAndNotify called, downloadPromise is null"),w))}static formatDownloadNotification(R,w,T){return T==null&&(T={title:"A new update is ready to install",body:"{appName} version {version} has been downloaded and will be automatically installed on exit"}),T={title:T.title.replace("{appName}",w).replace("{version}",R),body:T.body.replace("{appName}",w).replace("{version}",R)},T}async isStagingMatch(R){const w=R.stagingPercentage;let T=w;if(T==null)return!0;if(T=parseInt(T,10),isNaN(T))return this._logger.warn(`Staging percentage is NaN: ${w}`),!0;T=T/100;const E=await this.stagingUserIdPromise.value,L=t.UUID.parse(E).readUInt32BE(12)/4294967295;return this._logger.info(`Staging percentage: ${T}, percentage: ${L}, user id: ${E}`),L<T}computeFinalHeaders(R){return this.requestHeaders!=null&&Object.assign(R,this.requestHeaders),R}async isUpdateAvailable(R){const w=(0,a.parse)(R.version);if(w==null)throw(0,t.newError)(`This file could not be downloaded, or the latest version (from update server) does not have a valid semver version: "${R.version}"`,"ERR_UPDATER_INVALID_VERSION");const T=this.currentVersion;if((0,a.eq)(w,T)||!await Promise.resolve(this.isUpdateSupported(R))||!await this.isStagingMatch(R))return!1;const q=(0,a.gt)(w,T),L=(0,a.lt)(w,T);return q?!0:this.allowDowngrade&&L}checkIfUpdateSupported(R){const w=R?.minimumSystemVersion,T=(0,h.release)();if(w)try{if((0,a.lt)(T,w))return this._logger.info(`Current OS version ${T} is less than the minimum OS version required ${w} for version ${T}`),!1}catch(E){this._logger.warn(`Failed to compare current OS version(${T}) with minimum OS version(${w}): ${(E.message||E).toString()}`)}return!0}async getUpdateInfoAndProvider(){await this.app.whenReady(),this.clientPromise==null&&(this.clientPromise=this.configOnDisk.value.then(T=>(0,m.createClient)(T,this,this.createProviderRuntimeOptions())));const R=await this.clientPromise,w=await this.stagingUserIdPromise.value;return R.setRequestHeaders(this.computeFinalHeaders({"x-user-staging-id":w})),{info:await R.getLatestVersion(),provider:R}}createProviderRuntimeOptions(){return{isUseMultipleRangeRequest:!0,platform:this._testOnlyOptions==null?process.platform:this._testOnlyOptions.platform,executor:this.httpExecutor}}async doCheckForUpdates(){this.emit("checking-for-update");const R=await this.getUpdateInfoAndProvider(),w=R.info;if(!await this.isUpdateAvailable(w))return this._logger.info(`Update for version ${this.currentVersion.format()} is not available (latest version: ${w.version}, downgrade is ${this.allowDowngrade?"allowed":"disallowed"}).`),this.emit("update-not-available",w),{isUpdateAvailable:!1,versionInfo:w,updateInfo:w};this.updateInfoAndProvider=R,this.onUpdateAvailable(w);const T=new t.CancellationToken;return{isUpdateAvailable:!0,versionInfo:w,updateInfo:w,cancellationToken:T,downloadPromise:this.autoDownload?this.downloadUpdate(T):null}}onUpdateAvailable(R){this._logger.info(`Found version ${R.version} (url: ${(0,t.asArray)(R.files).map(w=>w.url).join(", ")})`),this.emit("update-available",R)}downloadUpdate(R=new t.CancellationToken){const w=this.updateInfoAndProvider;if(w==null){const E=new Error("Please check update first");return this.dispatchError(E),Promise.reject(E)}if(this.downloadPromise!=null)return this._logger.info("Downloading update (already in progress)"),this.downloadPromise;this._logger.info(`Downloading update from ${(0,t.asArray)(w.info.files).map(E=>E.url).join(", ")}`);const T=E=>{if(!(E instanceof t.CancellationError))try{this.dispatchError(E)}catch(q){this._logger.warn(`Cannot dispatch error event: ${q.stack||q}`)}return E};return this.downloadPromise=this.doDownloadUpdate({updateInfoAndProvider:w,requestHeaders:this.computeRequestHeaders(w.provider),cancellationToken:R,disableWebInstaller:this.disableWebInstaller,disableDifferentialDownload:this.disableDifferentialDownload}).catch(E=>{throw T(E)}).finally(()=>{this.downloadPromise=null}),this.downloadPromise}dispatchError(R){this.emit("error",R,(R.stack||R).toString())}dispatchUpdateDownloaded(R){this.emit(S.UPDATE_DOWNLOADED,R)}async loadUpdateConfig(){return this._appUpdateConfigPath==null&&(this._appUpdateConfigPath=this.app.appUpdateConfigPath),(0,l.load)(await(0,f.readFile)(this._appUpdateConfigPath,"utf-8"))}computeRequestHeaders(R){const w=R.fileExtraDownloadHeaders;if(w!=null){const T=this.requestHeaders;return T==null?w:{...w,...T}}return this.computeFinalHeaders({accept:"*/*"})}async getOrCreateStagingUserId(){const R=c.join(this.app.userDataPath,".updaterId");try{const T=await(0,f.readFile)(R,"utf-8");if(t.UUID.check(T))return T;this._logger.warn(`Staging user id file exists, but content was invalid: ${T}`)}catch(T){T.code!=="ENOENT"&&this._logger.warn(`Couldn't read staging user ID, creating a blank one: ${T}`)}const w=t.UUID.v5((0,d.randomBytes)(4096),t.UUID.OID);this._logger.info(`Generated new staging user ID: ${w}`);try{await(0,f.outputFile)(R,w)}catch(T){this._logger.warn(`Couldn't write out staging user ID: ${T}`)}return w}get isAddNoCacheQuery(){const R=this.requestHeaders;if(R==null)return!0;for(const w of Object.keys(R)){const T=w.toLowerCase();if(T==="authorization"||T==="private-token")return!1}return!0}async getOrCreateDownloadHelper(){let R=this.downloadedUpdateHelper;if(R==null){const w=(await this.configOnDisk.value).updaterCacheDirName,T=this._logger;w==null&&T.error("updaterCacheDirName is not specified in app-update.yml Was app build using at least electron-builder 20.34.0?");const E=c.join(this.app.baseCachePath,w||this.app.name);T.debug!=null&&T.debug(`updater cache dir: ${E}`),R=new s.DownloadedUpdateHelper(E),this.downloadedUpdateHelper=R}return R}async executeDownload(R){const w=R.fileInfo,T={headers:R.downloadUpdateOptions.requestHeaders,cancellationToken:R.downloadUpdateOptions.cancellationToken,sha2:w.info.sha2,sha512:w.info.sha512};this.listenerCount(S.DOWNLOAD_PROGRESS)>0&&(T.onProgress=ie=>this.emit(S.DOWNLOAD_PROGRESS,ie));const E=R.downloadUpdateOptions.updateInfoAndProvider.info,q=E.version,L=w.packageInfo;function x(){const ie=decodeURIComponent(R.fileInfo.url.pathname);return ie.endsWith(`.${R.fileExtension}`)?c.basename(ie):R.fileInfo.info.url}const k=await this.getOrCreateDownloadHelper(),D=k.cacheDirForPendingUpdate;await(0,f.mkdir)(D,{recursive:!0});const O=x();let F=c.join(D,O);const $=L==null?null:c.join(D,`package-${q}${c.extname(L.path)||".7z"}`),J=async ie=>(await k.setDownloadedFile(F,$,E,w,O,ie),await R.done({...E,downloadedFile:F}),$==null?[F]:[F,$]),W=this._logger,ne=await k.validateDownloadedPath(F,E,w,W);if(ne!=null)return F=ne,await J(!1);const ce=async()=>(await k.clear().catch(()=>{}),await(0,f.unlink)(F).catch(()=>{})),ue=await(0,s.createTempUpdateFile)(`temp-${O}`,D,W);try{await R.task(ue,T,$,ce),await(0,t.retry)(()=>(0,f.rename)(ue,F),60,500,0,0,ie=>ie instanceof Error&&/^EBUSY:/.test(ie.message))}catch(ie){throw await ce(),ie instanceof t.CancellationError&&(W.info("cancelled"),this.emit("update-cancelled",E)),ie}return W.info(`New version ${q} has been downloaded to ${F}`),await J(!0)}async differentialDownloadInstaller(R,w,T,E,q){try{if(this._testOnlyOptions!=null&&!this._testOnlyOptions.isUseDifferentialDownload)return!0;const L=(0,y.blockmapFiles)(R.url,this.app.version,w.updateInfoAndProvider.info.version);this._logger.info(`Download block maps (old: "${L[0]}", new: ${L[1]})`);const x=async O=>{const F=await this.httpExecutor.downloadToBuffer(O,{headers:w.requestHeaders,cancellationToken:w.cancellationToken});if(F==null||F.length===0)throw new Error(`Blockmap "${O.href}" is empty`);try{return JSON.parse((0,g.gunzipSync)(F).toString())}catch($){throw new Error(`Cannot parse blockmap "${O.href}", error: ${$}`)}},k={newUrl:R.url,oldFile:c.join(this.downloadedUpdateHelper.cacheDir,q),logger:this._logger,newFile:T,isUseMultipleRangeRequest:E.isUseMultipleRangeRequest,requestHeaders:w.requestHeaders,cancellationToken:w.cancellationToken};this.listenerCount(S.DOWNLOAD_PROGRESS)>0&&(k.onProgress=O=>this.emit(S.DOWNLOAD_PROGRESS,O));const D=await Promise.all(L.map(O=>x(O)));return await new p.GenericDifferentialDownloader(R.info,this.httpExecutor,k).download(D[0],D[1]),!1}catch(L){if(this._logger.error(`Cannot download differentially, fallback to full download: ${L.stack||L}`),this._testOnlyOptions!=null)throw L;return!0}}};St.AppUpdater=C;function P(M){const R=(0,a.prerelease)(M);return R!=null&&R.length>0}class I{info(R){}warn(R){}error(R){}}return St.NoOpLogger=I,St}var ul;function qt(){if(ul)return Ht;ul=1,Object.defineProperty(Ht,"__esModule",{value:!0}),Ht.BaseUpdater=void 0;const t=kr,d=fa();let h=class extends d.AppUpdater{constructor(f,l){super(f,l),this.quitAndInstallCalled=!1,this.quitHandlerAdded=!1}quitAndInstall(f=!1,l=!1){this._logger.info("Install on explicit quitAndInstall"),this.install(f,f?l:this.autoRunAppAfterInstall)?setImmediate(()=>{Ce.autoUpdater.emit("before-quit-for-update"),this.app.quit()}):this.quitAndInstallCalled=!1}executeDownload(f){return super.executeDownload({...f,done:l=>(this.dispatchUpdateDownloaded(l),this.addQuitHandler(),Promise.resolve())})}get installerPath(){return this.downloadedUpdateHelper==null?null:this.downloadedUpdateHelper.file}install(f=!1,l=!1){if(this.quitAndInstallCalled)return this._logger.warn("install call ignored: quitAndInstallCalled is set to true"),!1;const r=this.downloadedUpdateHelper,c=this.installerPath,a=r==null?null:r.downloadedFileInfo;if(c==null||a==null)return this.dispatchError(new Error("No valid update available, can't quit and install")),!1;this.quitAndInstallCalled=!0;try{return this._logger.info(`Install: isSilent: ${f}, isForceRunAfter: ${l}`),this.doInstall({isSilent:f,isForceRunAfter:l,isAdminRightsRequired:a.isAdminRightsRequired})}catch(s){return this.dispatchError(s),!1}}addQuitHandler(){this.quitHandlerAdded||!this.autoInstallOnAppQuit||(this.quitHandlerAdded=!0,this.app.onQuit(f=>{if(this.quitAndInstallCalled){this._logger.info("Update installer has already been triggered. Quitting application.");return}if(!this.autoInstallOnAppQuit){this._logger.info("Update will not be installed on quit because autoInstallOnAppQuit is set to false.");return}if(f!==0){this._logger.info(`Update will be not installed on quit because application is quitting with exit code ${f}`);return}this._logger.info("Auto install update on quit"),this.install(!0,!1)}))}wrapSudo(){const{name:f}=this.app,l=`"${f} would like to update"`,r=this.spawnSyncLog("which gksudo || which kdesudo || which pkexec || which beesu"),c=[r];return/kdesudo/i.test(r)?(c.push("--comment",l),c.push("-c")):/gksudo/i.test(r)?c.push("--message",l):/pkexec/i.test(r)&&c.push("--disable-internal-agent"),c.join(" ")}spawnSyncLog(f,l=[],r={}){this._logger.info(`Executing: ${f} with args: ${l}`);const c=(0,t.spawnSync)(f,l,{env:{...process.env,...r},encoding:"utf-8",shell:!0}),{error:a,status:s,stdout:n,stderr:o}=c;if(a!=null)throw this._logger.error(o),a;if(s!=null&&s!==0)throw this._logger.error(o),new Error(`Command ${f} exited with code ${s}`);return n.trim()}async spawnLog(f,l=[],r=void 0,c="ignore"){return this._logger.info(`Executing: ${f} with args: ${l}`),new Promise((a,s)=>{try{const n={stdio:c,env:r,detached:!0},o=(0,t.spawn)(f,l,n);o.on("error",i=>{s(i)}),o.unref(),o.pid!==void 0&&a(!0)}catch(n){s(n)}})}};return Ht.BaseUpdater=h,Ht}var nr={},ir={},cl;function au(){if(cl)return ir;cl=1,Object.defineProperty(ir,"__esModule",{value:!0}),ir.FileWithEmbeddedBlockMapDifferentialDownloader=void 0;const t=pt(),d=nu(),h=Pl;let u=class extends d.DifferentialDownloader{async download(){const c=this.blockAwareFileInfo,a=c.size,s=a-(c.blockMapSize+4);this.fileMetadataBuffer=await this.readRemoteBytes(s,a-1);const n=f(this.fileMetadataBuffer.slice(0,this.fileMetadataBuffer.length-4));await this.doDownload(await l(this.options.oldFile),n)}};ir.FileWithEmbeddedBlockMapDifferentialDownloader=u;function f(r){return JSON.parse((0,h.inflateRawSync)(r).toString())}async function l(r){const c=await(0,t.open)(r,"r");try{const a=(await(0,t.fstat)(c)).size,s=Buffer.allocUnsafe(4);await(0,t.read)(c,s,0,s.length,a-s.length);const n=Buffer.allocUnsafe(s.readUInt32BE(0));return await(0,t.read)(c,n,0,n.length,a-s.length-n.length),await(0,t.close)(c),f(n)}catch(a){throw await(0,t.close)(c),a}}return ir}var fl;function dl(){if(fl)return nr;fl=1,Object.defineProperty(nr,"__esModule",{value:!0}),nr.AppImageUpdater=void 0;const t=ke(),d=kr,h=pt(),u=Ke,f=Ie,l=qt(),r=au(),c=Je(),a=Pt();let s=class extends l.BaseUpdater{constructor(o,i){super(o,i)}isUpdaterActive(){return process.env.APPIMAGE==null?(process.env.SNAP==null?this._logger.warn("APPIMAGE env is not defined, current application is not an AppImage"):this._logger.info("SNAP env is defined, updater is disabled"),!1):super.isUpdaterActive()}doDownloadUpdate(o){const i=o.updateInfoAndProvider.provider,m=(0,c.findFile)(i.resolveFiles(o.updateInfoAndProvider.info),"AppImage",["rpm","deb","pacman"]);return this.executeDownload({fileExtension:"AppImage",fileInfo:m,downloadUpdateOptions:o,task:async(g,y)=>{const p=process.env.APPIMAGE;if(p==null)throw(0,t.newError)("APPIMAGE env is not defined","ERR_UPDATER_OLD_FILE_NOT_FOUND");(o.disableDifferentialDownload||await this.downloadDifferential(m,p,g,i,o))&&await this.httpExecutor.download(m.url,g,y),await(0,h.chmod)(g,493)}})}async downloadDifferential(o,i,m,g,y){try{const p={newUrl:o.url,oldFile:i,logger:this._logger,newFile:m,isUseMultipleRangeRequest:g.isUseMultipleRangeRequest,requestHeaders:y.requestHeaders,cancellationToken:y.cancellationToken};return this.listenerCount(a.DOWNLOAD_PROGRESS)>0&&(p.onProgress=S=>this.emit(a.DOWNLOAD_PROGRESS,S)),await new r.FileWithEmbeddedBlockMapDifferentialDownloader(o.info,this.httpExecutor,p).download(),!1}catch(p){return this._logger.error(`Cannot download differentially, fallback to full download: ${p.stack||p}`),process.platform==="linux"}}doInstall(o){const i=process.env.APPIMAGE;if(i==null)throw(0,t.newError)("APPIMAGE env is not defined","ERR_UPDATER_OLD_FILE_NOT_FOUND");(0,u.unlinkSync)(i);let m;const g=f.basename(i),y=this.installerPath;if(y==null)return this.dispatchError(new Error("No valid update available, can't quit and install")),!1;f.basename(y)===g||!/\d+\.\d+\.\d+/.test(g)?m=i:m=f.join(f.dirname(i),f.basename(y)),(0,d.execFileSync)("mv",["-f",y,m]),m!==i&&this.emit("appimage-filename-updated",m);const p={...process.env,APPIMAGE_SILENT_INSTALL:"true"};return o.isForceRunAfter?this.spawnLog(m,[],p):(p.APPIMAGE_EXIT_AFTER_INSTALL="true",(0,d.execFileSync)(m,[],{env:p})),!0}};return nr.AppImageUpdater=s,nr}var ar={},hl;function pl(){if(hl)return ar;hl=1,Object.defineProperty(ar,"__esModule",{value:!0}),ar.DebUpdater=void 0;const t=qt(),d=Je(),h=Pt();let u=class extends t.BaseUpdater{constructor(l,r){super(l,r)}doDownloadUpdate(l){const r=l.updateInfoAndProvider.provider,c=(0,d.findFile)(r.resolveFiles(l.updateInfoAndProvider.info),"deb",["AppImage","rpm","pacman"]);return this.executeDownload({fileExtension:"deb",fileInfo:c,downloadUpdateOptions:l,task:async(a,s)=>{this.listenerCount(h.DOWNLOAD_PROGRESS)>0&&(s.onProgress=n=>this.emit(h.DOWNLOAD_PROGRESS,n)),await this.httpExecutor.download(c.url,a,s)}})}get installerPath(){var l,r;return(r=(l=super.installerPath)===null||l===void 0?void 0:l.replace(/ /g,"\\ "))!==null&&r!==void 0?r:null}doInstall(l){const r=this.wrapSudo(),c=/pkexec/i.test(r)?"":'"',a=this.installerPath;if(a==null)return this.dispatchError(new Error("No valid update available, can't quit and install")),!1;const s=["dpkg","-i",a,"||","apt-get","install","-f","-y"];return this.spawnSyncLog(r,[`${c}/bin/bash`,"-c",`'${s.join(" ")}'${c}`]),l.isForceRunAfter&&this.app.relaunch(),!0}};return ar.DebUpdater=u,ar}var or={},ml;function gl(){if(ml)return or;ml=1,Object.defineProperty(or,"__esModule",{value:!0}),or.PacmanUpdater=void 0;const t=qt(),d=Pt(),h=Je();let u=class extends t.BaseUpdater{constructor(l,r){super(l,r)}doDownloadUpdate(l){const r=l.updateInfoAndProvider.provider,c=(0,h.findFile)(r.resolveFiles(l.updateInfoAndProvider.info),"pacman",["AppImage","deb","rpm"]);return this.executeDownload({fileExtension:"pacman",fileInfo:c,downloadUpdateOptions:l,task:async(a,s)=>{this.listenerCount(d.DOWNLOAD_PROGRESS)>0&&(s.onProgress=n=>this.emit(d.DOWNLOAD_PROGRESS,n)),await this.httpExecutor.download(c.url,a,s)}})}get installerPath(){var l,r;return(r=(l=super.installerPath)===null||l===void 0?void 0:l.replace(/ /g,"\\ "))!==null&&r!==void 0?r:null}doInstall(l){const r=this.wrapSudo(),c=/pkexec/i.test(r)?"":'"',a=this.installerPath;if(a==null)return this.dispatchError(new Error("No valid update available, can't quit and install")),!1;const s=["pacman","-U","--noconfirm",a];return this.spawnSyncLog(r,[`${c}/bin/bash`,"-c",`'${s.join(" ")}'${c}`]),l.isForceRunAfter&&this.app.relaunch(),!0}};return or.PacmanUpdater=u,or}var sr={},vl;function El(){if(vl)return sr;vl=1,Object.defineProperty(sr,"__esModule",{value:!0}),sr.RpmUpdater=void 0;const t=qt(),d=Pt(),h=Je();let u=class extends t.BaseUpdater{constructor(l,r){super(l,r)}doDownloadUpdate(l){const r=l.updateInfoAndProvider.provider,c=(0,h.findFile)(r.resolveFiles(l.updateInfoAndProvider.info),"rpm",["AppImage","deb","pacman"]);return this.executeDownload({fileExtension:"rpm",fileInfo:c,downloadUpdateOptions:l,task:async(a,s)=>{this.listenerCount(d.DOWNLOAD_PROGRESS)>0&&(s.onProgress=n=>this.emit(d.DOWNLOAD_PROGRESS,n)),await this.httpExecutor.download(c.url,a,s)}})}get installerPath(){var l,r;return(r=(l=super.installerPath)===null||l===void 0?void 0:l.replace(/ /g,"\\ "))!==null&&r!==void 0?r:null}doInstall(l){const r=this.wrapSudo(),c=/pkexec/i.test(r)?"":'"',a=this.spawnSyncLog("which zypper"),s=this.installerPath;if(s==null)return this.dispatchError(new Error("No valid update available, can't quit and install")),!1;let n;return a?n=[a,"--no-refresh","install","--allow-unsigned-rpm","-y","-f",s]:n=[this.spawnSyncLog("which dnf || which yum"),"-y","install",s],this.spawnSyncLog(r,[`${c}/bin/bash`,"-c",`'${n.join(" ")}'${c}`]),l.isForceRunAfter&&this.app.relaunch(),!0}};return sr.RpmUpdater=u,sr}var lr={},yl;function wl(){if(yl)return lr;yl=1,Object.defineProperty(lr,"__esModule",{value:!0}),lr.MacUpdater=void 0;const t=ke(),d=pt(),h=Ke,u=Ie,f=ic,l=fa(),r=Je(),c=kr,a=pr;let s=class extends l.AppUpdater{constructor(o,i){super(o,i),this.nativeUpdater=Ce.autoUpdater,this.squirrelDownloadedUpdate=!1,this.nativeUpdater.on("error",m=>{this._logger.warn(m),this.emit("error",m)}),this.nativeUpdater.on("update-downloaded",()=>{this.squirrelDownloadedUpdate=!0,this.debug("nativeUpdater.update-downloaded")})}debug(o){this._logger.debug!=null&&this._logger.debug(o)}closeServerIfExists(){this.server&&(this.debug("Closing proxy server"),this.server.close(o=>{o&&this.debug("proxy server wasn't already open, probably attempted closing again as a safety check before quit")}))}async doDownloadUpdate(o){let i=o.updateInfoAndProvider.provider.resolveFiles(o.updateInfoAndProvider.info);const m=this._logger,g="sysctl.proc_translated";let y=!1;try{this.debug("Checking for macOS Rosetta environment"),y=(0,c.execFileSync)("sysctl",[g],{encoding:"utf8"}).includes(`${g}: 1`),m.info(`Checked for macOS Rosetta environment (isRosetta=${y})`)}catch(M){m.warn(`sysctl shell command to check for macOS Rosetta environment failed: ${M}`)}let p=!1;try{this.debug("Checking for arm64 in uname");const R=(0,c.execFileSync)("uname",["-a"],{encoding:"utf8"}).includes("ARM");m.info(`Checked 'uname -a': arm64=${R}`),p=p||R}catch(M){m.warn(`uname shell command to check for arm64 failed: ${M}`)}p=p||process.arch==="arm64"||y;const S=M=>{var R;return M.url.pathname.includes("arm64")||((R=M.info.url)===null||R===void 0?void 0:R.includes("arm64"))};p&&i.some(S)?i=i.filter(M=>p===S(M)):i=i.filter(M=>!S(M));const C=(0,r.findFile)(i,"zip",["pkg","dmg"]);if(C==null)throw(0,t.newError)(`ZIP file not provided: ${(0,t.safeStringifyJson)(i)}`,"ERR_UPDATER_ZIP_FILE_NOT_FOUND");const P=o.updateInfoAndProvider.provider,I="update.zip";return this.executeDownload({fileExtension:"zip",fileInfo:C,downloadUpdateOptions:o,task:async(M,R)=>{const w=u.join(this.downloadedUpdateHelper.cacheDir,I),T=()=>(0,d.pathExistsSync)(w)?!o.disableDifferentialDownload:(m.info("Unable to locate previous update.zip for differential download (is this first install?), falling back to full download"),!1);let E=!0;T()&&(E=await this.differentialDownloadInstaller(C,o,M,P,I)),E&&await this.httpExecutor.download(C.url,M,R)},done:async M=>{if(!o.disableDifferentialDownload)try{const R=u.join(this.downloadedUpdateHelper.cacheDir,I);await(0,d.copyFile)(M.downloadedFile,R)}catch(R){this._logger.warn(`Unable to copy file for caching for future differential downloads: ${R.message}`)}return this.updateDownloaded(C,M)}})}async updateDownloaded(o,i){var m;const g=i.downloadedFile,y=(m=o.info.size)!==null&&m!==void 0?m:(await(0,d.stat)(g)).size,p=this._logger,S=`fileToProxy=${o.url.href}`;this.closeServerIfExists(),this.debug(`Creating proxy server for native Squirrel.Mac (${S})`),this.server=(0,f.createServer)(),this.debug(`Proxy server for native Squirrel.Mac is created (${S})`),this.server.on("close",()=>{p.info(`Proxy server for native Squirrel.Mac is closed (${S})`)});const C=P=>{const I=P.address();return typeof I=="string"?I:`http://127.0.0.1:${I?.port}`};return await new Promise((P,I)=>{const M=(0,a.randomBytes)(64).toString("base64").replace(/\//g,"_").replace(/\+/g,"-"),R=Buffer.from(`autoupdater:${M}`,"ascii"),w=`/${(0,a.randomBytes)(64).toString("hex")}.zip`;this.server.on("request",(T,E)=>{const q=T.url;if(p.info(`${q} requested`),q==="/"){if(!T.headers.authorization||T.headers.authorization.indexOf("Basic ")===-1){E.statusCode=401,E.statusMessage="Invalid Authentication Credentials",E.end(),p.warn("No authenthication info");return}const k=T.headers.authorization.split(" ")[1],D=Buffer.from(k,"base64").toString("ascii"),[O,F]=D.split(":");if(O!=="autoupdater"||F!==M){E.statusCode=401,E.statusMessage="Invalid Authentication Credentials",E.end(),p.warn("Invalid authenthication credentials");return}const $=Buffer.from(`{ "url": "${C(this.server)}${w}" }`);E.writeHead(200,{"Content-Type":"application/json","Content-Length":$.length}),E.end($);return}if(!q.startsWith(w)){p.warn(`${q} requested, but not supported`),E.writeHead(404),E.end();return}p.info(`${w} requested by Squirrel.Mac, pipe ${g}`);let L=!1;E.on("finish",()=>{L||(this.nativeUpdater.removeListener("error",I),P([]))});const x=(0,h.createReadStream)(g);x.on("error",k=>{try{E.end()}catch(D){p.warn(`cannot end response: ${D}`)}L=!0,this.nativeUpdater.removeListener("error",I),I(new Error(`Cannot pipe "${g}": ${k}`))}),E.writeHead(200,{"Content-Type":"application/zip","Content-Length":y}),x.pipe(E)}),this.debug(`Proxy server for native Squirrel.Mac is starting to listen (${S})`),this.server.listen(0,"127.0.0.1",()=>{this.debug(`Proxy server for native Squirrel.Mac is listening (address=${C(this.server)}, ${S})`),this.nativeUpdater.setFeedURL({url:C(this.server),headers:{"Cache-Control":"no-cache",Authorization:`Basic ${R.toString("base64")}`}}),this.dispatchUpdateDownloaded(i),this.autoInstallOnAppQuit?(this.nativeUpdater.once("error",I),this.nativeUpdater.checkForUpdates()):P([])})})}handleUpdateDownloaded(){this.autoRunAppAfterInstall?this.nativeUpdater.quitAndInstall():this.app.quit(),this.closeServerIfExists()}quitAndInstall(){this.squirrelDownloadedUpdate?this.handleUpdateDownloaded():(this.nativeUpdater.on("update-downloaded",()=>this.handleUpdateDownloaded()),this.autoInstallOnAppQuit||this.nativeUpdater.checkForUpdates())}};return lr.MacUpdater=s,lr}var ur={},Ur={},_l;function Of(){if(_l)return Ur;_l=1,Object.defineProperty(Ur,"__esModule",{value:!0}),Ur.verifySignature=f;const t=ke(),d=kr,h=qr,u=Ie;function f(a,s,n){return new Promise((o,i)=>{const m=s.replace(/'/g,"''");n.info(`Verifying signature ${m}`),(0,d.execFile)('set "PSModulePath=" & chcp 65001 >NUL & powershell.exe',["-NoProfile","-NonInteractive","-InputFormat","None","-Command",`"Get-AuthenticodeSignature -LiteralPath '${m}' | ConvertTo-Json -Compress"`],{shell:!0,timeout:20*1e3},(g,y,p)=>{var S;try{if(g!=null||p){r(n,g,p,i),o(null);return}const C=l(y);if(C.Status===0){try{const R=u.normalize(C.Path),w=u.normalize(s);if(n.info(`LiteralPath: ${R}. Update Path: ${w}`),R!==w){r(n,new Error(`LiteralPath of ${R} is different than ${w}`),p,i),o(null);return}}catch(R){n.warn(`Unable to verify LiteralPath of update asset due to missing data.Path. Skipping this step of validation. Message: ${(S=R.message)!==null&&S!==void 0?S:R.stack}`)}const I=(0,t.parseDn)(C.SignerCertificate.Subject);let M=!1;for(const R of a){const w=(0,t.parseDn)(R);if(w.size?M=Array.from(w.keys()).every(E=>w.get(E)===I.get(E)):R===I.get("CN")&&(n.warn(`Signature validated using only CN ${R}. Please add your full Distinguished Name (DN) to publisherNames configuration`),M=!0),M){o(null);return}}}const P=`publisherNames: ${a.join(" | ")}, raw info: `+JSON.stringify(C,(I,M)=>I==="RawData"?void 0:M,2);n.warn(`Sign verification failed, installer signed with incorrect certificate: ${P}`),o(P)}catch(C){r(n,C,null,i),o(null);return}})})}function l(a){const s=JSON.parse(a);delete s.PrivateKey,delete s.IsOSBinary,delete s.SignatureType;const n=s.SignerCertificate;return n!=null&&(delete n.Archived,delete n.Extensions,delete n.Handle,delete n.HasPrivateKey,delete n.SubjectName),s}function r(a,s,n,o){if(c()){a.warn(`Cannot execute Get-AuthenticodeSignature: ${s||n}. Ignoring signature validation due to unsupported powershell version. Please upgrade to powershell 3 or higher.`);return}try{(0,d.execFileSync)("powershell.exe",["-NoProfile","-NonInteractive","-Command","ConvertTo-Json test"],{timeout:10*1e3})}catch(i){a.warn(`Cannot execute ConvertTo-Json: ${i.message}. Ignoring signature validation due to unsupported powershell version. Please upgrade to powershell 3 or higher.`);return}s!=null&&o(s),n&&o(new Error(`Cannot execute Get-AuthenticodeSignature, stderr: ${n}. Failing signature validation due to unknown stderr.`))}function c(){const a=h.release();return a.startsWith("6.")&&!a.startsWith("6.3")}return Ur}var Sl;function Al(){if(Sl)return ur;Sl=1,Object.defineProperty(ur,"__esModule",{value:!0}),ur.NsisUpdater=void 0;const t=ke(),d=Ie,h=qt(),u=au(),f=Pt(),l=Je(),r=pt(),c=Of(),a=Lt;let s=class extends h.BaseUpdater{constructor(o,i){super(o,i),this._verifyUpdateCodeSignature=(m,g)=>(0,c.verifySignature)(m,g,this._logger)}get verifyUpdateCodeSignature(){return this._verifyUpdateCodeSignature}set verifyUpdateCodeSignature(o){o&&(this._verifyUpdateCodeSignature=o)}doDownloadUpdate(o){const i=o.updateInfoAndProvider.provider,m=(0,l.findFile)(i.resolveFiles(o.updateInfoAndProvider.info),"exe");return this.executeDownload({fileExtension:"exe",downloadUpdateOptions:o,fileInfo:m,task:async(g,y,p,S)=>{const C=m.packageInfo,P=C!=null&&p!=null;if(P&&o.disableWebInstaller)throw(0,t.newError)(`Unable to download new version ${o.updateInfoAndProvider.info.version}. Web Installers are disabled`,"ERR_UPDATER_WEB_INSTALLER_DISABLED");!P&&!o.disableWebInstaller&&this._logger.warn("disableWebInstaller is set to false, you should set it to true if you do not plan on using a web installer. This will default to true in a future version."),(P||o.disableDifferentialDownload||await this.differentialDownloadInstaller(m,o,g,i,t.CURRENT_APP_INSTALLER_FILE_NAME))&&await this.httpExecutor.download(m.url,g,y);const I=await this.verifySignature(g);if(I!=null)throw await S(),(0,t.newError)(`New version ${o.updateInfoAndProvider.info.version} is not signed by the application owner: ${I}`,"ERR_UPDATER_INVALID_SIGNATURE");if(P&&await this.differentialDownloadWebPackage(o,C,p,i))try{await this.httpExecutor.download(new a.URL(C.path),p,{headers:o.requestHeaders,cancellationToken:o.cancellationToken,sha512:C.sha512})}catch(M){try{await(0,r.unlink)(p)}catch{}throw M}}})}async verifySignature(o){let i;try{if(i=(await this.configOnDisk.value).publisherName,i==null)return null}catch(m){if(m.code==="ENOENT")return null;throw m}return await this._verifyUpdateCodeSignature(Array.isArray(i)?i:[i],o)}doInstall(o){const i=this.installerPath;if(i==null)return this.dispatchError(new Error("No valid update available, can't quit and install")),!1;const m=["--updated"];o.isSilent&&m.push("/S"),o.isForceRunAfter&&m.push("--force-run"),this.installDirectory&&m.push(`/D=${this.installDirectory}`);const g=this.downloadedUpdateHelper==null?null:this.downloadedUpdateHelper.packageFile;g!=null&&m.push(`--package-file=${g}`);const y=()=>{this.spawnLog(d.join(process.resourcesPath,"elevate.exe"),[i].concat(m)).catch(p=>this.dispatchError(p))};return o.isAdminRightsRequired?(this._logger.info("isAdminRightsRequired is set to true, run installer using elevate.exe"),y(),!0):(this.spawnLog(i,m).catch(p=>{const S=p.code;this._logger.info(`Cannot run installer: error code: ${S}, error message: "${p.message}", will be executed again using elevate if EACCES, and will try to use electron.shell.openItem if ENOENT`),S==="UNKNOWN"||S==="EACCES"?y():S==="ENOENT"?Ce.shell.openPath(i).catch(C=>this.dispatchError(C)):this.dispatchError(p)}),!0)}async differentialDownloadWebPackage(o,i,m,g){if(i.blockMapSize==null)return!0;try{const y={newUrl:new a.URL(i.path),oldFile:d.join(this.downloadedUpdateHelper.cacheDir,t.CURRENT_APP_PACKAGE_FILE_NAME),logger:this._logger,newFile:m,requestHeaders:this.requestHeaders,isUseMultipleRangeRequest:g.isUseMultipleRangeRequest,cancellationToken:o.cancellationToken};this.listenerCount(f.DOWNLOAD_PROGRESS)>0&&(y.onProgress=p=>this.emit(f.DOWNLOAD_PROGRESS,p)),await new u.FileWithEmbeddedBlockMapDifferentialDownloader(i,this.httpExecutor,y).download()}catch(y){return this._logger.error(`Cannot download differentially, fallback to full download: ${y.stack||y}`),process.platform==="win32"}return!1}};return ur.NsisUpdater=s,ur}var Tl;function Df(){return Tl||(Tl=1,(function(t){var d=_t&&_t.__createBinding||(Object.create?(function(p,S,C,P){P===void 0&&(P=C);var I=Object.getOwnPropertyDescriptor(S,C);(!I||("get"in I?!S.__esModule:I.writable||I.configurable))&&(I={enumerable:!0,get:function(){return S[C]}}),Object.defineProperty(p,P,I)}):(function(p,S,C,P){P===void 0&&(P=C),p[P]=S[C]})),h=_t&&_t.__exportStar||function(p,S){for(var C in p)C!=="default"&&!Object.prototype.hasOwnProperty.call(S,C)&&d(S,p,C)};Object.defineProperty(t,"__esModule",{value:!0}),t.NsisUpdater=t.MacUpdater=t.RpmUpdater=t.PacmanUpdater=t.DebUpdater=t.AppImageUpdater=t.Provider=t.NoOpLogger=t.AppUpdater=t.BaseUpdater=void 0;const u=pt(),f=Ie;var l=qt();Object.defineProperty(t,"BaseUpdater",{enumerable:!0,get:function(){return l.BaseUpdater}});var r=fa();Object.defineProperty(t,"AppUpdater",{enumerable:!0,get:function(){return r.AppUpdater}}),Object.defineProperty(t,"NoOpLogger",{enumerable:!0,get:function(){return r.NoOpLogger}});var c=Je();Object.defineProperty(t,"Provider",{enumerable:!0,get:function(){return c.Provider}});var a=dl();Object.defineProperty(t,"AppImageUpdater",{enumerable:!0,get:function(){return a.AppImageUpdater}});var s=pl();Object.defineProperty(t,"DebUpdater",{enumerable:!0,get:function(){return s.DebUpdater}});var n=gl();Object.defineProperty(t,"PacmanUpdater",{enumerable:!0,get:function(){return n.PacmanUpdater}});var o=El();Object.defineProperty(t,"RpmUpdater",{enumerable:!0,get:function(){return o.RpmUpdater}});var i=wl();Object.defineProperty(t,"MacUpdater",{enumerable:!0,get:function(){return i.MacUpdater}});var m=Al();Object.defineProperty(t,"NsisUpdater",{enumerable:!0,get:function(){return m.NsisUpdater}}),h(Pt(),t);let g;function y(){if(process.platform==="win32")g=new(Al()).NsisUpdater;else if(process.platform==="darwin")g=new(wl()).MacUpdater;else{g=new(dl()).AppImageUpdater;try{const p=f.join(process.resourcesPath,"package-type");if(!(0,u.existsSync)(p))return g;console.info("Checking for beta autoupdate feature for deb/rpm distributions");const S=(0,u.readFileSync)(p).toString().trim();switch(console.info("Found package-type:",S),S){case"deb":g=new(pl()).DebUpdater;break;case"rpm":g=new(El()).RpmUpdater;break;case"pacman":g=new(gl()).PacmanUpdater;break;default:break}}catch(p){console.warn("Unable to detect 'package-type' for autoUpdater (beta rpm/deb support). If you'd like to expand support, please consider contributing to electron-builder",p.message)}}return g}Object.defineProperty(t,"autoUpdater",{enumerable:!0,get:()=>g||y()})})(_t)),_t}var nt=Df();let dr=!1;const Nf=5,Xi=3,Ki=process.env.VITE_DEV_SERVER_URL,ou=!!Ki;async function $r(t,{url:d,cookie:h,options:u}){try{const f=new URL(d);let l={"Content-Type":"application/json","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/124.0.0.0 Safari/537.36",Origin:"https://labs.google",Referer:"https://labs.google/",...u.headers};if(h&&h.bearerToken){const s=h.bearerToken.startsWith("Bearer ")?h.bearerToken.substring(7):h.bearerToken;l.Authorization=`Bearer ${s}`}if(h&&h.value&&(l.Cookie=h.value),f.hostname==="aisandbox-pa.googleapis.com"&&!l.Authorization)throw new Error("Bearer Token is required for aisandbox API.");const r=typeof u.body=="object"?JSON.stringify(u.body):u.body,c=await fetch(d,{...u,headers:l,body:r});if(!c.ok){const s=await c.text();throw console.error("API Error Response:",s),new Error(`API request to ${d} failed with status ${c.status}`)}const a=await c.text();return a?JSON.parse(a):{}}catch(f){throw console.error(`Failed to fetch ${d}`,f),new Error(f.message||"An unknown network error occurred.")}}Ce.ipcMain.on("browser:stop-automation",()=>{console.log("Received stop automation signal."),dr=!0});Ce.ipcMain.on("download-image",async(t,{imageDataUrl:d,storyTitle:h})=>{const u=Ce.BrowserWindow.fromWebContents(t.sender);if(!u)return;const{canceled:f,filePath:l}=await Ce.dialog.showSaveDialog(u,{title:"Lu nh thumbnail",defaultPath:`thumbnail-${h.replace(/[^a-z0-9]/gi,"_").substring(0,50)}.png`,filters:[{name:"PNG Images",extensions:["png"]}]});if(f||!l){u.webContents.send("download-complete",{success:!1,error:"Download canceled"});return}try{const r=d.replace(/^data:image\/png;base64,/,""),c=Buffer.from(r,"base64");Ke.writeFileSync(l,c),u.webContents.send("download-complete",{success:!0,path:l})}catch(r){console.error("Image download error:",r),u.webContents.send("download-complete",{success:!1,error:r.message})}});Ce.ipcMain.handle("select-download-directory",async t=>{const d=Ce.BrowserWindow.fromWebContents(t.sender),{canceled:h,filePaths:u}=await Ce.dialog.showOpenDialog(d,{properties:["openDirectory"]});return h||u.length===0?null:u[0]});const su=async(t,d,h,u,f)=>{let l=u;if(l)try{Ke.existsSync(u)||Ke.mkdirSync(u,{recursive:!0});const r=Math.random().toString(36).substring(2,8),c=`${f+1}_${h.replace(/[^a-z0-9]/gi,"_").substring(0,30)}_${r}.mp4`;l=Ie.join(u,c)}catch(r){console.error("Directory handling error:",r),t.webContents.send("download-complete",{success:!1,error:"Li khi x l th mc lu."});return}else{const{canceled:r,filePath:c}=await Ce.dialog.showSaveDialog(t,{title:"Lu video",defaultPath:`veo-video-${h.replace(/[^a-z0-9]/gi,"_").substring(0,50)}.mp4`,filters:[{name:"MP4 Videos",extensions:["mp4"]}]});if(r||!c){t.webContents.send("download-complete",{success:!1,error:"Download canceled"});return}l=c}try{const r=await fetch(d);if(!r.ok)throw new Error(`Failed to fetch video: ${r.statusText}`);const c=await r.arrayBuffer(),a=Buffer.from(c);Ke.writeFileSync(l,a),t.webContents.send("download-complete",{success:!0,path:l})}catch(r){console.error("Download error:",r),t.webContents.send("download-complete",{success:!1,error:r.message})}};Ce.ipcMain.on("download-video",async(t,{url:d,promptText:h,savePath:u,promptIndex:f})=>{const l=Ce.BrowserWindow.fromWebContents(t.sender);l&&await su(l,d,h,u,f)});Ce.ipcMain.on("browser:start-automation",async(t,{prompts:d,authToken:h,model:u,aspectRatio:f,autoSaveConfig:l})=>{const r=Ce.BrowserWindow.fromWebContents(t.sender);dr=!1;const c=(n,o,i,m=null,g=null,y=null)=>{r&&!r.isDestroyed()&&r.webContents.send("browser:log",{promptId:n,message:o,status:i,videoUrl:m,operationName:g,sceneId:y}),console.log(`[${n||"general"}] ${o}`)},a=d[0]?.id||"automation-task",s=new Map;d.forEach(n=>s.set(n.id,0));try{c(a,"Dlcktmc...","running");const n=await fetch("https://mmoreal.com/api/get_active_cookie.php",{method:"GET",headers:{Authorization:`Bearer ${h}`}}),o=await n.text();if(!n.ok)throw new Error(`Khng th ly cookie (HTTP ${n.status}): ${o}`);let i;try{i=JSON.parse(o)}catch{throw new Error(`Phn hi t my ch cookie khng hp l. Ni dung: ${o}`)}if(!i.success||!i.cookie)throw new Error(i.message||"Khng tm thy cookie hp l t my ch.");const m=i.cookie;c(a,`Dlck "${m.name}". Bdtprj...`,"running");const g=await $r(null,{url:"https://labs.google/fx/api/trpc/project.createProject",cookie:m,options:{method:"POST",body:{json:{projectTitle:`Veo Project API - ${new Date().toLocaleString()}`,toolName:"PINHOLE"}}}}),y=g?.result?.data?.json?.result?.projectId;if(!y)throw new Error("Khng th to project mi qua API. Phn hi: "+JSON.stringify(g));c(a,`DtprjID: ${y}.`,"running"),c(a,"Khprj3s...","running"),await new Promise(R=>setTimeout(R,3e3));const p=[...d];let S=[...d];const C=new Map,P=(R,w)=>{const T=s.get(R.id)||0;if(T<Xi){const E=T+1;s.set(R.id,E),c(R.id,`Li: ${w}. Th li ln ${E}/${Xi}...`,"running"),S.unshift(R)}else c(R.id,`Li cui cng sau ${Xi} ln th: ${w}`,"error");C.delete(R.id)},I=async()=>{for(;S.length>0&&!dr;)if(C.size<Nf){const R=S.shift();if(!R)continue;try{C.set(R.id,{text:R.text,status:"submitting"}),c(R.id,"Bdgprompt...","submitting");const w=`client-generated-uuid-${Date.now()}-${Math.random()}`;let T=u,E=`VIDEO_ASPECT_RATIO_${f.toUpperCase()}`;f==="PORTRAIT"&&(T="veo_3_0_t2v_fast_portrait_ultra",E="VIDEO_ASPECT_RATIO_PORTRAIT");const q={clientContext:{projectId:y,tool:"PINHOLE"},requests:[{aspectRatio:E,seed:Math.floor(Math.random()*1e5),textInput:{prompt:R.text},videoModelKey:T,metadata:{sceneId:w}}]},L=await $r(null,{url:"https://aisandbox-pa.googleapis.com/v1/video:batchAsyncGenerateVideoText",cookie:m,options:{method:"POST",body:q}});c(R.id,"Dgpromt,cph...","running");const x=L?.operations?.[0];if(x?.operation?.name&&x?.sceneId)C.set(R.id,{...C.get(R.id),operationName:x.operation.name,sceneId:x.sceneId,status:"processing"}),c(R.id,"DnID,CxL...","processing",null,x.operation.name,x.sceneId);else throw new Error("Khng ly c operation/scene ID. Phn hi: "+JSON.stringify(L))}catch(w){P(R,w.message)}}else await new Promise(R=>setTimeout(R,2e3))},M=async()=>{for(;(S.length>0||C.size>0)&&!dr;){const R=Array.from(C.entries());for(const[w,T]of R){const E=T;if(!(E.status!=="processing"||!E.operationName||!E.sceneId))try{c(w,"Sttcheck...","processing",null,E.operationName,E.sceneId);const L=(await $r(null,{url:"https://aisandbox-pa.googleapis.com/v1/video:batchCheckAsyncVideoGenerationStatus",cookie:m,options:{method:"POST",body:{operations:[[{operation:{name:E.operationName},sceneId:E.sceneId}]]}}})).operations[0],x=L.status;let k="Loading: "+x.replace("MEDIA_GENERATION_STATUS_","").toLowerCase();if(c(w,k,"processing",null,E.operationName,E.sceneId),x==="MEDIA_GENERATION_STATUS_SUCCESSFUL"){const D=L?.operation?.metadata?.video?.fifeUrl||L?.operation?.metadata?.video?.servingBaseUri;if(c(w,"Video hon thnh!","success",D,E.operationName,E.sceneId),l&&l.enabled&&l.path&&D){c(w,`T ng lu video vo "${l.path}"`,"downloading");const O=p.find(F=>F.id===w);if(O){const F=p.indexOf(O);await su(r,D,O.text,l.path,F)}}C.delete(w)}else if(x==="MEDIA_GENERATION_STATUS_FAILED"){const D=d.find(F=>F.id===w),O=L?.error?.message||"Li khng xc nh";D?P(D,O):C.delete(w)}}catch(q){const L=d.find(x=>x.id===w);L?P(L,q.message):C.delete(w)}}await new Promise(w=>setTimeout(w,8e3))}dr||c(a,"Tt c cc prompt  c x l!","success")};await Promise.all([I(),M()])}catch(n){let o=`Li nghim trng: ${n.message}`;d.forEach(i=>c(i.id,o,"error"))}});nt.autoUpdater.autoDownload=!1;nt.autoUpdater.autoInstallOnAppQuit=!0;function cr(t,d,h=null){t&&!t.isDestroyed()&&t.webContents.send("update-message",d,h)}function lu(){const t=Ce.screen.getPrimaryDisplay(),{width:d,height:h}=t.workAreaSize,u=new Ce.BrowserWindow({width:d,height:h,autoHideMenuBar:!0,webPreferences:{contextIsolation:!0,nodeIntegration:!1,preload:Ie.join(__dirname,"preload.js"),devTools:ou}});Ki?u.loadURL(Ki):(u.loadFile(Ie.join(__dirname,"..","dist","index.html")),u.once("ready-to-show",()=>{nt.autoUpdater.checkForUpdatesAndNotify()})),nt.autoUpdater.on("update-available",f=>{cr(u,"update-available",f),nt.autoUpdater.downloadUpdate()}),nt.autoUpdater.on("update-not-available",f=>{cr(u,"update-not-available",f)}),nt.autoUpdater.on("download-progress",f=>{cr(u,"download-progress",f)}),nt.autoUpdater.on("update-downloaded",f=>{cr(u,"update-downloaded",f)}),nt.autoUpdater.on("error",f=>{cr(u,"error",f.message)})}Ce.app.whenReady().then(()=>{ou||Ce.session.defaultSession.webRequest.onHeadersReceived((t,d)=>{d({responseHeaders:{...t.responseHeaders,"Content-Security-Policy":["script-src 'self'"]}})}),Ce.ipcMain.handle("fetch-api",$r),lu()});Ce.ipcMain.on("restart-and-install",()=>{nt.autoUpdater.quitAndInstall()});Ce.app.on("window-all-closed",()=>{process.platform!=="darwin"&&Ce.app.quit()});Ce.app.on("activate",()=>{Ce.BrowserWindow.getAllWindows().length===0&&lu()});
